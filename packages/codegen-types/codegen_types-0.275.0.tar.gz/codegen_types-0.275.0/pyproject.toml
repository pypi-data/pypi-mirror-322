[project]
name = "codegen-types"
dynamic = ["version", "urls"]
description = "Types for the codegen SDK"
readme = "README.md"
requires-python = ">=3.12, <3.14"
dependencies = [
    "graph-sitter-types>=6.2.1",
]
[build-system]
requires = ["hatchling", "hatch-vcs", "hatch-build-scripts"]
build-backend = "hatchling.build"
[tool.uv.sources]
codegen-backend = { workspace = true }
[tool.hatch.version]
source = "vcs"
raw-options = { root = "../.." }
[tool.hatch.envs.default]
installer = "uv"
[tool.hatch.build]
packages = ["out/typings/app"]
[tool.hatch.metadata.hooks.vcs]
Homepage = "https://github.com/codegen-sh/codegen"
source_archive = "https://github.com/codegen-sh/codegen/archive/{commit_hash}.zip"

[tool.hatch.build.hooks.build-scripts]
dependencies = ["codegen-backend", "pyright"]
[[tool.hatch.build.hooks.build-scripts.scripts]]
commands = [
    "rm -rf typings",
    "rm -rf out",
    "pyright --createstub app.codemod.compilation.models.context",
    "pyright --createstub app.codemod.compilation.models.pr_options",
    "pyright --createstub app.codemod.compilation.models.github_named_user_context",
    "pyright --createstub app.codemod.compilation.models.pull_request_context",
    "pyright --createstub app.codemod.compilation.models.pr_part_context",
    "touch typings/app/py.typed",
]
artifacts = ["typings/**/*.pyi", "typings/**/py.typed"]
out_dir = "out"
clean_out_dir = true
[tool.uv]
cache-keys = [{ git = { commit = true, tags = true } }]

