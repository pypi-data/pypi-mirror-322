(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7477],{96539:function(e,t,i){var s=i(77400).Symbol;e.exports=s},99736:function(e,t,i){var s=i(96539),n=i(34840),r=i(21258),o=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):r(e)}},39120:function(e,t,i){var s="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=s},34840:function(e,t,i){var s=i(96539),n=Object.prototype,r=n.hasOwnProperty,o=n.toString,a=s?s.toStringTag:void 0;e.exports=function(e){var t=r.call(e,a),i=e[a];try{e[a]=void 0;var s=!0}catch(e){}var n=o.call(e);return s&&(t?e[a]=i:delete e[a]),n}},21258:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},77400:function(e,t,i){var s=i(39120),n="object"==typeof self&&self&&self.Object===Object&&self,r=s||n||Function("return this")();e.exports=r},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92360:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},55193:function(e,t,i){var s=i(99736),n=i(92360);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==s(e)}},45550:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/activity",function(){return i(73406)}])},53359:function(e,t,i){"use strict";i.d(t,{H:function(){return r},V:function(){return s.V}});var s=i(75139),n=i(60136);let r=()=>{let{errorAlert:e}=(0,s.V)();return{handleError:t=>{let i="An unexpected error occurred. Please try again.";(0,n.Ot)(t)?i=t.data.detail:(0,n.tB)(t)&&(i=t.data.detail[0].msg),e(i)}}}},75139:function(e,t,i){"use strict";i.d(t,{V:function(){return r}});var s=i(24246),n=i(5702);let r=()=>{let e=(0,n.pmc)();return{errorAlert:(t,i,r)=>{let o={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,s.jsxs)(n.bZj,{alignItems:"normal",status:"error",children:[(0,s.jsx)(n.zMQ,{}),(0,s.jsxs)(n.xuv,{children:[i&&(0,s.jsx)(n.CdC,{children:i}),(0,s.jsx)(n.XaZ,{children:t})]}),(0,s.jsx)(n.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,o):e(o)},successAlert:(t,i,r)=>{let o={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,s.jsxs)(n.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,s.jsx)(n.zMQ,{}),(0,s.jsxs)(n.xuv,{children:[i&&(0,s.jsx)(n.CdC,{children:i}),(0,s.jsx)(n.XaZ,{children:t})]}),(0,s.jsx)(n.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,o):e(o)}}}},35682:function(e,t,i){"use strict";var s=i(24246),n=i(5702);t.Z=e=>{let{title:t,icon:i,type:r,...o}=e;return(0,s.jsx)(n.wpx,{size:"small",type:r,"data-testid":"action-".concat(t),icon:i,iconPosition:"start",...o,children:t})}},87573:function(e,t,i){"use strict";var s=i(24246),n=i(5702),r=i(2686);t.Z=()=>(0,s.jsxs)(n.J2e,{isLazy:!0,trigger:"hover",children:[(0,s.jsx)(n.xol,{children:(0,s.jsx)(n.UOT,{color:"gray.400"})}),(0,s.jsxs)(n.yky,{bgColor:"gray.800",color:"white",fontSize:"sm",w:"auto",border:"none",children:[(0,s.jsx)(n.Ytg,{fontWeight:"semibold",border:"none",pb:0,children:"Activity legend:"}),(0,s.jsx)(n.QHN,{bgColor:"gray.800"}),(0,s.jsx)(n.baG,{border:"none",children:(0,s.jsxs)(n.MIq,{columns:2,spacing:2,children:[(0,s.jsxs)(n.xuv,{children:[(0,s.jsx)(r.Rv,{})," Change detected"]}),(0,s.jsxs)(n.xuv,{children:[(0,s.jsx)(r.$P,{})," Data labeled"]}),(0,s.jsxs)(n.xuv,{children:[(0,s.jsx)(r.zj,{})," Monitoring"]}),(0,s.jsxs)(n.xuv,{children:[(0,s.jsx)(r.dK,{})," Addition detected"]}),(0,s.jsxs)(n.xuv,{children:[(0,s.jsx)(r.Kr,{})," Unmonitored"]}),(0,s.jsxs)(n.xuv,{children:[(0,s.jsx)(r.q1,{})," Removal detected"]})]})})]})]})},38637:function(e,t,i){"use strict";var s=i(86677),n=i(11032);t.Z=()=>{let e=(0,s.useRouter)();return{monitorId:e.query.monitorId,resourceUrn:e.query.resourceUrn,navigateToDetectionResults:t=>{let{resourceUrn:i,filterTabIndex:s}=t;e.push({pathname:n.dS,query:{resourceUrn:i,filterTabIndex:s}})},navigateToDiscoveryResults:t=>{let{resourceUrn:i,filterTabIndex:s}=t;e.push({pathname:n.Sj,query:{resourceUrn:i,filterTabIndex:s}})}}}},64900:function(e,t,i){"use strict";i.d(t,{Z:function(){return L}});var s=i(24246),n=i(5702),r=i(53359),o=i(10284);let a=(0,n.IUT)({displayName:"MonitorOffIcon",viewBox:"0 0 12 12",path:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.47125 1H5.85H6.15H6.51188L6.58875 1.36914L7.52062 5.83268L6.42408 4.98635L6.03375 3.11719L5.8038 4.50761L4.99323 3.882L5.40562 1.38867L5.47125 1ZM4.80795 5.0022L4.67675 5.79545L5.48735 6.42109L5.61854 5.62783L4.80795 5.0022ZM6.73856 6.49227L6.96125 7.55866L8.42407 8.6877L8.69498 8.00228L7.94864 7.42624L7.88625 7.58398L7.83501 7.33853L6.73856 6.49227ZM8.33138 6.45844L9.07755 7.03434L9.30188 6.4668H11.55H12V5.5293H11.55H9H8.69812L8.58375 5.82031L8.33138 6.45844ZM7.27551 9.06443L7.35399 9.125H7.28813L7.27551 9.06443ZM4.49147 6.91566L5.30209 7.54131L4.79437 10.6113L4.72875 11H4.35H4.05H3.69563L3.61313 10.6406L2.64563 6.46875H0.45H0V5.53125H0.45H2.69777L3.49646 6.1477L4.15125 8.97266L4.49147 6.91566Z",fill:"currentColor"}),(0,s.jsx)("g",{"clip-path":"url(#clip0_341_3102)",children:(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6755 10.4168L0.164222 2.304L0.775218 1.51237L11.2865 9.62517L10.6755 10.4168Z",fill:"currentColor"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_341_3102",children:(0,s.jsx)("rect",{width:"11.5",height:"9",fill:"white",transform:"translate(0 1.5)"})})})]})}),l=(0,n.IUT)({displayName:"MonitorOnIcon",viewBox:"0 0 12 10",path:(0,s.jsx)("path",{d:"M5.47125 0H5.85H6.15H6.51188L6.58875 0.369141L7.88625 6.58398L8.58375 4.82031L8.69812 4.5293H9H11.55H12V5.4668H11.55H9.30188L8.36625 7.83398L8.25188 8.125H7.95H7.65H7.28813L7.21125 7.75586L6.03375 2.11719L4.79437 9.61133L4.72875 10H4.35H4.05H3.69563L3.61313 9.64062L2.64563 5.46875H0.45H0V4.53125H0.45H3H3.35438L3.43688 4.89062L4.15125 7.97266L5.40562 0.388672L5.47125 0Z",fill:"currentColor"})});var c=i(35682),d=i(6111),u=i(59104),f=i(52962),L=e=>{let{resource:t,ignoreChildActions:i=!1}=e,L=(0,f.G)(t),[h,{isLoading:g}]=(0,d.v8)(),[x,{isLoading:j}]=(0,d.vi)(),{successAlert:v}=(0,r.V)(),[I,{isLoading:_}]=(0,d.Tl)(),m=g||j||_,{diff_status:p,child_diff_statuses:A}=t,C=L===u.X.SCHEMA,T=L===u.X.FIELD,S=C&&void 0===p||!T&&p===o.LL.ADDITION,E=p!==o.LL.MUTED,b=p===o.LL.MUTED&&!T,y=p===o.LL.MUTED&&T,O=A&&(A[o.LL.ADDITION]||A[o.LL.REMOVAL]),D=p===o.LL.MONITORED&&!i&&O;return(0,s.jsxs)(n.Ugi,{onClick:e=>e.stopPropagation(),children:[S&&(0,s.jsx)(c.Z,{title:"Monitor",icon:(0,s.jsx)(l,{}),onClick:async()=>{await h({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id}),v("Data discovery has started. The results may take some time to appear in the “Data discovery“ tab.","".concat(t.name||"The resource"," is now being monitored."))},disabled:m,loading:g}),y&&(0,s.jsx)(c.Z,{title:"Un-Mute",icon:(0,s.jsx)(l,{}),onClick:async()=>{await I({staged_resource_urn:t.urn}),v("The resource has been un-muted.","".concat(t.name||"The resource"," is now un-muted."))},disabled:m,loading:g}),b&&(0,s.jsx)(c.Z,{title:"Monitor",icon:(0,s.jsx)(l,{}),onClick:async()=>{await h({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id,unmute_children:!0,classify_monitored_resources:!0}),v("Data discovery has started. The results may take some time to appear in the “Data discovery“ tab.","".concat(t.name||"The resource"," is now being monitored."))},disabled:m,loading:g}),D&&(0,s.jsx)(c.Z,{title:"Confirm",icon:(0,s.jsx)(n.nQG,{}),onClick:async()=>{await h({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id}),v('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},disabled:m,loading:g}),E&&(0,s.jsx)(c.Z,{title:"Ignore",icon:(0,s.jsx)(a,{}),onClick:async()=>{await x({staged_resource_urn:t.urn}),v("Ignored data will not be monitored for changes or added to Fides datasets.","".concat(t.name||"Resource"," ignored"))},disabled:m,loading:j})]})}},33890:function(e,t,i){"use strict";var s=i(24246),n=i(5702),r=i(53359),o=i(90049),a=i(10284),l=i(35682),c=i(6111);t.Z=e=>{let{resource:t}=e,[i,{isLoading:d}]=(0,c.v8)(),[u,{isLoading:f}]=(0,c.cM)(),[L,{isLoading:h}]=(0,c.vi)(),g=f||h||d,{diff_status:x,child_diff_statuses:j,top_level_field_name:v}=t,{successAlert:I}=(0,r.V)(),_=x===a.LL.CLASSIFICATION_ADDITION||x===a.LL.CLASSIFICATION_UPDATE,m=j&&(j[a.LL.CLASSIFICATION_ADDITION]||j[a.LL.CLASSIFICATION_UPDATE]),p=(_||m)&&!v,A=_||m,C=p&&A,T=async()=>{await u({staged_resource_urn:t.urn}),I('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},S=async()=>{await L({staged_resource_urn:t.urn}),I("Ignored changes will not be added to a Fides dataset.","".concat(t.name||"Changes"," ignored"))},E=async()=>{await i({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id,start_classification:!0,classify_monitored_resources:!0}),I("Reclassification of ".concat((0,o.Z)(t)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,s.jsxs)(n.Ugi,{onClick:e=>e.stopPropagation(),gap:2,children:[p&&(0,s.jsx)(l.Z,{title:"Confirm",icon:(0,s.jsx)(n.nQG,{}),onClick:T,disabled:g,loading:f}),A&&(0,s.jsx)(l.Z,{title:"Ignore",icon:(0,s.jsx)(n.tpL,{}),onClick:S,disabled:g,loading:h}),!C&&(0,s.jsx)(l.Z,{title:"Reclassify",icon:(0,s.jsx)(n.nyI,{}),onClick:E,disabled:g,loading:d}),(0,s.jsx)(n.LZC,{}),C&&(0,s.jsxs)(n.v2r,{children:[(0,s.jsx)(n.j2t,{as:n.wpx,size:"small",type:"text",icon:(0,s.jsx)(n.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,s.jsx)(n.qyq,{children:(0,s.jsx)(n.sNh,{onClick:E,icon:(0,s.jsx)(n.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})}},20382:function(e,t,i){"use strict";var s=i(24246),n=i(5702),r=i(51557),o=i(58525);let a=e=>{let{children:t,...i}=e;return(0,s.jsx)(n.Cts,{fontSize:"xs",fontWeight:"normal",textTransform:"none",...i,children:t})};t.Z=e=>{var t;let{result:i,changeTypeOverride:n}=e;if(null===(t=i.user_assigned_data_categories)||void 0===t?void 0:t.length)return(0,s.jsx)(a,{colorScheme:"green",children:"Reviewed"});switch(null!=n?n:(0,o.Z)(i)){case r.E.MUTED:return(0,s.jsx)(a,{colorScheme:"gray",children:"Unmonitored"});case r.E.MONITORED:return(0,s.jsx)(a,{colorScheme:"green",children:"Monitoring"});case r.E.IN_PROGRESS:return(0,s.jsx)(a,{colorScheme:"blue",children:"Classifying"});default:return(0,s.jsx)(a,{colorScheme:"orange",children:"Pending review"})}}},16956:function(e,t,i){"use strict";i.d(t,{Z:function(){return f}});var s=i(24246),n=i(5702),r=i(2686),o=i(58525),a=i(90049),l=i(59104),c=i(52962),d=i(2053),u=e=>(0,c.G)(e)!==l.X.FIELD||(0,d.Z)(e),f=e=>{let{result:t,changeTypeOverride:i}=e,l=null!=i?i:(0,o.Z)(t);return(0,s.jsxs)(n.kCb,{alignItems:"center",height:"100%",children:[(0,s.jsx)(n.ua7,{label:l,children:(0,s.jsx)("span",{children:r.QL[l]})}),(0,s.jsx)(n.xvT,{fontSize:"xs",lineHeight:4,fontWeight:u(t)?"semibold":"normal",overflow:"hidden",textOverflow:"ellipsis",children:(0,a.Z)(t)})]})}},59104:function(e,t,i){"use strict";var s,n;i.d(t,{X:function(){return s}}),(n=s||(s={})).DATABASE="Database",n.SCHEMA="Schema",n.TABLE="Table",n.FIELD="Field",n.NONE="none"},15025:function(e,t){"use strict";t.Z=e=>{let t=e.split(".");return t.length>1?t[1]:""}},58525:function(e,t,i){"use strict";var s=i(51557),n=i(10284);t.Z=e=>e.diff_status===n.LL.ADDITION?s.E.ADDITION:e.diff_status===n.LL.REMOVAL?s.E.REMOVAL:e.diff_status===n.LL.CLASSIFYING||e.diff_status===n.LL.CLASSIFICATION_QUEUED?s.E.IN_PROGRESS:e.diff_status===n.LL.CLASSIFICATION_ADDITION||e.diff_status===n.LL.CLASSIFICATION_UPDATE?s.E.CLASSIFICATION:e.child_diff_statuses?e.child_diff_statuses[n.LL.CLASSIFYING]||e.child_diff_statuses[n.LL.CLASSIFICATION_QUEUED]?s.E.IN_PROGRESS:e.child_diff_statuses[n.LL.CLASSIFICATION_ADDITION]||e.child_diff_statuses[n.LL.CLASSIFICATION_UPDATE]?s.E.CLASSIFICATION:e.child_diff_statuses[n.LL.ADDITION]||e.child_diff_statuses[n.LL.REMOVAL]?s.E.CHANGE:e.diff_status===n.LL.MONITORED?s.E.MONITORED:e.diff_status===n.LL.MUTED?s.E.MUTED:s.E.NONE:s.E.NONE},52962:function(e,t,i){"use strict";i.d(t,{G:function(){return n}});var s=i(59104);let n=e=>{var t,i,n;return e?e.resource_type?e.resource_type:(null===(t=e.schemas)||void 0===t?void 0:t.length)?s.X.DATABASE:(null===(i=e.tables)||void 0===i?void 0:i.length)?s.X.SCHEMA:(null===(n=e.fields)||void 0===n?void 0:n.length)?s.X.TABLE:s.X.FIELD:s.X.NONE}},90049:function(e,t){"use strict";t.Z=e=>{let{name:t,urn:i,monitor_config_id:s,database_name:n,schema_name:r,table_name:o,top_level_field_name:a,top_level_field_urn:l}=e;if(!a)return t;let c=i.split(".");return l?i.replace("".concat(l).concat("."),""):([s,n,r,o,a].forEach(e=>{if(e){let t=c.indexOf(e);t>-1&&c.splice(t,1)}}),c.join("."))}},71329:function(e,t){"use strict";t.Z=e=>e.urn},2053:function(e,t){"use strict";t.Z=e=>{var t;return!!e.parent_table_urn&&null!==(t=e.sub_field_urns)&&void 0!==t&&!!t.length&&!e.top_level_field_name}},73406:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return N}});var s,n,r=i(24246),o=i(27378),a=i(65464),l=i(37541),c=i(38637),d=i(92222),u=i(59003),f=i(5702),L=i(8540),h=i(98320),g=i(6111),x=i(87573),j=i(20382),v=i(16956),I=i(71329),_=i(22770);(s=n||(n={})).DATASET="Dataset",s.CLASSIFICATION="Classification";var m=i(15025),p=i(51557),A=i(58525),C=e=>(0,A.Z)(e)===p.E.CLASSIFICATION?n.CLASSIFICATION:n.DATASET,T=i(64900),S=i(33890);let E={items:[],total:0,page:1,size:50,pages:1},b=()=>(0,r.jsx)(f.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,r.jsxs)(f.gCW,{children:[(0,r.jsx)(f.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,r.jsx)(f.xvT,{fontSize:"sm",children:"You're up to date!"})]})}),y=(0,d.Cl)();var O=e=>{let{onRowClick:t,statusFilters:i,childsStatusFilters:s}=e,[a,l]=(0,o.useState)(""),{PAGE_SIZES:c,pageSize:p,setPageSize:A,onPreviousPageClick:O,isPreviousPageDisabled:D,onNextPageClick:N,isNextPageDisabled:Z,startRange:w,endRange:M,pageIndex:R,setTotalPages:H}=(0,L.oi)(),{isFetching:F,isLoading:P,data:U}=(0,g.z8)({diff_status:i,child_diff_status:s,page:R,size:p,search:a}),{items:k,total:V,pages:z}=(0,o.useMemo)(()=>null!=U?U:E,[U]);(0,o.useEffect)(()=>{H(z)},[z,H]);let G=(0,o.useMemo)(()=>[y.accessor(e=>e.name,{id:"name",cell:e=>(0,r.jsx)(v.Z,{result:e.row.original}),header:e=>(0,r.jsx)(L.Rr,{value:"Name",...e})}),y.accessor(e=>e.urn,{id:"project",cell:e=>(0,r.jsx)(L.G3,{value:(0,m.Z)(e.getValue())}),header:e=>(0,r.jsx)(L.Rr,{value:"Project",...e})}),y.display({id:"status",cell:e=>(0,r.jsx)(j.Z,{result:e.row.original}),header:e=>(0,r.jsx)(L.Rr,{value:"Status",...e})}),y.accessor(e=>e.system,{id:"system",cell:e=>(0,r.jsx)(L.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(L.Rr,{value:"System",...e})}),y.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,r.jsx)(L.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(L.Rr,{value:"Detected by",...e})}),y.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,r.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,r.jsx)(L.Rr,{value:"When",...e})}),y.accessor(e=>e,{id:"action",cell:e=>C(e.getValue())===n.DATASET?(0,r.jsx)(T.Z,{resource:e.getValue()}):(0,r.jsx)(S.Z,{resource:e.getValue()}),header:e=>(0,r.jsx)(L.Rr,{value:"Action",...e})})],[]),X=(0,u.b7)({getCoreRowModel:(0,d.sC)(),getGroupedRowModel:(0,d.qe)(),getExpandedRowModel:(0,d.rV)(),getRowId:I.Z,columns:G,manualPagination:!0,data:k,columnResizeMode:"onChange"});return P?(0,r.jsx)(L.I4,{rowHeight:36,numRows:36}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.Q$,{children:(0,r.jsxs)(f.kCb,{gap:6,align:"center",children:[(0,r.jsx)(f.xuv,{flexShrink:0,children:(0,r.jsx)(_.M,{value:a,onChange:l})}),(0,r.jsx)(x.Z,{})]})}),(0,r.jsx)(L.ZK,{tableInstance:X,onRowClick:t,emptyTableNotice:(0,r.jsx)(b,{})}),(0,r.jsx)(L.s8,{totalRows:V||0,pageSizes:c,setPageSize:A,onPreviousPageClick:O,isPreviousPageDisabled:D||F,onNextPageClick:N,isNextPageDisabled:Z||F,startRange:w,endRange:M})]})},D=i(10284),N=()=>{let{navigateToDetectionResults:e,navigateToDiscoveryResults:t}=(0,c.Z)();return(0,r.jsxs)(a.Z,{title:"Data discovery",children:[(0,r.jsx)(l.Z,{heading:"All activity"}),(0,r.jsx)(O,{onRowClick:i=>{if(C(i)===n.DATASET){e({resourceUrn:i.urn});return}t({resourceUrn:i.urn})},statusFilters:[D.LL.ADDITION,D.LL.REMOVAL,D.LL.CLASSIFICATION_ADDITION,D.LL.CLASSIFICATION_UPDATE],childsStatusFilters:[D.LL.ADDITION,D.LL.REMOVAL,D.LL.CLASSIFICATION_ADDITION,D.LL.CLASSIFICATION_UPDATE]})]})}}},function(e){e.O(0,[8033,5559,8540,1767,2888,9774,179],function(){return e(e.s=45550)}),_N_E=e.O()}]);