(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4154],{96539:function(e,t,n){var i=n(77400).Symbol;e.exports=i},99736:function(e,t,n){var i=n(96539),s=n(34840),r=n(21258),o=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?s(e):r(e)}},74833:function(e,t,n){var i=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(s,""):e}},39120:function(e,t,n){var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},34840:function(e,t,n){var i=n(96539),s=Object.prototype,r=s.hasOwnProperty,o=s.toString,a=i?i.toStringTag:void 0;e.exports=function(e){var t=r.call(e,a),n=e[a];try{e[a]=void 0;var i=!0}catch(e){}var s=o.call(e);return i&&(t?e[a]=n:delete e[a]),s}},21258:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},77400:function(e,t,n){var i=n(39120),s="object"==typeof self&&self&&self.Object===Object&&self,r=i||s||Function("return this")();e.exports=r},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),s=n(82846),r=n(91936),o=Math.max,a=Math.min;e.exports=function(e,t,n){var l,c,d,u,g,m,f=0,h=!1,p=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var n=l,i=c;return l=c=void 0,f=t,u=e.apply(i,n)}function y(e){var n=e-m,i=e-f;return void 0===m||n>=t||n<0||p&&i>=d}function j(){var e,n,i,r=s();if(y(r))return b(r);g=setTimeout(j,(e=r-m,n=r-f,i=t-e,p?a(i,d-n):i))}function b(e){return(g=void 0,v&&l)?x(e):(l=c=void 0,u)}function w(){var e,n=s(),i=y(n);if(l=arguments,c=this,m=n,i){if(void 0===g)return f=e=m,g=setTimeout(j,t),h?x(e):u;if(p)return clearTimeout(g),g=setTimeout(j,t),x(m)}return void 0===g&&(g=setTimeout(j,t)),u}return t=r(t)||0,i(n)&&(h=!!n.leading,d=(p="maxWait"in n)?o(r(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==g&&clearTimeout(g),f=0,l=m=c=g=void 0},w.flush=function(){return void 0===g?u:b(s())},w}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92360:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},55193:function(e,t,n){var i=n(99736),s=n(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==i(e)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},91936:function(e,t,n){var i=n(74833),s=n(11611),r=n(55193),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return o;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):a.test(e)?o:+e}},25654:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/[systemId]",function(){return n(89609)}])},65464:function(e,t,n){"use strict";var i=n(24246),s=n(78670),r=n(88038),o=n.n(r);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:r}=e;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 200px)",children:[(0,i.jsxs)(o(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(s.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...r,children:t})]})}},37541:function(e,t,n){"use strict";var i=n(24246),s=n(78670),r=n(18622);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:a,rightContent:l,style:c,...d}=e;return(0,i.jsxs)("div",{...d,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.X6q,{className:n||a?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,l&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,i.jsx)(r.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},53359:function(e,t,n){"use strict";n.d(t,{H:function(){return r},V:function(){return i.V}});var i=n(75139),s=n(60136);let r=()=>{let{errorAlert:e}=(0,i.V)();return{handleError:t=>{let n="An unexpected error occurred. Please try again.";(0,s.Ot)(t)?n=t.data.detail:(0,s.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}}},75139:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(24246),s=n(78670);let r=()=>{let e=(0,s.pmc)();return{errorAlert:(t,n,r)=>{let o={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,i.jsxs)(s.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,i.jsx)(s.zMQ,{}),(0,i.jsxs)(s.xuv,{children:[n&&(0,i.jsx)(s.CdC,{children:n}),(0,i.jsx)(s.XaZ,{children:t})]}),(0,i.jsx)(s.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,o):e(o)},successAlert:(t,n,r)=>{let o={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,i.jsxs)(s.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,i.jsx)(s.zMQ,{}),(0,i.jsxs)(s.xuv,{children:[n&&(0,i.jsx)(s.CdC,{children:n}),(0,i.jsx)(s.XaZ,{children:t})]}),(0,i.jsx)(s.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,o):e(o)}}}},18622:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),s=n(78670),r=n(79894),o=n.n(r),a=n(27378);let{Text:l}=s.AntTypography,c=e=>{let{items:t,...n}=e,r=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let s=n===t.length-1,r={...e};return"string"==typeof r.title&&(r.title=(0,i.jsx)(l,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,children:r.title})),r.icon&&(r.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:r.icon}),r.title]})),r.href&&r.title&&(r.title=(0,i.jsx)(o(),{href:r.href,className:"ant-breadcrumb-link",children:r.title}),delete r.href),r}),[t]);return(0,i.jsx)(s.zrq,{items:r,...n})}},93400:function(e,t,n){"use strict";var i=n(24246),s=n(78670);t.Z=e=>{let{children:t,onClick:n,...r}=e;return(0,i.jsx)(s.Cts,{variant:"taxonomy",textTransform:"none",fontWeight:"normal",as:n?"button":void 0,onClick:n,_hover:n?{borderColor:"primary.900"}:void 0,...r,children:t})}},22770:function(e,t,n){"use strict";n.d(t,{M:function(){return l}});var i=n(24246),s=n(66726),r=n.n(s),o=n(27378),a=n(33312);let l=e=>{let{value:t,onChange:n}=e,[s,l]=(0,o.useState)(t),c=r()(n,500),d=(0,o.useCallback)(e=>{l(e),c(e)},[]);return(0,i.jsx)(a.Z,{search:s,onChange:d,onClear:()=>{l(""),n("")}})}},83543:function(e,t,n){"use strict";n.d(t,{OP:function(){return a},Ud:function(){return i},WJ:function(){return r},qv:function(){return o},wi:function(){return s}});let{useGetAggregateMonitorResultsQuery:i,useGetDiscoveredSystemAggregateQuery:s,useGetDiscoveredAssetsQuery:r,useAddMonitorResultsMutation:o,useIgnoreMonitorResultsMutation:a}=n(21618).u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:i}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:i,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:n=1,size:i=20,search:s}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:n,size:i,search:s,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:i=1,size:s=20,search:r}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results"),params:{resolved_system_id:n,page:i,size:s,search:r,diff_status:"addition"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResults:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/promote",params:{staged_resource_urns:e.urnList,system_key:e.systemId}}),invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResults:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/mute",params:{staged_resource_urns:e.urnList,system_key:e.systemId}}),invalidatesTags:["Discovery Monitor Results"]})})})},89609:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var i=n(24246),s=n(86677),r=n(65464),o=n(11032),a=n(37541),l=n(59003),c=n(92222),d=n(78670),u=n(27378),g=n(53359),m=n(8540),f=n(83543),h=n(22770),p=n(60136);let v=e=>{let{asset:t}=e,[n,{isLoading:s}]=(0,f.qv)(),[r,{isLoading:o}]=(0,f.OP)(),{successAlert:a,errorAlert:l}=(0,g.V)(),c=s||o,{urn:u,name:m,resource_type:h}=t,v=async()=>{let e=await n({urnList:[u]});(0,p.D4)(e)?l("There was adding the asset to the system inventory"):a("".concat(h,' "').concat(m,'" has been added to the system inventory.'),"Confirmed")},x=async()=>{await r({urnList:[u]}),a("".concat(h,' "').concat(m,'" has been ignored and will not be added to the system inventory.'),"Ignored")};return(0,i.jsxs)(d.vyj,{children:[(0,i.jsx)(d.wpx,{"data-testid":"add-btn",size:"small",onClick:v,disabled:c,loading:s,children:"Add"}),(0,i.jsx)(d.wpx,{"data-testid":"ignore-btn",size:"small",onClick:x,disabled:c,loading:o,children:"Ignore"})]})};var x=n(31374),y=n(21820);let j=e=>{var t;let{...n}=e,[s,r]=(0,u.useState)(),{data:o,isFetching:a}=(0,x.xF)({page:1,size:25,search:s||void 0}),l=null==o?void 0:null===(t=o.items)||void 0===t?void 0:t.map(e=>({value:e.fides_key,label:e.name})),c=(0,u.useCallback)(e=>{(null==e?void 0:e.length)>1&&r(e),(null==e?void 0:e.length)===0&&r(void 0)},[r]),g=(0,u.useMemo)(()=>(0,y.Ds)(c,300),[c]);return(0,i.jsx)(d.WPr,{placeholder:"Search...","aria-label":"Search for a system to select",dropdownStyle:{minWidth:"500px"},"data-testid":"system-select",...n,showSearch:!0,filterOption:!1,options:l,onSearch:g,loading:n.loading||a})};var b=n(71533),w=n(93400),C=n(6111);let _=e=>{let{urn:t,systemName:n,monitorConfigId:s}=e,[r,o]=(0,u.useState)(!1),[a,{isLoading:l}]=(0,C.NA)(),{successAlert:c,errorAlert:m}=(0,g.V)(),f=async(e,n)=>{let i=await a({staged_resource_urn:t,monitor_config_id:s,system_key:e});(0,p.D4)(i)?m("There was a problem the system"):c("Asset has been assigned to ".concat(n.label,"."),"Confirmed"),o(!1)};return(0,i.jsxs)(i.Fragment,{children:[!r&&(0,i.jsx)("div",{style:(0,b.J9)(),children:n?(0,i.jsx)(w.Z,{onClick:()=>o(!0),"data-testid":"system-badge",children:(0,i.jsxs)(i.Fragment,{children:[n,(0,i.jsx)(d.dY8,{})]})}):(0,i.jsx)(d.wpx,{size:"small",type:"text","aria-label":"add",icon:(0,i.jsx)(d.PJP.mm_,{}),onClick:()=>o(!0)})}),!!r&&(0,i.jsx)(j,{variant:"borderless",className:"w-full",autoFocus:!0,defaultOpen:!0,onBlur:()=>o(!1),onSelect:f,loading:l})]})},k=()=>{let e=(0,c.Cl)();return{columns:[e.display({id:"select",cell:e=>{let{row:t}=e;return(0,i.jsx)(m.k,{isChecked:t.getIsSelected(),onChange:t.getToggleSelectedHandler(),dataTestId:"select-".concat(t.original.name||t.id)})},header:e=>{let{table:t}=e;return(0,i.jsx)(m.k,{isChecked:t.getIsAllPageRowsSelected(),isIndeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:25}),e.accessor(e=>e.name,{id:"name",cell:e=>(0,i.jsx)(m.G3,{value:e.getValue()}),header:"Asset"}),e.accessor(e=>e.resource_type,{id:"resource_type",cell:e=>(0,i.jsx)(m.G3,{value:e.getValue()}),header:"Type"}),e.accessor(e=>e.system,{id:"system",cell:e=>!!e.row.original.monitor_config_id&&(0,i.jsx)(_,{systemName:e.getValue(),monitorConfigId:e.row.original.monitor_config_id,urn:e.row.original.urn}),header:"System",meta:{noPadding:!0,width:"auto"}}),e.accessor(e=>e.locations,{id:"locations",cell:e=>(0,i.jsx)(m.G3,{value:e.getValue().length>1?"".concat(e.getValue().length," locations"):e.getValue()[0]}),header:"Locations"}),e.accessor(e=>e.domain,{id:"domain",cell:e=>(0,i.jsx)(m.G3,{value:e.getValue()}),header:"Domain"}),e.display({id:"actions",cell:e=>(0,i.jsx)(v,{asset:e.row.original}),header:"Actions",meta:{width:"auto",disableRowClick:!0}})]}},S=e=>{let{monitorId:t,systemId:n}=e,[s,r]=(0,u.useState)({}),[o,{isLoading:a}]=(0,f.qv)(),[p,{isLoading:v}]=(0,f.OP)(),x=a||v,{PAGE_SIZES:y,pageSize:j,setPageSize:b,onPreviousPageClick:w,isPreviousPageDisabled:C,onNextPageClick:_,isNextPageDisabled:S,startRange:I,endRange:T,pageIndex:P,setTotalPages:R,resetPageIndexToDefault:A}=(0,m.oi)(),[M,O]=(0,u.useState)(""),{successAlert:z}=(0,g.V)();(0,u.useEffect)(()=>{A()},[t,M,A]);let{data:N,isLoading:q,isFetching:E}=(0,f.WJ)({key:t,system:n,page:P,size:j,search:M});(0,u.useEffect)(()=>{N&&R(N.pages||1)},[N,R]);let{columns:D}=k(),L=(0,l.b7)({getCoreRowModel:(0,c.sC)(),columns:D,manualPagination:!0,data:(null==N?void 0:N.items)||[],columnResizeMode:"onChange",onRowSelectionChange:r,state:{rowSelection:s}}),V=Object.keys(s).filter(e=>s[e]),Z=async()=>{await o({urnList:V}),z("".concat(V.length," assets from ").concat(n," have been added to the system inventory."),"Confirmed")},W=async()=>{await p({urnList:V}),z("".concat(V.length," assets from ").concat(n," have been ignored and will not be added to the system inventory."),"Confirmed")};return t&&n?q?(0,i.jsx)(m.I4,{rowHeight:36,numRows:36}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Q$,{children:[(0,i.jsx)(h.M,{value:M,onChange:O}),(0,i.jsxs)(d.kCb,{alignItems:"center",children:[!!V.length&&(0,i.jsx)(d.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:6,"data-testid":"selected-count",children:"".concat(V.length," selected")}),(0,i.jsx)(d.Ugi,{children:(0,i.jsxs)(d.v2r,{children:[(0,i.jsx)(d.j2t,{as:d.wpx,icon:(0,i.jsx)(d.PJP._ME,{}),iconPosition:"end",loading:x,"data-testid":"bulk-actions-menu",disabled:!V.length||x,type:"primary",children:"Actions"}),(0,i.jsxs)(d.qyq,{children:[(0,i.jsx)(d.sNh,{fontSize:"small",onClick:Z,"data-testid":"bulk-add",children:"Add"}),(0,i.jsx)(d.RaW,{}),(0,i.jsx)(d.sNh,{fontSize:"small",onClick:W,"data-testid":"bulk-ignore",children:"Ignore"})]})]})})]})]}),(0,i.jsx)(m.ZK,{tableInstance:L,emptyTableNotice:(0,i.jsx)(d.oj8,{image:d.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})}),(0,i.jsx)(m.s8,{totalRows:(null==N?void 0:N.items.length)||0,pageSizes:y,setPageSize:b,onPreviousPageClick:w,isPreviousPageDisabled:C||E,onNextPageClick:_,isNextPageDisabled:S||E,startRange:I,endRange:T})]}):null};var I=()=>{let e=(0,s.useRouter)(),t=decodeURIComponent(e.query.monitorId),n=decodeURIComponent(e.query.systemId);return(0,i.jsxs)(r.Z,{title:"Action center - Discovered assets",children:[(0,i.jsx)(a.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:o.vi},{title:t,href:"".concat(o.vi,"/").concat(t)},{title:n===o.Kl?"Uncategorized":n}]}),(0,i.jsx)(S,{monitorId:t,systemId:n})]})}}},function(e){e.O(0,[8033,5559,8540,2888,9774,179],function(){return e(e.s=25654)}),_N_E=e.O()}]);