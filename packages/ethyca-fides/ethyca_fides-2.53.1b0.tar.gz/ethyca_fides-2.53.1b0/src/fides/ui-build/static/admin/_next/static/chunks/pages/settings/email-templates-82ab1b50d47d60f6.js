(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4966],{18193:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/email-templates",function(){return n(11371)}])},43124:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(24246),i=n(78670),s=n(88038),a=n.n(s),l=n(86677);n(27378);var o=n(11596),u=n(72247),c=n(11032),d=()=>{let e=(0,l.useRouter)();return(0,r.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(i.xuv,{children:[(0,r.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(i.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,r.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:s=!0,mainProps:c}=e,p=(0,o.hz)(),g=(0,l.useRouter)(),m="/privacy-requests"===g.pathname||"/datastore-connection"===g.pathname,f=!(p.flags.privacyRequestsConfiguration&&m),{data:h}=(0,u.JE)(void 0,{skip:f}),{data:x}=(0,u.PW)(void 0,{skip:f}),y=p.flags.privacyRequestsConfiguration&&(!h||!x)&&m;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(a(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(i.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[y?(0,r.jsx)(d,{}):null,t]})]})}},37541:function(e,t,n){"use strict";var r=n(24246),i=n(78670),s=n(18622);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:a=!0,children:l,rightContent:o,style:u,...c}=e;return(0,r.jsxs)("div",{...c,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,r.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(i.X6q,{className:n||l?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,o&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,r.jsx)(s.m,{className:l?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),l]})}},51425:function(e,t,n){"use strict";var r=n(24246),i=n(78670),s=n(39514);t.Z=e=>{let{title:t,tooltip:n,children:a,...l}=e;return(0,r.jsxs)(i.xuv,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...l,children:[(0,r.jsxs)(i.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,n?(0,r.jsx)(i.xvT,{as:"span",mx:1,children:(0,r.jsx)(s.Z,{label:n})}):void 0]}),(0,r.jsx)(i.Kqy,{p:6,spacing:6,children:a})]})}},60136:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return p},Ot:function(){return u},c6:function(){return i},cj:function(){return m},e$:function(){return l},fn:function(){return o},iC:function(){return g},nU:function(){return d},tB:function(){return c}});var r,i,s=n(41164);let a="An unexpected error occurred. Please try again.",l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function o(e){return"object"==typeof e&&null!=e&&"status"in e}function u(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:n}=e;return{status:n,message:l(e,t.message)}}return t},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=i||(i={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let g={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},m=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},18622:function(e,t,n){"use strict";n.d(t,{m:function(){return u}});var r=n(24246),i=n(78670),s=n(79894),a=n.n(s),l=n(27378);let{Text:o}=i.AntTypography,u=e=>{let{items:t,...n}=e,s=(0,l.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let i=n===t.length-1,s={...e};return"string"==typeof s.title&&(s.title=(0,r.jsx)(o,{style:{color:"inherit",maxWidth:i?void 0:400},ellipsis:!i,children:s.title})),s.icon&&(s.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,r.jsx)(a(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href),s}),[t]);return(0,r.jsx)(i.zrq,{items:s,...n})}},16781:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Vo:function(){return u},t5:function(){return o}});var r=n(24246),i=n(78670);let s=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",t]})},a=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},o=e=>{let t=(0,r.jsx)(s,{children:e});return{...l,description:t}},u=e=>{let t=(0,r.jsx)(a,{children:e});return{...l,description:t,status:"error"}}},44444:function(e,t,n){"use strict";n.d(t,{KC:function(){return a},ew:function(){return l},gQ:function(){return s},jM:function(){return r},lE:function(){return i}});let{useGetMessagingTemplatesQuery:r,useUpdateMessagingTemplatesMutation:i,useGetMessagingTemplateByIdQuery:s,useGetMessagingTemplateDefaultQuery:a,useDeleteMessagingTemplateByIdMutation:l}=n(21618).u.injectEndpoints({endpoints:e=>({getMessagingTemplates:e.query({query:()=>({url:"messaging/templates"}),providesTags:()=>["Messaging Templates"]}),updateMessagingTemplates:e.mutation({query:e=>({url:"messaging/templates",method:"PUT",body:e}),invalidatesTags:()=>["Messaging Templates"]}),getMessagingTemplateById:e.query({query:e=>({url:"/messaging/templates/".concat(e)}),providesTags:()=>["Property-Specific Messaging Templates"]}),getMessagingTemplateDefault:e.query({query:e=>({url:"/messaging/templates/default/".concat(e)})}),deleteMessagingTemplateById:e.mutation({query:e=>({url:"/messaging/templates/".concat(e),method:"DELETE"}),invalidatesTags:()=>["Property-Specific Messaging Templates"]})})})},11371:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(24246),i=n(78670),s=n(43124),a=n(37541),l=n(34090),o=n(51425),u=n(34803),c=n(60136),d=n(16781),p=n(44444),g=e=>{let{emailTemplates:t}=e,[n,{isLoading:s}]=(0,p.lE)(),a=(0,i.pmc)(),g=async(e,t)=>{let r=Object.entries(e).map(e=>{let[t,{content:n}]=e;return{type:t,content:n}});(n=>{if((0,c.D4)(n)){let e=(0,c.e$)(n.error,"An unexpected error occurred while editing the email templates. Please try again.");a((0,d.Vo)(e))}else a((0,d.t5)("Email templates saved.")),t.resetForm({values:e})})(await n(r))},m=t.reduce((e,t)=>({...e,[t.type]:{label:t.label,content:t.content}}),{});return(0,r.jsx)(l.J9,{enableReinitialize:!0,initialValues:m,onSubmit:g,children:()=>(0,r.jsxs)(l.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[Object.entries(m).map(e=>{let[t,n]=e;return(0,r.jsx)(i.xuv,{py:3,children:(0,r.jsxs)(o.Z,{title:n.label,children:[(0,r.jsx)(u.j0,{label:"Message subject",name:"".concat(t,".content.subject"),variant:"stacked"}),(0,r.jsx)(u.Ks,{label:"Message body",name:"".concat(t,".content.body"),variant:"stacked",resize:!0})]})},t)}),(0,r.jsx)(i.kCb,{justifyContent:"right",width:"100%",paddingTop:2,children:(0,r.jsx)(i.wpx,{htmlType:"submit",type:"primary",loading:s,children:"Save"})})]})})},m=()=>{let{data:e,isLoading:t}=(0,p.jM)();return t?(0,r.jsx)(s.Z,{title:"Email templates",children:(0,r.jsx)(i.$jN,{})}):(0,r.jsx)(s.Z,{title:"Email templates",children:(0,r.jsxs)(i.xuv,{"data-testid":"email-templates",children:[(0,r.jsx)(a.Z,{heading:"Email Templates"}),(0,r.jsxs)(i.xuv,{maxWidth:"720px",children:[(0,r.jsx)(i.xvT,{fontSize:"sm",children:"When privacy requests are submitted, Fides emails the data subject to confirm their identity and keep them updated on the status of the request. The templates below allow you to configure the subject and body of the email to suit your business needs. To change the appearance of the email, you may use the editors within your messaging provider (e.g. Mailgun, SendGrid, Twilio)."}),(0,r.jsx)(i.xuv,{padding:2,children:(0,r.jsx)(g,{emailTemplates:e})})]})]})})}},41164:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return o},XD:function(){return u},cz:function(){return c},hE:function(){return l},oK:function(){return s}});var r=n(76649);let i=e=>"error"in e,s=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,a=e=>(0,r.Ln)({status:"number",data:{}},e),l=e=>(0,r.Ln)({detail:"string"},e),o=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),u=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r}});let r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?i in e?e.some(e=>s(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>s(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>s(n,t[e]));class a{static narrow(e){return new a(t=>r(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a(e=>t(e)&&n(e))}}new a(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=18193)}),_N_E=e.O()}]);