(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{53611:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/consent",function(){return n(78188)}])},14838:function(e,t,n){"use strict";var r=n(24246),i=n(5702);t.Z=e=>(0,r.jsx)(i.rUS,{isExternal:!0,color:"complimentary.500",...e})},43124:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(24246),i=n(5702),s=n(88038),o=n.n(s),a=n(86677);n(27378);var l=n(11596),d=n(72247),c=n(11032),u=()=>{let e=(0,a.useRouter)();return(0,r.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(i.xuv,{children:[(0,r.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(i.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,r.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:s=!0,mainProps:c}=e,p=(0,l.hz)(),g=(0,a.useRouter)(),h="/privacy-requests"===g.pathname||"/datastore-connection"===g.pathname,f=!(p.flags.privacyRequestsConfiguration&&h),{data:m}=(0,d.JE)(void 0,{skip:f}),{data:x}=(0,d.PW)(void 0,{skip:f}),b=p.flags.privacyRequestsConfiguration&&(!m||!x)&&h;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(o(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(i.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[b?(0,r.jsx)(u,{}):null,t]})]})}},37541:function(e,t,n){"use strict";var r=n(24246),i=n(5702),s=n(18622);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:a,rightContent:l,style:d,...c}=e;return(0,r.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,r.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(i.X6q,{className:n||a?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,r.jsx)(s.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},60136:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return p},Ot:function(){return d},c6:function(){return i},cj:function(){return h},e$:function(){return a},fn:function(){return l},iC:function(){return g},nU:function(){return u},tB:function(){return c}});var r,i,s=n(41164);let o="An unexpected error occurred. Please try again.",a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function l(e){return"object"==typeof e&&null!=e&&"status"in e}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:o};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:n}=e;return{status:n,message:a(e,t.message)}}return t},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=i||(i={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let g={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},h=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},18622:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var r=n(24246),i=n(5702),s=n(79894),o=n.n(s),a=n(27378);let{Text:l}=i.AntTypography,d=e=>{let{items:t,...n}=e,s=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let i=n===t.length-1,s={...e};return"string"==typeof s.title&&(s.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:i?void 0:400},ellipsis:!i,children:s.title})),s.icon&&(s.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,r.jsx)(o(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href),s}),[t]);return(0,r.jsx)(i.zrq,{items:s,...n})}},56901:function(e,t,n){"use strict";n.d(t,{ZS:function(){return a},a4:function(){return s}});var r=n(80406);let i=n(21618).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:s}=i,o={purposes:{},special_purposes:{}},a=(0,r.P1)(i.endpoints.getPurposes.select(),e=>{let{data:t}=e;return t||o})},16781:function(e,t,n){"use strict";n.d(t,{MA:function(){return a},Vo:function(){return d},t5:function(){return l}});var r=n(24246),i=n(5702);let s=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",t]})},o=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})},a={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},l=e=>{let t=(0,r.jsx)(s,{children:e});return{...a,description:t}},d=e=>{let t=(0,r.jsx)(o,{children:e});return{...a,description:t,status:"error"}}},78188:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(24246),i=n(5702),s=n(34090),o=n(27378),a=n(44296),l=n(14838),d=n(11596),c=n(60136),u=n(43124),p=n(37541),g=n(56901),h=n(39514),f=n(16781),m=e=>{let{name:t,enabled:n}=e;return(0,r.jsxs)(i.Kqy,{spacing:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:[(0,r.jsxs)(i.xvT,{children:[t," status"," ",n?(0,r.jsx)(i.Cts,{fontWeight:"semibold",color:"green.800",backgroundColor:"green.100",children:"Enabled"}):(0,r.jsx)(i.Cts,{fontWeight:"semibold",backgroundColor:"red.100",children:"Disabled"})]}),(0,r.jsxs)(i.xvT,{children:["To ",n?"disable":"enable"," ",t,", please contact your Fides administrator or"," ",(0,r.jsx)(l.Z,{href:"mailto:support@ethyca.com",children:"Ethyca support"}),"."]})]})},x=n(34803),b=n(27365),v=n(10284),j=e=>{let{title:t,children:n,...s}=e;return(0,r.jsxs)(i.xuv,{backgroundColor:"gray.50",borderRadius:"4px",padding:"3","data-testid":"setting-".concat(t),...s,children:[(0,r.jsx)(i.xvT,{fontSize:"md",fontWeight:"bold",lineHeight:5,color:"gray.700",mb:3,children:t}),n]})};let y=e=>{let{title:t,children:n}=e;return(0,r.jsxs)(i.Kqy,{spacing:3,mb:3,"data-testid":"section-".concat(t),children:[(0,r.jsx)(i.xvT,{fontSize:"sm",fontWeight:"bold",lineHeight:5,color:"gray.700",children:t}),n]})};var _=()=>{let{tcf:e}=(0,d.hz)(),t=!!(0,a.C)(b.D2).enabled,{values:n}=(0,s.u6)(),o=!!n.gpp.us_approach;return(0,r.jsx)(j,{title:"Global Privacy Platform",children:(0,r.jsxs)(i.Kqy,{spacing:6,children:[(0,r.jsx)(m,{name:"GPP",enabled:t}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{title:"GPP U.S.",children:(0,r.jsx)(x.xt,{name:"gpp.us_approach",variant:"stacked",defaultFirstSelected:!1,options:[{label:"Enable U.S. National",value:v.en.NATIONAL,tooltip:"When US National is selected, Fides will present the same privacy notices to all consumers located anywhere in the United States."},{label:"Enable U.S. State-by-State",value:v.en.STATE,tooltip:"When state-by-state is selected, Fides will only present consent to consumers and save their preferences if they are located in a state that is supported by the GPP. The consent options presented to consumers will vary depending on the regulations in each state."},{label:"Enable US National and State-by-State notices",value:v.en.ALL,tooltip:"When enabled, Fides can be configured to serve the National and U.S. state notices. This mode is intended to provide consent coverage to U.S. states with new privacy laws where GPP support lags behind the effective date of state laws."}]})}),o?(0,r.jsxs)(y,{title:"MSPA",children:[(0,r.jsx)(x.Xl,{name:"gpp.mspa_covered_transactions",label:"All transactions covered by MSPA",tooltip:"When selected, the Fides CMP will communicate to downstream vendors that all preferences are covered under the MSPA."}),(0,r.jsx)(x.w8,{label:"Enable MSPA service provider mode",name:"gpp.mspa_service_provider_mode",variant:"switchFirst",tooltip:"Enable service provider mode if you do not engage in any sales or sharing of personal information.",isDisabled:!!n.gpp.mspa_opt_out_option_mode}),(0,r.jsx)(x.w8,{label:"Enable MSPA opt-out option mode",name:"gpp.mspa_opt_out_option_mode",variant:"switchFirst",tooltip:"Enable opt-out option mode if you engage or may engage in the sales or sharing of personal information, or process any information for the purpose of targeted advertising.",isDisabled:!!n.gpp.mspa_service_provider_mode})]}):null]}):null,e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.izJ,{color:"gray.200"}),(0,r.jsxs)(y,{title:"GPP Europe",children:[(0,r.jsx)(i.xvT,{fontSize:"sm",fontWeight:"medium",children:"Configure TCF string for Global Privacy Platform"}),(0,r.jsx)(x.w8,{label:"Enable TC string",name:"gpp.enable_tcfeu_string",variant:"switchFirst",tooltip:"When enabled, the GPP API will include a TCF EU consent string for users who are in regions where TCF applies."})]})]}):null]})})};let C=e=>{let{children:t,purpose:n,endCol:s}=e;return(0,r.jsx)(i.kCb,{flex:"1",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px",borderRight:s?"solid 1px":"unset",borderColor:"gray.200",height:"100%",minWidth:"36px",children:[1,3,4,5,6].includes(n)?null:(0,r.jsx)(i.xuv,{children:t})})};var w=()=>{let{values:e,setFieldValue:t}=(0,s.u6)(),{purposes:n}=(0,a.C)(g.ZS);return(0,r.jsx)(s.F2,{name:"purposeOverrides",render:()=>(0,r.jsxs)(i.kCb,{flexDirection:"column",minWidth:"944px",children:[(0,r.jsxs)(i.kCb,{width:"100%",border:"solid 1px",borderColor:"gray.200",backgroundColor:"gray.50",height:"36px",children:[(0,r.jsx)(i.kCb,{width:"600px",pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",children:"TCF purpose"}),(0,r.jsx)(i.kCb,{flex:"1",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",minWidth:"36px",children:(0,r.jsx)(i.xvT,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Allowed"})}),(0,r.jsx)(i.kCb,{flex:"1",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",children:(0,r.jsx)(i.xvT,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Consent"})}),(0,r.jsx)(i.kCb,{flex:"1",alignItems:"center",children:(0,r.jsx)(i.xvT,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Legitimate interest"})})]}),e.purposeOverrides.map((s,o)=>(0,r.jsxs)(i.kCb,{width:"100%",height:"36px",alignItems:"center",borderBottom:"solid 1px",borderColor:"gray.200",children:[(0,r.jsxs)(i.kCb,{width:"600px",borderLeft:"solid 1px",borderColor:"gray.200",p:0,alignItems:"center",height:"100%",pl:"4",fontSize:"xs",fontWeight:"normal",lineHeight:"4",children:["Purpose ",s.purpose,": ",n[s.purpose].name]}),(0,r.jsx)(i.kCb,{flex:"1",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px",borderColor:"gray.200",height:"100%",children:(0,r.jsx)(i.xuv,{children:(0,r.jsx)(x.w8,{name:"purposeOverrides[".concat(o,"].is_included"),onChange:e=>{e.target.checked||(t("purposeOverrides[".concat(o,"].is_consent"),!1),t("purposeOverrides[".concat(o,"].is_legitimate_interest"),!1))}})})}),(0,r.jsx)(C,{purpose:s.purpose,children:(0,r.jsx)(x.w8,{isDisabled:!e.purposeOverrides[o].is_included||e.purposeOverrides[o].is_legitimate_interest,name:"purposeOverrides[".concat(o,"].is_consent")})}),(0,r.jsx)(C,{purpose:s.purpose,endCol:!0,children:(0,r.jsx)(x.w8,{isDisabled:!e.purposeOverrides[o].is_included||e.purposeOverrides[o].is_consent,name:"purposeOverrides[".concat(o,"].is_legitimate_interest")})})]},s.purpose))]})})},S=n(96878),T=n(72247),P=()=>{let{isLoading:e}=(0,S.x8)(),{tcf:t}=(0,d.hz)(),{data:n,isLoading:x}=(0,S.n3)(void 0,{skip:e||!t}),[b]=(0,S.M7)(),{data:y,isLoading:C}=(0,T.tB)({api_set:!0}),{data:P,isLoading:E}=(0,T.tB)({api_set:!1}),[k,{isLoading:A}]=(0,T.L)(),N=(0,a.C)(T.D2),F=(0,o.useMemo)(()=>y&&(null==y?void 0:y.consent)&&"override_vendor_purposes"in y.consent?y.consent.override_vendor_purposes:!!P&&null!=P&&!!P.consent&&"override_vendor_purposes"in P.consent&&P.consent.override_vendor_purposes,[y,P]),{isLoading:L}=(0,g.a4)(),I=(0,i.pmc)(),W=async e=>{let t=e=>{if(I.closeAll(),(0,c.D4)(e)){let t=(0,c.e$)(e.error,"An unexpected error occurred while saving. Please try again.");I((0,f.Vo)(t))}else I((0,f.t5)("Settings saved successfully"))},n=[...e.purposeOverrides.map(e=>{let t;return e.is_consent&&(t=v.I$.CONSENT),e.is_legitimate_interest&&(t=v.I$.LEGITIMATE_INTERESTS),{purpose:e.purpose,is_included:e.is_included,required_legal_basis:t}})];if(F){let e=await b(n);if((0,c.D4)(e)){t(e);return}}let{enabled:r,...i}=e.gpp;t(await k({gpp:i}))},z=async e=>{let t=await k({consent:{override_vendor_purposes:e}});e&&await b(n.map(e=>({...e,is_included:!0,required_legal_basis:void 0}))),(e=>{if(I.closeAll(),(0,c.D4)(e)){let t=(0,c.e$)(e.error,"An unexpected error occurred while saving vendor override settings. Please try again.");I((0,f.Vo)(t))}})(t)},O=(0,o.useMemo)(()=>({purposeOverrides:n?n.map(e=>({purpose:e.purpose,is_included:e.is_included,is_consent:e.required_legal_basis===v.I$.CONSENT,is_legitimate_interest:e.required_legal_basis===v.I$.LEGITIMATE_INTERESTS})):[],gpp:N}),[n,N]);return(0,r.jsx)(u.Z,{title:"Consent Configuration",children:e||L||x||C||E?(0,r.jsx)(i.kCb,{justifyContent:"center",alignItems:"center",height:"100%",children:(0,r.jsx)(i.$jN,{})}):(0,r.jsxs)(i.xuv,{"data-testid":"consent-configuration",children:[(0,r.jsx)(p.Z,{heading:"Consent settings"}),(0,r.jsxs)(i.Kqy,{spacing:3,mb:3,children:[(0,r.jsx)(j,{title:"Transparency & Consent Framework settings",children:(0,r.jsx)(m,{name:"TCF",enabled:t})}),(0,r.jsxs)(j,{title:"Vendor overrides",children:[t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.xvT,{mb:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:"Configure overrides for TCF related purposes."}),(0,r.jsxs)(i.kCb,{alignItems:"center",marginBottom:2,children:[(0,r.jsx)(i.rAg,{size:"small",checked:F,onChange:z,disabled:A}),(0,r.jsx)(i.xvT,{px:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:"Override vendor purposes"}),(0,r.jsx)(h.Z,{label:"Toggle on if you want to globally change any flexible legal bases or remove TCF purposes from your CMP"})]}),(0,r.jsx)(i.xvT,{mb:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:F?"The table below allows you to adjust which TCF purposes you allow as part of your user facing notices and business activites.":null})]}):null,F&&t?(0,r.jsxs)(i.xvT,{fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:["To configure this section, select the purposes you allow and where available, the appropriate legal bases (either Consent or Legitimate Interest)."," ",(0,r.jsxs)(l.Z,{href:"https://fid.es/tcf-overrides",children:["Read the guide on vendor overrides here."," "]})]}):null]})]}),(0,r.jsx)(s.J9,{initialValues:O,enableReinitialize:!0,onSubmit:W,children:e=>{let{dirty:t,isValid:n,isSubmitting:o}=e;return(0,r.jsx)(s.l0,{children:(0,r.jsxs)(i.Kqy,{spacing:6,children:[F?(0,r.jsx)(w,{}):null,(0,r.jsx)(_,{}),(0,r.jsx)(i.wpx,{htmlType:"submit",type:"primary",disabled:!t||!n,loading:o,"data-testid":"save-btn",className:"self-start",children:"Save"})]})})}})]})})}},41164:function(e,t,n){"use strict";n.d(t,{Bw:function(){return o},D4:function(){return i},Dy:function(){return l},XD:function(){return d},cz:function(){return c},hE:function(){return a},oK:function(){return s}});var r=n(76649);let i=e=>"error"in e,s=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,o=e=>(0,r.Ln)({status:"number",data:{}},e),a=e=>(0,r.Ln)({detail:"string"},e),l=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r}});let r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?i in e?e.some(e=>s(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>s(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>s(n,t[e]));class o{static narrow(e){return new o(t=>r(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof o?e.NF:e instanceof Function?e:t=>r(e,t);return new o(e=>t(e)&&n(e))}}new o(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=53611)}),_N_E=e.O()}]);