import{s as pe,k as R,l as de,m as ve,d,o as q,i as x,j as O,p as be,y as z,e as p,t as F,c as v,a as b,b as G,f as g,g as n,u as ye,h as J,A as K,D as Q}from"../chunks/scheduler.BXITcVIL.js";import{S as we,i as Ie,t as H,a as $,c as ke,f as X,b as Ee,d as Me,m as De,e as Se,g as Ve}from"../chunks/index.CKC1pLeO.js";import{g as Z}from"../chunks/entry.B71ECrEP.js";import{p as Ye}from"../chunks/stores.CTYjQQ_n.js";import{d as ue}from"../chunks/relativeTime.BDz4fsXT.js";import{g as fe,W as Ce,m as Be}from"../chunks/index.DGiyb8ll.js";import{b as je,d as Ne}from"../chunks/index.CaHcOjnl.js";import{g as Ue,c as Ae}from"../chunks/index.CsC5nGr8.js";import{M as Pe}from"../chunks/Messages.DPfe3uBN.js";import{t as Te}from"../chunks/Toaster.svelte_svelte_type_style_lang.D8ruyfxE.js";import"../chunks/Modal.DzDM0HzR.js";import"../chunks/updater.DQM2zBRb.js";import"../chunks/marked.esm._0_gBwjO.js";import{g as We}from"../chunks/index.DppQFxdV.js";import{g as Oe}from"../chunks/index.I0UnpWOX.js";import"../chunks/FileSaver.min.CimDdHIv.js";import"../chunks/postcss.Bu86e1T_.js";function me(s){let f,a,i,c,t,o,u,V,w,k,h=ue(s[4].chat.timestamp).format(s[10].t("MMMM DD, YYYY"))+"",D,Y,E,_,r,C,B,j,N,M,e,I,U=s[10].t("Clone Chat")+"",A,S,L,ee;function ge(l){s[15](l)}function he(l){s[16](l)}function _e(l){s[17](l)}let P={className:"h-full flex pt-4 pb-8",user:s[5],chatId:s[8],readOnly:!0,selectedModels:s[3],processing:qe,bottomPadding:s[12].length>0,sendPrompt:He,continueResponse:Le,regenerateResponse:ze};return s[0]!==void 0&&(P.history=s[0]),s[7]!==void 0&&(P.messages=s[7]),s[2]!==void 0&&(P.autoScroll=s[2]),r=new Pe({props:P}),z.push(()=>X(r,"history",ge)),z.push(()=>X(r,"messages",he)),z.push(()=>X(r,"autoScroll",_e)),{c(){f=p("div"),a=p("div"),i=p("div"),c=p("div"),t=p("div"),o=p("div"),u=F(s[6]),V=R(),w=p("div"),k=p("div"),D=F(h),Y=R(),E=p("div"),_=p("div"),Ee(r.$$.fragment),N=R(),M=p("div"),e=p("div"),I=p("button"),A=F(U),this.h()},l(l){f=v(l,"DIV",{class:!0});var m=b(f);a=v(m,"DIV",{class:!0});var y=b(a);i=v(y,"DIV",{class:!0,id:!0});var T=b(i);c=v(T,"DIV",{class:!0});var se=b(c);t=v(se,"DIV",{class:!0});var W=b(t);o=v(W,"DIV",{class:!0});var te=b(o);u=G(te,s[6]),te.forEach(d),V=q(W),w=v(W,"DIV",{class:!0});var ae=b(w);k=v(ae,"DIV",{class:!0});var oe=b(k);D=G(oe,h),oe.forEach(d),ae.forEach(d),W.forEach(d),se.forEach(d),Y=q(T),E=v(T,"DIV",{class:!0});var le=b(E);_=v(le,"DIV",{class:!0});var re=b(_);Me(r.$$.fragment,re),re.forEach(d),le.forEach(d),T.forEach(d),N=q(y),M=v(y,"DIV",{class:!0});var ie=b(M);e=v(ie,"DIV",{class:!0});var ne=b(e);I=v(ne,"BUTTON",{class:!0});var ce=b(I);A=G(ce,U),ce.forEach(d),ne.forEach(d),ie.forEach(d),y.forEach(d),m.forEach(d),this.h()},h(){g(o,"class","text-2xl font-semibold line-clamp-1"),g(k,"class","text-gray-400"),g(w,"class","flex text-sm justify-between items-center mt-1"),g(t,"class","px-3"),g(c,"class","pt-5 px-2 w-full max-w-5xl mx-auto"),g(_,"class",""),g(E,"class","h-full w-full flex flex-col py-2"),g(i,"class","flex flex-col w-full flex-auto overflow-auto h-0"),g(i,"id","messages-container"),g(I,"class","px-4 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),g(e,"class","pb-5"),g(M,"class","absolute bottom-0 right-0 left-0 flex justify-center w-full bg-gradient-to-b from-transparent to-white dark:to-gray-900"),g(a,"class","flex flex-col flex-auto justify-center relative"),g(f,"class","h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(l,m){x(l,f,m),n(f,a),n(a,i),n(i,c),n(c,t),n(t,o),n(o,u),n(t,V),n(t,w),n(w,k),n(k,D),n(i,Y),n(i,E),n(E,_),De(r,_,null),n(a,N),n(a,M),n(M,e),n(e,I),n(I,A),S=!0,L||(ee=ye(I,"click",s[13]),L=!0)},p(l,m){(!S||m&64)&&J(u,l[6]),(!S||m&1040)&&h!==(h=ue(l[4].chat.timestamp).format(l[10].t("MMMM DD, YYYY"))+"")&&J(D,h);const y={};m&32&&(y.user=l[5]),m&256&&(y.chatId=l[8]),m&8&&(y.selectedModels=l[3]),!C&&m&1&&(C=!0,y.history=l[0],K(()=>C=!1)),!B&&m&128&&(B=!0,y.messages=l[7],K(()=>B=!1)),!j&&m&4&&(j=!0,y.autoScroll=l[2],K(()=>j=!1)),r.$set(y),(!S||m&1024)&&U!==(U=l[10].t("Clone Chat")+"")&&J(A,U)},i(l){S||(H(r.$$.fragment,l),S=!0)},o(l){$(r.$$.fragment,l),S=!1},d(l){l&&d(f),Se(r),L=!1,ee()}}}function Re(s){let f,a,i,c;document.title=f=`
		`+(s[6]?`${s[6].length>30?`${s[6].slice(0,30)}...`:s[6]} | ${s[9]}`:`${s[9]}`)+`
	`;let t=s[1]&&me(s);return{c(){a=R(),t&&t.c(),i=de()},l(o){ve("svelte-1123lr8",document.head).forEach(d),a=q(o),t&&t.l(o),i=de()},m(o,u){x(o,a,u),t&&t.m(o,u),x(o,i,u),c=!0},p(o,[u]){(!c||u&576)&&f!==(f=`
		`+(o[6]?`${o[6].length>30?`${o[6].slice(0,30)}...`:o[6]} | ${o[9]}`:`${o[9]}`)+`
	`)&&(document.title=f),o[1]?t?(t.p(o,u),u&2&&H(t,1)):(t=me(o),t.c(),H(t,1),t.m(i.parentNode,i)):t&&(Ve(),$(t,1,1,()=>{t=null}),ke())},i(o){c||(H(t),c=!0)},o(o){$(t),c=!1},d(o){o&&(d(a),d(i)),t&&t.d(o)}}}let qe="";const He=()=>{},Le=()=>{},ze=()=>{};function Fe(s,f,a){let i,c,t,o;O(s,fe,e=>a(8,i=e)),O(s,Ye,e=>a(14,c=e)),O(s,Ce,e=>a(9,t=e));const u=be("i18n");O(s,u,e=>a(10,o=e));let V=!1,w=!0,k=[""],h=null,D=null,Y="",E=[],_=[],r={messages:{},currentId:null};const C=async()=>{if(await Be.set(await We(localStorage.token)),await fe.set(c.params.id),a(4,h=await Ue(localStorage.token,i).catch(async e=>(await Z("/"),null))),h){a(5,D=await Oe(localStorage.token,h.user_id).catch(I=>(console.error(I),null)));const e=h.chat;return e?(console.log(e),a(3,k=((e==null?void 0:e.models)??void 0)!==void 0?e.models:[e.models??""]),a(0,r=((e==null?void 0:e.history)??void 0)!==void 0?e.history:Ne(e.messages)),a(6,Y=e.title),a(2,w=!0),await Q(),_.length>0&&a(0,r.messages[_.at(-1).id].done=!0,r),await Q(),!0):null}},B=async()=>{if(!h)return;const e=await Ae(localStorage.token,h.id).catch(I=>(Te.error(`${I}`),null));e&&Z(`/c/${e.id}`)};function j(e){r=e,a(0,r)}function N(e){_=e,a(7,_),a(0,r)}function M(e){w=e,a(2,w)}return s.$$.update=()=>{s.$$.dirty&1&&a(7,_=je(r,r.currentId)),s.$$.dirty&16384&&c.params.id&&(async()=>await C()?(await Q(),a(1,V=!0)):await Z("/"))()},[r,V,w,k,h,D,Y,_,i,t,o,u,E,B,c,j,N,M]}class cs extends we{constructor(f){super(),Ie(this,f,Fe,Re,pe,{})}}export{cs as component};
//# sourceMappingURL=35.qTStfPnY.js.map
