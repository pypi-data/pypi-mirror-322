import{c}from"./index.CRN53SLO.js";const j=async(e="",i=!1)=>{let t=null;const o=await fetch(`${c}/api/models${i?"/base":""}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(t=a,console.log(a),null));if(t)throw t;return(o==null?void 0:o.data)??[]},g=async(e,i)=>{let t=null;const o=await fetch(`${c}/api/chat/completed`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify(i)}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(console.log(n),"detail"in n?t=n.detail:t=n,null));if(t)throw t;return o},m=async(e,i,t)=>{let o=null;const n=await fetch(`${c}/api/chat/actions/${i}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify(t)}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(console.log(a),"detail"in a?o=a.detail:o=a,null));if(o)throw o;return n},$=async(e,i)=>{let t=null;const o=await fetch(`${c}/api/tasks/stop/${i}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(console.log(n),"detail"in n?t=n.detail:t=n,null));if(t)throw t;return o},T=async(e="")=>{let i=null;const t=await fetch(`${c}/api/v1/tasks/config`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).catch(o=>(console.log(o),i=o,null));if(i)throw i;return t},S=async(e,i)=>{let t=null;const o=await fetch(`${c}/api/v1/tasks/config/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify(i)}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(console.log(n),"detail"in n?t=n.detail:t=n,null));if(t)throw t;return o},A=async(e="",i,t,o)=>{var s,r;let n=null;const a=await fetch(`${c}/api/v1/tasks/tags/completions`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:i,messages:t,...o&&{chat_id:o}})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(console.log(l),"detail"in l&&(n=l.detail),null));if(n)throw n;try{const h=(((r=(s=a==null?void 0:a.choices[0])==null?void 0:s.message)==null?void 0:r.content)??"").replace(/['‘’`]/g,'"'),d=h.indexOf("{"),p=h.lastIndexOf("}");if(d!==-1&&p!==-1){const f=h.substring(d,p+1),u=JSON.parse(f);return u&&u.tags?Array.isArray(u.tags)?u.tags:[]:[]}return[]}catch(l){return console.error("Failed to parse response: ",l),[]}},C=async(e="",i,t,o)=>{var r,l;let n=null;const a=await fetch(`${c}/api/v1/tasks/emoji/completions`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:i,prompt:t,...o&&{chat_id:o}})}).then(async h=>{if(!h.ok)throw await h.json();return h.json()}).catch(h=>(console.log(h),"detail"in h&&(n=h.detail),null));if(n)throw n;const s=((l=(r=a==null?void 0:a.choices[0])==null?void 0:r.message)==null?void 0:l.content.replace(/["']/g,""))??null;return s&&new RegExp("\\p{Extended_Pictographic}","u").test(s)?s.match(new RegExp("\\p{Extended_Pictographic}","gu"))[0]:null},P=async(e="",i,t,o,n="search query")=>{var h,d;const a=new AbortController;let s=null;const r=await fetch(`${c}/api/v1/tasks/auto/completions`,{signal:a.signal,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:i,prompt:t,...o&&{messages:o},type:n,stream:!1})}).then(async p=>{if(!p.ok)throw await p.json();return p.json()}).catch(p=>(console.log(p),"detail"in p&&(s=p.detail),null));if(s)throw s;const l=((d=(h=r==null?void 0:r.choices[0])==null?void 0:h.message)==null?void 0:d.content)??"";try{const p=l.indexOf("{"),f=l.lastIndexOf("}");if(p!==-1&&f!==-1){const u=l.substring(p,f+1),w=JSON.parse(u);return w&&w.text?w.text:""}return l}catch(p){return console.error("Failed to parse response: ",p),l}},v=async(e="",i,t,o)=>{const n=new AbortController;let a=null;const s=await fetch(`${c}/api/v1/tasks/moa/completions`,{signal:n.signal,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:i,prompt:t,responses:o,stream:!0})}).catch(r=>(console.log(r),a=r,null));if(a)throw a;return[s,n]},O=async(e="")=>{let i=null;const t=await fetch(`${c}/api/v1/pipelines/list`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(console.log(n),i=n,null));if(i)throw i;return(t==null?void 0:t.data)??[]},k=async(e,i,t)=>{let o=null;const n=new FormData;n.append("file",i),n.append("urlIdx",t);const a=await fetch(`${c}/api/v1/pipelines/upload`,{method:"POST",headers:{...e&&{authorization:`Bearer ${e}`}},body:n}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(console.log(s),"detail"in s?o=s.detail:o=s,null));if(o)throw o;return a},B=async(e,i,t)=>{let o=null;const n=await fetch(`${c}/api/v1/pipelines/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify({url:i,urlIdx:t})}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(console.log(a),"detail"in a?o=a.detail:o=a,null));if(o)throw o;return n},b=async(e,i,t)=>{let o=null;const n=await fetch(`${c}/api/v1/pipelines/delete`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify({id:i,urlIdx:t})}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(console.log(a),"detail"in a?o=a.detail:o=a,null));if(o)throw o;return n},z=async(e,i)=>{let t=null;const o=new URLSearchParams;i!==void 0&&o.append("urlIdx",i);const n=await fetch(`${c}/api/v1/pipelines/?${o.toString()}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(console.log(s),t=s,null));if(t)throw t;return(n==null?void 0:n.data)??[]},E=async(e,i,t)=>{let o=null;const n=new URLSearchParams;t!==void 0&&n.append("urlIdx",t);const a=await fetch(`${c}/api/v1/pipelines/${i}/valves?${n.toString()}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(console.log(s),o=s,null));if(o)throw o;return a},x=async(e,i,t)=>{let o=null;const n=new URLSearchParams;t!==void 0&&n.append("urlIdx",t);const a=await fetch(`${c}/api/v1/pipelines/${i}/valves/spec?${n.toString()}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(console.log(s),o=s,null));if(o)throw o;return a},J=async(e="",i,t,o)=>{let n=null;const a=new URLSearchParams;o!==void 0&&a.append("urlIdx",o);const s=await fetch(`${c}/api/v1/pipelines/${i}/valves/update?${a.toString()}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify(t)}).then(async r=>{if(!r.ok)throw await r.json();return r.json()}).catch(r=>(console.log(r),"detail"in r?n=r.detail:n=r,null));if(n)throw n;return s},N=async()=>{let e=null;const i=await fetch(`${c}/api/config`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(console.log(t),e=t,null));if(e)throw e;return i},G=async()=>{let e=null;const i=await fetch(`${c}/api/changelog`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(console.log(t),e=t,null));if(e)throw e;return i},U=async()=>{let e=null;const i=await fetch(`${c}/api/version/updates`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(console.log(t),e=t,null));if(e)throw e;return i},I=async e=>{let i=null;const t=await fetch(`${c}/api/webhook`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).catch(o=>(console.log(o),i=o,null));if(i)throw i;return t.url},R=async(e,i)=>{let t=null;const o=await fetch(`${c}/api/webhook`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({url:i})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(console.log(n),t=n,null));if(t)throw t;return o.url};export{N as a,A as b,I as c,O as d,J as e,x as f,j as g,E as h,z as i,B as j,b as k,k as l,T as m,S as n,U as o,G as p,P as q,C as r,m as s,$ as t,R as u,v,g as w};
//# sourceMappingURL=index.BLkuMPCt.js.map
