import{v as oe,aa as Nt,ab as Dt,d as b,z as s,Q as ne,al as it,am as jt,an as Qt,ao as It,P as Ce,r as U,R as Fe,ap as st,a3 as ut,aq as Vt,N as dt,O as ct,a2 as Mt,Z as Ht,ar as $t,w as ie,e as ft,i as Wt,as as ge,at as vt,au as Xe,J as H,av as gt,aw as Gt,ax as Kt,ay as Zt,a1 as mt,a0 as Xt,$ as Jt,az as Yt,aA as Je,aB as Me,aC as Ye,a4 as bt,_ as el,aD as tl,f as pe,p as Re,q as N,C as fe,s as T,h as ll,G as al,F as nl,Y as je,a8 as he,E as ye,aE as ol,ae as Qe,A as Se,X as Ie,ad as rl,aF as we,D as il,af as qe}from"./index-CTZOk7JZ.js";import{Q as et}from"./QInput-vIs55WXW.js";import{Q as sl}from"./QCircularProgress-nY7nWoQf.js";import{h as tt}from"./format-CJebrXOQ.js";import{Q as ul}from"./QSeparator-BAEbmho2.js";import{Q as dl}from"./QList-ekf16NC3.js";import{Q as cl}from"./QMarkupTable-DCcEM1GG.js";import{u as fl,a as vl,c as _t,Q as gl}from"./QSelect-Ru0moU90.js";import{Q as ml}from"./QLinearProgress-CKqADvbx.js";import{u as bl,a as _l,b as pl}from"./use-checkbox-CK75fBLg.js";import{u as hl,a as yl,b as Sl}from"./use-fullscreen-CZlBLFBX.js";import{Q as wl}from"./QPage-CtOIhIz6.js";import{u as ql}from"./use-quasar-B3ojadqd.js";import"./use-key-composition-BTsTO_Rt.js";import"./use-id-DOom3635.js";import"./QItem-DeuJnMQy.js";import"./QMenu-C7BKmuIW.js";import"./rtl-DFPa-2ov.js";const lt=oe({name:"QBreadcrumbsEl",props:{...Nt,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:o,linkAttrs:l,linkClass:i,navigateOnClick:d}=Dt(),r=b(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+i.value:"q-breadcrumbs__el--disable"),...l.value,onClick:d})),v=b(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const g=[];return e.icon!==void 0&&g.push(s(ne,{class:v.value,name:e.icon})),e.label!==void 0&&g.push(e.label),s(o.value,{...r.value},it(t.default,g))}}}),Cl=["",!0],Fl=oe({name:"QBreadcrumbs",props:{...jt,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const o=Qt(e),l=b(()=>`flex items-center ${o.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),i=b(()=>e.separatorColor?` text-${e.separatorColor}`:""),d=b(()=>` text-${e.activeColor}`);return()=>{if(t.default===void 0)return;const r=It(Ce(t.default));if(r.length===0)return;let v=1;const g=[],q=r.filter(_=>_.type!==void 0&&_.type.name==="QBreadcrumbsEl").length,u=t.separator!==void 0?t.separator:()=>e.separator;return r.forEach(_=>{if(_.type!==void 0&&_.type.name==="QBreadcrumbsEl"){const P=v<q,x=_.props!==null&&Cl.includes(_.props.disable),n=(P===!0?"":" q-breadcrumbs--last")+(x!==!0&&P===!0?d.value:"");v++,g.push(s("div",{class:`flex items-center${n}`},[_])),P===!0&&g.push(s("div",{class:"q-breadcrumbs__separator"+i.value},u()))}else g.push(_)}),s("div",{class:"q-breadcrumbs"},[s("div",{class:l.value},g)])}}});function ve(e,t,o,l){const i=[];return e.forEach(d=>{l(d)===!0?i.push(d):t.push({failedPropValidation:o,file:d})}),i}function Le(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ut(e)}const kl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Pl=["rejected"];function xl({editable:e,dnd:t,getFileInput:o,addFilesToQueue:l}){const{props:i,emit:d,proxy:r}=Fe(),v=U(null),g=b(()=>i.accept!==void 0?i.accept.split(",").map(c=>(c=c.trim(),c==="*"?"*/":(c.endsWith("/*")&&(c=c.slice(0,c.length-1)),c.toUpperCase()))):null),q=b(()=>parseInt(i.maxFiles,10)),u=b(()=>parseInt(i.maxTotalSize,10));function _(c){if(e.value)if(c!==Object(c)&&(c={target:null}),c.target!==null&&c.target.matches('input[type="file"]')===!0)c.clientX===0&&c.clientY===0&&st(c);else{const A=o();A&&A!==c.target&&A.click(c)}}function P(c){e.value&&c&&l(null,c)}function x(c,A,w,y){let h=Array.from(A||c.target.files);const L=[],M=()=>{L.length!==0&&d("rejected",L)};if(i.accept!==void 0&&g.value.indexOf("*/")===-1&&(h=ve(h,L,"accept",O=>g.value.some(z=>O.type.toUpperCase().startsWith(z)||O.name.toUpperCase().endsWith(z))),h.length===0))return M();if(i.maxFileSize!==void 0){const O=parseInt(i.maxFileSize,10);if(h=ve(h,L,"max-file-size",z=>z.size<=O),h.length===0)return M()}if(i.multiple!==!0&&h.length!==0&&(h=[h[0]]),h.forEach(O=>{O.__key=O.webkitRelativePath+O.lastModified+O.name+O.size}),y===!0){const O=w.map(z=>z.__key);h=ve(h,L,"duplicate",z=>O.includes(z.__key)===!1)}if(h.length===0)return M();if(i.maxTotalSize!==void 0){let O=y===!0?w.reduce((z,V)=>z+V.size,0):0;if(h=ve(h,L,"max-total-size",z=>(O+=z.size,O<=u.value)),h.length===0)return M()}if(typeof i.filter=="function"){const O=i.filter(h);h=ve(h,L,"filter",z=>O.includes(z))}if(i.maxFiles!==void 0){let O=y===!0?w.length:0;if(h=ve(h,L,"max-files",()=>(O++,O<=q.value)),h.length===0)return M()}if(M(),h.length!==0)return h}function n(c){Le(c),t.value!==!0&&(t.value=!0)}function p(c){ut(c),(c.relatedTarget!==null||Vt.is.safari!==!0?c.relatedTarget!==v.value:document.elementsFromPoint(c.clientX,c.clientY).includes(v.value)===!1)===!0&&(t.value=!1)}function S(c){Le(c);const A=c.dataTransfer.files;A.length!==0&&l(null,A),t.value=!1}function F(c){if(t.value===!0)return s("div",{ref:v,class:`q-${c}__dnd absolute-full`,onDragenter:Le,onDragover:Le,onDragleave:p,onDrop:S})}return Object.assign(r,{pickFiles:_,addFiles:P}),{pickFiles:_,addFiles:P,onDragover:n,onDragleave:p,processFiles:x,getDndNode:F,maxFilesNumber:q,maxTotalSizeNumber:u}}function at(e){return(e*100).toFixed(2)+"%"}const Bl={...dt,...kl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},pt=[...Pl,"start","finish","added","removed"];function Tl(e,t){const o=Fe(),{props:l,slots:i,emit:d,proxy:r}=o,{$q:v}=r,g=ct(l,v);function q(f,R,Q){if(f.__status=R,R==="idle"){f.__uploaded=0,f.__progress=0,f.__sizeLabel=tt(f.size),f.__progressLabel="0.00%";return}if(R==="failed"){r.$forceUpdate();return}f.__uploaded=R==="uploaded"?f.size:Q,f.__progress=R==="uploaded"?1:Math.min(.9999,f.__uploaded/f.size),f.__progressLabel=at(f.__progress),r.$forceUpdate()}const u=b(()=>l.disable!==!0&&l.readonly!==!0),_=U(!1),P=U(null),x=U(null),n={files:U([]),queuedFiles:U([]),uploadedFiles:U([]),uploadedSize:U(0),updateFileStatus:q,isAlive:()=>Mt(o)===!1},{pickFiles:p,addFiles:S,onDragover:F,onDragleave:c,processFiles:A,getDndNode:w,maxFilesNumber:y,maxTotalSizeNumber:h}=xl({editable:u,dnd:_,getFileInput:G,addFilesToQueue:me});Object.assign(n,e({props:l,slots:i,emit:d,helpers:n,exposeApi:f=>{Object.assign(n,f)}})),n.isBusy===void 0&&(n.isBusy=U(!1));const L=U(0),M=b(()=>L.value===0?0:n.uploadedSize.value/L.value),O=b(()=>at(M.value)),z=b(()=>tt(L.value)),V=b(()=>u.value===!0&&n.isUploading.value!==!0&&(l.multiple===!0||n.queuedFiles.value.length===0)&&(l.maxFiles===void 0||n.files.value.length<y.value)&&(l.maxTotalSize===void 0||L.value<h.value)),E=b(()=>u.value===!0&&n.isBusy.value!==!0&&n.isUploading.value!==!0&&n.queuedFiles.value.length!==0);Ht($t,xe);const X=b(()=>"q-uploader column no-wrap"+(g.value===!0?" q-uploader--dark q-dark":"")+(l.bordered===!0?" q-uploader--bordered":"")+(l.square===!0?" q-uploader--square no-border-radius":"")+(l.flat===!0?" q-uploader--flat no-shadow":"")+(l.disable===!0?" disabled q-uploader--disable":"")+(_.value===!0?" q-uploader--dnd":"")),te=b(()=>"q-uploader__header"+(l.color!==void 0?` bg-${l.color}`:"")+(l.textColor!==void 0?` text-${l.textColor}`:""));ie(n.isUploading,(f,R)=>{R===!1&&f===!0?d("start"):R===!0&&f===!1&&d("finish")});function J(){l.disable===!1&&(n.abort(),n.uploadedSize.value=0,L.value=0,Pe(),n.files.value=[],n.queuedFiles.value=[],n.uploadedFiles.value=[])}function $(){l.disable===!1&&ke(["uploaded"],()=>{n.uploadedFiles.value=[]})}function le(){ke(["idle","failed"],({size:f})=>{L.value-=f,n.queuedFiles.value=[]})}function ke(f,R){if(l.disable===!0)return;const Q={files:[],size:0},Z=n.files.value.filter(I=>f.indexOf(I.__status)===-1?!0:(Q.size+=I.size,Q.files.push(I),I.__img!==void 0&&window.URL.revokeObjectURL(I.__img.src),!1));Q.files.length!==0&&(n.files.value=Z,R(Q),d("removed",Q.files))}function ae(f){l.disable||(f.__status==="uploaded"?n.uploadedFiles.value=n.uploadedFiles.value.filter(R=>R.__key!==f.__key):f.__status==="uploading"?f.__abort():L.value-=f.size,n.files.value=n.files.value.filter(R=>R.__key!==f.__key?!0:(R.__img!==void 0&&window.URL.revokeObjectURL(R.__img.src),!1)),n.queuedFiles.value=n.queuedFiles.value.filter(R=>R.__key!==f.__key),d("removed",[f]))}function Pe(){n.files.value.forEach(f=>{f.__img!==void 0&&window.URL.revokeObjectURL(f.__img.src)})}function G(){return x.value||P.value.getElementsByClassName("q-uploader__input")[0]}function me(f,R){const Q=A(f,R,n.files.value,!0),Z=G();Z!=null&&(Z.value=""),Q!==void 0&&(Q.forEach(I=>{if(n.updateFileStatus(I,"idle"),L.value+=I.size,l.noThumbnails!==!0&&I.type.toUpperCase().startsWith("IMAGE")){const ue=new Image;ue.src=window.URL.createObjectURL(I),I.__img=ue}}),n.files.value=n.files.value.concat(Q),n.queuedFiles.value=n.queuedFiles.value.concat(Q),d("added",Q),l.autoUpload===!0&&n.upload())}function be(){E.value===!0&&n.upload()}function re(f,R,Q){if(f===!0){const Z={type:"a",key:R,icon:v.iconSet.uploader[R],flat:!0,dense:!0};let I;return R==="add"?(Z.onClick=p,I=xe):Z.onClick=Q,s(H,Z,I)}}function xe(){return s("input",{ref:x,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:l.accept,multiple:l.multiple===!0?"multiple":void 0,capture:l.capture,onMousedown:st,onClick:p,onChange:me})}function _e(){return i.header!==void 0?i.header(K):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[re(n.queuedFiles.value.length!==0,"removeQueue",le),re(n.uploadedFiles.value.length!==0,"removeUploaded",$),n.isUploading.value===!0?s(Xe,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[l.label!==void 0?s("div",{class:"q-uploader__title"},[l.label]):null,s("div",{class:"q-uploader__subtitle"},[z.value+" / "+O.value])]),re(V.value,"add"),re(l.hideUploadBtn===!1&&E.value===!0,"upload",n.upload),re(n.isUploading.value,"clear",n.abort)])])]}function se(){return i.list!==void 0?i.list(K):n.files.value.map(f=>s("div",{key:f.__key,class:"q-uploader__file relative-position"+(l.noThumbnails!==!0&&f.__img!==void 0?" q-uploader__file--img":"")+(f.__status==="failed"?" q-uploader__file--failed":f.__status==="uploaded"?" q-uploader__file--uploaded":""),style:l.noThumbnails!==!0&&f.__img!==void 0?{backgroundImage:'url("'+f.__img.src+'")',backgroundSize:l.thumbnailFit}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[f.__status==="failed"?s(ne,{class:"q-uploader__file-status",name:v.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[f.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[f.__sizeLabel+" / "+f.__progressLabel])]),f.__status==="uploading"?s(sl,{value:f.__progress,min:0,max:1,indeterminate:f.__progress===0}):s(H,{round:!0,dense:!0,flat:!0,icon:v.iconSet.uploader[f.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(f)}})])]))}ft(()=>{n.isUploading.value===!0&&n.abort(),n.files.value.length!==0&&Pe()});const K={};for(const f in n)Wt(n[f])===!0?ge(K,f,()=>n[f].value):K[f]=n[f];return Object.assign(K,{upload:be,reset:J,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:p,addFiles:S}),vt(K,{canAddFiles:()=>V.value,canUpload:()=>E.value,uploadSizeLabel:()=>z.value,uploadProgressLabel:()=>O.value}),t({...n,upload:be,reset:J,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:p,addFiles:S,canAddFiles:V,canUpload:E,uploadSizeLabel:z,uploadProgressLabel:O}),()=>{const f=[s("div",{class:te.value},_e()),s("div",{class:"q-uploader__list scroll"},se()),w("uploader")];n.isBusy.value===!0&&f.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(Xe)]));const R={ref:P,class:X.value};return V.value===!0&&Object.assign(R,{onDragover:F,onDragleave:c}),s("div",R,f)}}const El=()=>!0;function Rl(e){const t={};return e.forEach(o=>{t[o]=El}),t}const Ll=Rl(pt),Ol=({name:e,props:t,emits:o,injectPlugin:l})=>oe({name:e,props:{...Bl,...t},emits:gt(o)===!0?{...Ll,...o}:[...pt,...o],setup(i,{expose:d}){return Tl(l,d)}});function ee(e){return typeof e=="function"?e:()=>e}const zl="QUploader",Al={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Ul=["factoryFailed","uploaded","failed","uploading"];function Nl({props:e,emit:t,helpers:o}){const l=U([]),i=U([]),d=U(0),r=b(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),v=b(()=>d.value>0),g=b(()=>i.value.length!==0);let q;function u(){l.value.forEach(n=>{n.abort()}),i.value.length!==0&&(q=!0)}function _(){const n=o.queuedFiles.value.slice(0);o.queuedFiles.value=[],r.value.batch(n)?P(n):n.forEach(p=>{P([p])})}function P(n){if(d.value++,typeof e.factory!="function"){x(n,{});return}const p=e.factory(n);if(!p)t("factoryFailed",new Error("QUploader: factory() does not return properly"),n),d.value--;else if(typeof p.catch=="function"&&typeof p.then=="function"){i.value.push(p);const S=F=>{o.isAlive()===!0&&(i.value=i.value.filter(c=>c!==p),i.value.length===0&&(q=!1),o.queuedFiles.value=o.queuedFiles.value.concat(n),n.forEach(c=>{o.updateFileStatus(c,"failed")}),t("factoryFailed",F,n),d.value--)};p.then(F=>{q===!0?S(new Error("Aborted")):o.isAlive()===!0&&(i.value=i.value.filter(c=>c!==p),x(n,F))}).catch(S)}else x(n,p||{})}function x(n,p){const S=new FormData,F=new XMLHttpRequest,c=(E,X)=>p[E]!==void 0?ee(p[E])(X):r.value[E](X),A=c("url",n);if(!A){console.error("q-uploader: invalid or no URL specified"),d.value--;return}const w=c("formFields",n);w!==void 0&&w.forEach(E=>{S.append(E.name,E.value)});let y=0,h=0,L=0,M=0,O;F.upload.addEventListener("progress",E=>{if(O===!0)return;const X=Math.min(M,E.loaded);o.uploadedSize.value+=X-L,L=X;let te=L-h;for(let J=y;te>0&&J<n.length;J++){const $=n[J];if(te>$.size)te-=$.size,y++,h+=$.size,o.updateFileStatus($,"uploading",$.size);else{o.updateFileStatus($,"uploading",te);return}}},!1),F.onreadystatechange=()=>{F.readyState<4||(F.status&&F.status<400?(o.uploadedFiles.value=o.uploadedFiles.value.concat(n),n.forEach(E=>{o.updateFileStatus(E,"uploaded")}),t("uploaded",{files:n,xhr:F})):(O=!0,o.uploadedSize.value-=L,o.queuedFiles.value=o.queuedFiles.value.concat(n),n.forEach(E=>{o.updateFileStatus(E,"failed")}),t("failed",{files:n,xhr:F})),d.value--,l.value=l.value.filter(E=>E!==F))},F.open(c("method",n),A),c("withCredentials",n)===!0&&(F.withCredentials=!0);const z=c("headers",n);z!==void 0&&z.forEach(E=>{F.setRequestHeader(E.name,E.value)});const V=c("sendRaw",n);n.forEach(E=>{o.updateFileStatus(E,"uploading",0),V!==!0&&S.append(c("fieldName",E),E,E.name),E.xhr=F,E.__abort=()=>{F.abort()},M+=E.size}),t("uploading",{files:n,xhr:F}),l.value.push(F),V===!0?F.send(new Blob(n)):F.send(S)}return{isUploading:v,isBusy:g,abort:u,upload:_}}const Dl={name:zl,props:Al,emits:Ul,injectPlugin:Nl},jl=Ol(Dl),nt=oe({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const o=Fe(),l=b(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:l.value},Ce(t.default));const i=o.vnode.key,d=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(d===void 0)return;const{row:r}=e.props;return s("td",{class:l.value+d.__tdClass(r),style:d.__tdStyle(r)},Ce(t.default))}}}),Ql=oe({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:o}){const l=Fe(),{proxy:{$q:i}}=l,d=r=>{o("click",r)};return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:d},Ce(t.default));let r,v;const g=l.vnode.key;if(g){if(r=e.props.colsMap[g],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const u=r.align==="right"?"unshift":"push";v=Gt(t.default,[]),v[u](s(ne,{class:r.__iconClass,name:i.iconSet.table.arrowUp}))}else v=Ce(t.default);const q={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:u=>{r.sortable===!0&&e.props.sort(r),d(u)}};return s("th",q,v)}}});function ht(e,t){return s("div",e,[s("table",{class:"q-table"},t)])}const Il={list:dl,table:cl},Vl=["list","table","__qtable"],Ml=oe({name:"QVirtualScroll",props:{...fl,type:{type:String,default:"list",validator:e=>Vl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Kt},setup(e,{slots:t,attrs:o}){let l;const i=U(null),d=b(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:v,padVirtualScroll:g,onVirtualScrollEvt:q}=vl({virtualScrollLength:d,getVirtualScrollTarget:n,getVirtualScrollEl:x}),u=b(()=>{if(d.value===0)return[];const c=(A,w)=>({index:r.value.from+w,item:A});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(c):e.itemsFn(r.value.from,r.value.to-r.value.from).map(c)}),_=b(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=b(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ie(d,()=>{v()}),ie(()=>e.scrollTarget,()=>{S(),p()});function x(){return i.value.$el||i.value}function n(){return l}function p(){l=Yt(x(),e.scrollTarget),l.addEventListener("scroll",q,Je.passive)}function S(){l!==void 0&&(l.removeEventListener("scroll",q,Je.passive),l=void 0)}function F(){let c=g(e.type==="list"?"div":"tbody",u.value.map(t.default));return t.before!==void 0&&(c=t.before().concat(c)),it(t.after,c)}return Zt(()=>{v()}),mt(()=>{p()}),Xt(()=>{p()}),Jt(()=>{S()}),ft(()=>{S()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ht({ref:i,class:"q-table__middle "+_.value},F()):s(Il[e.type],{...o,ref:i,class:[o.class,_.value],...P.value},F)}}}),Hl=()=>s("div",{key:"svg",class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ve=oe({name:"QCheckbox",props:bl,emits:_l,setup(e){const t=Hl();function o(l,i){const d=b(()=>(l.value===!0?e.checkedIcon:i.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>d.value!==null?[s("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[s(ne,{class:"q-checkbox__icon",name:d.value})])]:[t]}return pl("checkbox",o)}});function $l(e,t){return new Date(e)-new Date(t)}const Wl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Gl(e,t,o,l){const i=b(()=>{const{sortBy:v}=t.value;return v&&o.value.find(g=>g.name===v)||null}),d=b(()=>e.sortMethod!==void 0?e.sortMethod:(v,g,q)=>{const u=o.value.find(x=>x.name===g);if(u===void 0||u.field===void 0)return v;const _=q===!0?-1:1,P=typeof u.field=="function"?x=>u.field(x):x=>x[u.field];return v.sort((x,n)=>{let p=P(x),S=P(n);return u.rawSort!==void 0?u.rawSort(p,S,x,n)*_:p==null?-1*_:S==null?1*_:u.sort!==void 0?u.sort(p,S,x,n)*_:Me(p)===!0&&Me(S)===!0?(p-S)*_:Ye(p)===!0&&Ye(S)===!0?$l(p,S)*_:typeof p=="boolean"&&typeof S=="boolean"?(p-S)*_:([p,S]=[p,S].map(F=>(F+"").toLocaleString().toLowerCase()),p<S?-1*_:p===S?0:_)})});function r(v){let g=e.columnSortOrder;if(gt(v)===!0)v.sortOrder&&(g=v.sortOrder),v=v.name;else{const _=o.value.find(P=>P.name===v);_!==void 0&&_.sortOrder&&(g=_.sortOrder)}let{sortBy:q,descending:u}=t.value;q!==v?(q=v,u=g==="da"):e.binaryStateSort===!0?u=!u:u===!0?g==="ad"?q=null:u=!1:g==="ad"?u=!0:q=null,l({sortBy:q,descending:u,page:1})}return{columnToSort:i,computedSortMethod:d,sort:r}}const Kl={filter:[String,Object],filterMethod:Function};function Zl(e,t){const o=b(()=>e.filterMethod!==void 0?e.filterMethod:(l,i,d,r)=>{const v=i?i.toLowerCase():"";return l.filter(g=>d.some(q=>{const u=r(q,g)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(v)!==-1}))});return ie(()=>e.filter,()=>{bt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function Xl(e,t){for(const o in t)if(t[o]!==e[o])return!1;return!0}function ot(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Jl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Yl(e,t){const{props:o,emit:l}=e,i=U(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),d=b(()=>{const u=o["onUpdate:pagination"]!==void 0?{...i.value,...o.pagination}:i.value;return ot(u)}),r=b(()=>d.value.rowsNumber!==void 0);function v(u){g({pagination:u,filter:o.filter})}function g(u={}){bt(()=>{l("request",{pagination:u.pagination||d.value,filter:u.filter||o.filter,getCellValue:t})})}function q(u,_){const P=ot({...d.value,...u});if(Xl(d.value,P)===!0){r.value===!0&&_===!0&&v(P);return}if(r.value===!0){v(P);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?l("update:pagination",P):i.value=P}return{innerPagination:i,computedPagination:d,isServerSide:r,requestServerInteraction:g,setPagination:q}}function ea(e,t,o,l,i,d){const{props:r,emit:v,proxy:{$q:g}}=e,q=b(()=>l.value===!0?o.value.rowsNumber||0:d.value),u=b(()=>{const{page:w,rowsPerPage:y}=o.value;return(w-1)*y}),_=b(()=>{const{page:w,rowsPerPage:y}=o.value;return w*y}),P=b(()=>o.value.page===1),x=b(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/o.value.rowsPerPage))),n=b(()=>_.value===0?!0:o.value.page>=x.value),p=b(()=>(r.rowsPerPageOptions.includes(t.value.rowsPerPage)?r.rowsPerPageOptions:[t.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(y=>({label:y===0?g.lang.table.allRows:""+y,value:y})));ie(x,(w,y)=>{if(w===y)return;const h=o.value.page;w&&!h?i({page:1}):w<h&&i({page:w})});function S(){i({page:1})}function F(){const{page:w}=o.value;w>1&&i({page:w-1})}function c(){const{page:w,rowsPerPage:y}=o.value;_.value>0&&w*y<q.value&&i({page:w+1})}function A(){i({page:x.value})}return r["onUpdate:pagination"]!==void 0&&v("update:pagination",{...o.value}),{firstRowIndex:u,lastRowIndex:_,isFirstPage:P,isLastPage:n,pagesNumber:x,computedRowsPerPageOptions:p,computedRowsNumber:q,firstPage:S,prevPage:F,nextPage:c,lastPage:A}}const ta={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},la=["update:selected","selection"];function aa(e,t,o,l){const i=b(()=>{const n={};return e.selected.map(l.value).forEach(p=>{n[p]=!0}),n}),d=b(()=>e.selection!=="none"),r=b(()=>e.selection==="single"),v=b(()=>e.selection==="multiple"),g=b(()=>o.value.length!==0&&o.value.every(n=>i.value[l.value(n)]===!0)),q=b(()=>g.value!==!0&&o.value.some(n=>i.value[l.value(n)]===!0)),u=b(()=>e.selected.length);function _(n){return i.value[n]===!0}function P(){t("update:selected",[])}function x(n,p,S,F){t("selection",{rows:p,added:S,keys:n,evt:F});const c=r.value===!0?S===!0?p:[]:S===!0?e.selected.concat(p):e.selected.filter(A=>n.includes(l.value(A))===!1);t("update:selected",c)}return{hasSelectionMode:d,singleSelection:r,multipleSelection:v,allRowsSelected:g,someRowsSelected:q,rowsSelectedNumber:u,isRowSelected:_,clearSelection:P,updateSelection:x}}function rt(e){return Array.isArray(e)?e.slice():[]}const na={expanded:Array},oa=["update:expanded"];function ra(e,t){const o=U(rt(e.expanded));ie(()=>e.expanded,r=>{o.value=rt(r)});function l(r){return o.value.includes(r)}function i(r){e.expanded!==void 0?t("update:expanded",r):o.value=r}function d(r,v){const g=o.value.slice(),q=g.indexOf(r);v===!0?q===-1&&(g.push(r),i(g)):q!==-1&&(g.splice(q,1),i(g))}return{isRowExpanded:l,setExpanded:i,updateExpanded:d}}const ia={visibleColumns:Array};function sa(e,t,o){const l=b(()=>{if(e.columns!==void 0)return e.columns;const v=e.rows[0];return v!==void 0?Object.keys(v).map(g=>({name:g,label:g.toUpperCase(),field:g,align:Me(v[g])?"right":"left",sortable:!0})):[]}),i=b(()=>{const{sortBy:v,descending:g}=t.value;return(e.visibleColumns!==void 0?l.value.filter(u=>u.required===!0||e.visibleColumns.includes(u.name)===!0):l.value).map(u=>{const _=u.align||"right",P=`text-${_}`;return{...u,align:_,__iconClass:`q-table__sort-icon q-table__sort-icon--${_}`,__thClass:P+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===v?` sorted ${g===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>P+" "+u.classes:x=>P+" "+u.classes(x):()=>P}})}),d=b(()=>{const v={};return i.value.forEach(g=>{v[g.name]=g}),v}),r=b(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(o.value===!0?1:0));return{colList:l,computedCols:i,computedColsMap:d,computedColspan:r}}const Oe="q-table__bottom row items-center",yt={};_t.forEach(e=>{yt[e]={}});const ua=oe({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...yt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...dt,...hl,...ia,...Kl,...Jl,...na,...ta,...Wl},emits:["request","virtualScroll",...yl,...oa,...la],setup(e,{slots:t,emit:o}){const l=Fe(),{proxy:{$q:i}}=l,d=ct(e,i),{inFullscreen:r,toggleFullscreen:v}=Sl(),g=b(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),q=U(null),u=U(null),_=b(()=>e.grid!==!0&&e.virtualScroll===!0),P=b(()=>" q-table__card"+(d.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=b(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(d.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),n=b(()=>x.value+(e.loading===!0?" q-table--loading":""));ie(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{_.value===!0&&u.value!==null&&u.value.reset()});const{innerPagination:p,computedPagination:S,isServerSide:F,requestServerInteraction:c,setPagination:A}=Yl(l,de),{computedFilterMethod:w}=Zl(e,A),{isRowExpanded:y,setExpanded:h,updateExpanded:L}=ra(e,o),M=b(()=>{let a=e.rows;if(F.value===!0||a.length===0)return a;const{sortBy:m,descending:C}=S.value;return e.filter&&(a=w.value(a,e.filter,G.value,de)),re.value!==null&&(a=xe.value(e.rows===a?a.slice():a,m,C)),a}),O=b(()=>M.value.length),z=b(()=>{let a=M.value;if(F.value===!0)return a;const{rowsPerPage:m}=S.value;return m!==0&&(se.value===0&&e.rows!==a?a.length>K.value&&(a=a.slice(0,K.value)):a=a.slice(se.value,K.value)),a}),{hasSelectionMode:V,singleSelection:E,multipleSelection:X,allRowsSelected:te,someRowsSelected:J,rowsSelectedNumber:$,isRowSelected:le,clearSelection:ke,updateSelection:ae}=aa(e,o,z,g),{colList:Pe,computedCols:G,computedColsMap:me,computedColspan:be}=sa(e,S,V),{columnToSort:re,computedSortMethod:xe,sort:_e}=Gl(e,S,Pe,A),{firstRowIndex:se,lastRowIndex:K,isFirstPage:f,isLastPage:R,pagesNumber:Q,computedRowsPerPageOptions:Z,computedRowsNumber:I,firstPage:ue,prevPage:ze,nextPage:Ae,lastPage:Ue}=ea(l,p,S,F,A,O),St=b(()=>z.value.length===0),wt=b(()=>{const a={};return _t.forEach(m=>{a[m]=e[m]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function qt(){_.value===!0&&u.value.reset()}function Ct(){if(e.grid===!0)return At();const a=e.hideHeader!==!0?Ke:null;if(_.value===!0){const C=t["top-row"],k=t["bottom-row"],B={default:j=>$e(j.item,t.body,j.index)};if(C!==void 0){const j=s("tbody",C({cols:G.value}));B.before=a===null?()=>j:()=>[a()].concat(j)}else a!==null&&(B.before=a);return k!==void 0&&(B.after=()=>s("tbody",k({cols:G.value}))),s(Ml,{ref:u,class:e.tableClass,style:e.tableStyle,...wt.value,scrollTarget:e.virtualScrollTarget,items:z.value,type:"__qtable",tableColspan:be.value,onVirtualScroll:kt},B)}const m=[Pt()];return a!==null&&m.unshift(a()),ht({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},m)}function Ft(a,m){if(u.value!==null){u.value.scrollTo(a,m);return}a=parseInt(a,10);const C=q.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(C!==null){const k=q.value.querySelector(".q-table__middle.scroll"),B=C.offsetTop-e.virtualScrollStickySizeStart,j=B<k.scrollTop?"decrease":"increase";k.scrollTop=B,o("virtualScroll",{index:a,from:0,to:p.value.rowsPerPage-1,direction:j})}}function kt(a){o("virtualScroll",a)}function He(){return[s(ml,{class:"q-table__linear-progress",color:e.color,dark:d.value,indeterminate:!0,trackColor:"transparent"})]}function $e(a,m,C){const k=g.value(a),B=le(k);if(m!==void 0)return m(We({key:k,row:a,pageIndex:C,__trClass:B?"selected":""}));const j=t["body-cell"],D=G.value.map(W=>{const Te=t[`body-cell-${W.name}`],Ee=Te!==void 0?Te:j;return Ee!==void 0?Ee(xt({key:k,row:a,pageIndex:C,col:W})):s("td",{class:W.__tdClass(a),style:W.__tdStyle(a)},de(W,a))});if(V.value===!0){const W=t["body-selection"],Te=W!==void 0?W(Bt({key:k,row:a,pageIndex:C})):[s(Ve,{modelValue:B,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(Ee,Ut)=>{ae([k],[a],Ee,Ut)}})];D.unshift(s("td",{class:"q-table--col-auto-width"},Te))}const Y={key:k,class:{selected:B}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=W=>{o("rowClick",W,a,C)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=W=>{o("rowDblclick",W,a,C)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=W=>{o("rowContextmenu",W,a,C)}),s("tr",Y,D)}function Pt(){const a=t.body,m=t["top-row"],C=t["bottom-row"];let k=z.value.map((B,j)=>$e(B,a,j));return m!==void 0&&(k=m({cols:G.value}).concat(k)),C!==void 0&&(k=k.concat(C({cols:G.value}))),s("tbody",k)}function We(a){return Ne(a),a.cols=a.cols.map(m=>ge({...m},"value",()=>de(m,a.row))),a}function xt(a){return Ne(a),ge(a,"value",()=>de(a.col,a.row)),a}function Bt(a){return Ne(a),a}function Ne(a){Object.assign(a,{cols:G.value,colsMap:me.value,sort:_e,rowIndex:se.value+a.pageIndex,color:e.color,dark:d.value,dense:e.dense}),V.value===!0&&ge(a,"selected",()=>le(a.key),(m,C)=>{ae([a.key],[a.row],m,C)}),ge(a,"expand",()=>y(a.key),m=>{L(a.key,m)})}function de(a,m){const C=typeof a.field=="function"?a.field(m):m[a.field];return a.format!==void 0?a.format(C,m):C}const ce=b(()=>({pagination:S.value,pagesNumber:Q.value,isFirstPage:f.value,isLastPage:R.value,firstPage:ue,prevPage:ze,nextPage:Ae,lastPage:Ue,inFullscreen:r.value,toggleFullscreen:v}));function Tt(){const a=t.top,m=t["top-left"],C=t["top-right"],k=t["top-selection"],B=V.value===!0&&k!==void 0&&$.value>0,j="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:j},[a(ce.value)]);let D;if(B===!0?D=k(ce.value).slice():(D=[],m!==void 0?D.push(s("div",{class:"q-table__control"},[m(ce.value)])):e.title&&D.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&(D.push(s("div",{class:"q-table__separator col"})),D.push(s("div",{class:"q-table__control"},[C(ce.value)]))),D.length!==0)return s("div",{class:j},D)}const Ge=b(()=>J.value===!0?null:te.value);function Ke(){const a=Et();return e.loading===!0&&t.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:be.value},He())])),s("thead",a)}function Et(){const a=t.header,m=t["header-cell"];if(a!==void 0)return a(De({header:!0})).slice();const C=G.value.map(k=>{const B=t[`header-cell-${k.name}`],j=B!==void 0?B:m,D=De({col:k});return j!==void 0?j(D):s(Ql,{key:k.name,props:D},()=>k.label)});if(E.value===!0&&e.grid!==!0)C.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(X.value===!0){const k=t["header-selection"],B=k!==void 0?k(De({})):[s(Ve,{color:e.color,modelValue:Ge.value,dark:d.value,dense:e.dense,"onUpdate:modelValue":Ze})];C.unshift(s("th",{class:"q-table--col-auto-width"},B))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function De(a){return Object.assign(a,{cols:G.value,sort:_e,colsMap:me.value,color:e.color,dark:d.value,dense:e.dense}),X.value===!0&&ge(a,"selected",()=>Ge.value,Ze),a}function Ze(a){J.value===!0&&(a=!1),ae(z.value.map(g.value),z.value,a)}const Be=b(()=>{const a=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?a.reverse():a});function Rt(){if(e.hideBottom===!0)return;if(St.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,k=t["no-data"],B=k!==void 0?[k({message:C,icon:i.iconSet.table.warning,filter:e.filter})]:[s(ne,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),C];return s("div",{class:Oe+" q-table__bottom--nodata"},B)}const a=t.bottom;if(a!==void 0)return s("div",{class:Oe},[a(ce.value)]);const m=e.hideSelectedBanner!==!0&&V.value===!0&&$.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)($.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Oe+" justify-end"},Ot(m));if(m.length!==0)return s("div",{class:Oe},m)}function Lt(a){A({page:1,rowsPerPage:a.value})}function Ot(a){let m;const{rowsPerPage:C}=S.value,k=e.paginationLabel||i.lang.table.pagination,B=t.pagination,j=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),j===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),s(gl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:Z.value,displayValue:C===0?i.lang.table.allRows:C,dark:d.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Lt})])),B!==void 0)m=B(ce.value);else if(m=[s("span",C!==0?{class:"q-table__bottom-item"}:{},[C?k(se.value+1,Math.min(K.value,I.value),I.value):k(1,O.value,I.value)])],C!==0&&Q.value>1){const D={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(D.size="sm"),Q.value>2&&m.push(s(H,{key:"pgFirst",...D,icon:Be.value[0],disable:f.value,onClick:ue})),m.push(s(H,{key:"pgPrev",...D,icon:Be.value[1],disable:f.value,onClick:ze}),s(H,{key:"pgNext",...D,icon:Be.value[2],disable:R.value,onClick:Ae})),Q.value>2&&m.push(s(H,{key:"pgLast",...D,icon:Be.value[3],disable:R.value,onClick:Ue}))}return a.push(s("div",{class:"q-table__control"},m)),a}function zt(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[Ke()])]:e.loading===!0&&t.loading===void 0?He():void 0;return s("div",{class:"q-table__middle"},a)}function At(){const a=t.item!==void 0?t.item:m=>{const C=m.cols.map(B=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[B.label]),s("div",{class:"q-table__grid-item-value"},[B.value])]));if(V.value===!0){const B=t["body-selection"],j=B!==void 0?B(m):[s(Ve,{modelValue:m.selected,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(D,Y)=>{ae([m.key],[m.row],D,Y)}})];C.unshift(s("div",{class:"q-table__grid-item-row"},j),s(ul,{dark:d.value}))}const k={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(k.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(k.onClick=B=>{o("RowClick",B,m.row,m.pageIndex)}),e.onRowDblclick!==void 0&&(k.onDblclick=B=>{o("RowDblclick",B,m.row,m.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(m.selected===!0?" q-table__grid-item--selected":"")},[s("div",k,C)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},z.value.map((m,C)=>a(We({key:g.value(m),row:m,pageIndex:C}))))}return Object.assign(l.proxy,{requestServerInteraction:c,setPagination:A,firstPage:ue,prevPage:ze,nextPage:Ae,lastPage:Ue,isRowSelected:le,clearSelection:ke,isRowExpanded:y,setExpanded:h,sort:_e,resetVirtualScroll:qt,scrollTo:Ft,getCellValue:de}),vt(l.proxy,{filteredSortedRows:()=>M.value,computedRows:()=>z.value,computedRowsNumber:()=>I.value}),()=>{const a=[Tt()],m={ref:q,class:n.value};return e.grid===!0?a.push(zt()):Object.assign(m,{class:[m.class,e.cardClass],style:e.cardStyle}),a.push(Ct(),Rt()),e.loading===!0&&t.loading!==void 0&&a.push(t.loading()),s("div",m,a)}}});function da(e,t=2){if(!+e)return"0 Bytes";const o=1024,l=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(e)/Math.log(o));return`${parseFloat((e/Math.pow(o,d)).toFixed(l))} ${i[d]}`}const ca={setup(){const e=ql(),t=U(""),o=U(!1),l=U([]),i=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Path",name:"filepath",required:!0,align:"left",field:"filepath"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:w=>da(w,0)}],d=U([]),r=U(""),v=U(!1),g=U(""),q=U(!1),u=U(!1),_=U({rowsPerPage:0}),P=w=>w.split("/").filter(y=>y!=="").join("/"),x=b(()=>t.value?P(t.value).split("/"):[]),n=w=>{w.is_dir?t.value=w.filepath:we(`/api/admin/files/file/${w.filepath}`,{}).then(y=>y.blob()).then(y=>window.open(URL.createObjectURL(y)))},p=(w=-1)=>{t.value=x.value.slice(0,w+1).join("/")};async function S(w=""){o.value=!0,d.value=[];try{let y=await we(`/api/admin/files/list/${w}`,{method:"GET",headers:{"Content-Type":"application/json"}}),h=await y.json();if(y.ok)l.value=h;else throw console.error(h),`Error ${y.status} getting listing. Please check logs.`}catch(y){console.error(y),e.notify({message:String(y),caption:"Request Error!",color:"negative"})}o.value=!1}async function F(w=[]){try{let h=await we("/api/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(h.ok){e.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});let L=await h.blob();var y=window.URL.createObjectURL(L);window.location.assign(y)}else{let L=await h.json();throw console.error(L),`Error ${h.status} creating zip. Please check logs.`}}catch(h){console.error(h),e.notify({message:String(h),caption:"Request Error!",color:"negative"})}}async function c(w=[]){try{let y=await we("/api/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(y.ok)e.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else throw console.error(y),`Error ${y.status} deleting items. Please check logs.`}catch(y){console.error(y),e.notify({message:String(y),caption:"Request Error!",color:"negative"})}S(t.value)}async function A(w){let y=w;t.value&&(y=t.value+"/"+y),console.log(y);try{let h=await we("/api/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),L=await h.json();if(h.ok)e.notify({message:`Folder "${w}" created.`,caption:"Files",type:"positive"}),S(t.value);else throw console.error(L),`Error ${h.status} while creating folder. Please check logs.`}catch(h){console.error(h),e.notify({message:String(h),caption:"Request Error!",color:"negative"})}}return mt(()=>{S()}),{breadcrumbs:x,folder_current:t,folder_columns:i,folder_rows:l,folder_loading:o,pagination:_,selected:d,filter:r,dialog_create_new_folder:v,new_folder_name:g,confirm_delete:q,dialog_upload_files:u,onNameClick:n,onBreadcrumbClick:p,getFolderContent:S,getZip:F,deleteItems:c,createNewFolder:A,getAccessToken:tl}},watch:{folder_current(e){this.getFolderContent(e)}}},fa={class:"q-pa-md"},va={class:"text-h6"},ga={class:"text-h6"},ma=["onClick"],ba={class:"q-ml-sm"};function _a(e,t,o,l,i,d){return pe(),Re(wl,{id:"admin-files-page",padding:""},{default:N(()=>[fe("div",fa,[T(Fl,{gutter:"sm",style:{cursor:"pointer"}},{default:N(()=>[T(lt,{label:e.$t("TITLE_FILES_WORKING_DIR"),icon:"sym_o_home",onClick:t[0]||(t[0]=r=>l.onBreadcrumbClick(-1))},null,8,["label"]),(pe(!0),ll(nl,null,al(l.breadcrumbs,(r,v)=>(pe(),Re(lt,{key:v,onClick:g=>l.onBreadcrumbClick(v)},{default:N(()=>[il(ye(r),1)]),_:2},1032,["onClick"]))),128))]),_:1}),T(Ie,{modelValue:l.dialog_create_new_folder,"onUpdate:modelValue":t[4]||(t[4]=r=>l.dialog_create_new_folder=r)},{default:N(()=>[T(je,{style:{"min-width":"350px"}},{default:N(()=>[T(he,null,{default:N(()=>[fe("div",va,ye(e.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)]),_:1}),T(he,{class:"q-pt-none"},{default:N(()=>[T(et,{modelValue:l.new_folder_name,"onUpdate:modelValue":t[1]||(t[1]=r=>l.new_folder_name=r),dense:"",autofocus:"",onKeyup:t[2]||(t[2]=ol(r=>{l.createNewFolder(l.new_folder_name),l.dialog_create_new_folder=!1},["enter"]))},null,8,["modelValue"])]),_:1}),T(Qe,{align:"right",class:"text-primary"},{default:N(()=>[Se(T(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[qe]]),Se(T(H,{flat:"",label:e.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:t[3]||(t[3]=r=>l.createNewFolder(l.new_folder_name))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),T(Ie,{modelValue:l.dialog_upload_files,"onUpdate:modelValue":t[7]||(t[7]=r=>l.dialog_upload_files=r)},{default:N(()=>[T(je,{style:{"min-width":"350px"}},{default:N(()=>[T(he,null,{default:N(()=>[fe("div",ga,ye(e.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)]),_:1}),T(he,{class:"q-pt-none"},{default:N(()=>[T(jl,{label:"Upload Files",url:"/api/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:l.folder_current}],headers:[{name:"authorization",value:`Bearer ${l.getAccessToken()}`}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:t[5]||(t[5]=r=>l.getFolderContent(l.folder_current)),onUploaded:t[6]||(t[6]=r=>l.dialog_upload_files=!1)},null,8,["form-fields","headers"])]),_:1}),T(Qe,{align:"right",class:"text-primary"},{default:N(()=>[Se(T(H,{flat:"",label:"Cancel"},null,512),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),T(ua,{selected:l.selected,"onUpdate:selected":t[15]||(t[15]=r=>l.selected=r),class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:l.pagination,rows:l.folder_rows,filter:l.filter,columns:l.folder_columns,color:"primary","row-key":"filepath",dense:"",loading:l.folder_loading,selection:"multiple","virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":N(r=>[T(nt,{props:r},{default:N(()=>[r.value?(pe(),Re(ne,{key:0,name:"sym_o_folder"})):(pe(),Re(ne,{key:1,name:"sym_o_description"}))]),_:2},1032,["props"])]),"body-cell-name":N(r=>[T(nt,{props:r,style:{cursor:"pointer"}},{default:N(()=>[fe("div",{onClick:v=>l.onNameClick(r.row)},ye(r.value),9,ma)]),_:2},1032,["props"])]),"top-left":N(()=>[T(Ie,{modelValue:l.confirm_delete,"onUpdate:modelValue":t[9]||(t[9]=r=>l.confirm_delete=r)},{default:N(()=>[T(je,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:N(()=>[T(he,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:N(()=>[T(rl,{icon:"sym_o_delete",color:"negative","text-color":"white"}),fe("span",ba,ye(e.$t("Are you sure you want to delete the selected files and subfolders?")),1)]),_:1}),T(Qe,{align:"right"},{default:N(()=>[Se(T(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL"),color:"primary"},null,8,["label"]),[[qe]]),Se(T(H,{label:e.$t("yes, delete"),color:"negative",onClick:t[8]||(t[8]=r=>l.deleteItems(l.selected))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),fe("div",null,[T(H,{disable:l.folder_loading,label:e.$t("BTN_LABEL_FILES_NEW_FOLDER"),onClick:t[10]||(t[10]=r=>l.dialog_create_new_folder=!0)},null,8,["disable","label"]),T(H,{class:"q-ml-sm",disable:l.folder_loading,label:e.$t("BTN_LABEL_FILES_UPLOAD_FILE"),onClick:t[11]||(t[11]=r=>l.dialog_upload_files=!0)},null,8,["disable","label"]),T(H,{class:"q-ml-sm",disable:l.selected.length==0,label:e.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP"),onClick:t[12]||(t[12]=r=>l.getZip(l.selected))},null,8,["disable","label"]),T(H,{class:"q-ml-sm",color:"negative",disable:l.selected.length==0,label:e.$t("BTN_LABEL_FILES_DELETE_SELECTED"),onClick:t[13]||(t[13]=r=>l.confirm_delete=!0)},null,8,["disable","label"])])]),"top-right":N(()=>[T(et,{modelValue:l.filter,"onUpdate:modelValue":t[14]||(t[14]=r=>l.filter=r),borderless:"",dense:"",debounce:"300",placeholder:e.$t("TEXT_PLACEHOLDER_SEARCH")},{append:N(()=>[T(ne,{name:"sym_o_search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["selected","pagination","rows","filter","columns","loading"])])]),_:1})}const Aa=el(ca,[["render",_a]]);export{Aa as default};
