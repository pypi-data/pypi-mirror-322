import{r as l,s as Y,j as n,c as w,v as M,D as q,m as f,R as J,V as Q,i as W}from"./index-4a39458b.js";import{I as H}from"./Input-409169a4.js";import{E as R,f as X,h as _}from"./help-68063aae.js";import{w as S,x as Z}from"./transition-a8e1d9f0.js";function C({nativeEvent:t}){return window.TouchEvent?t instanceof TouchEvent:"touches"in t}function K(t){return t.nativeEvent instanceof MouseEvent}function $(t){const r=l.useRef(null),a=l.useRef(t);return l.useLayoutEffect(()=>{a.current=t}),l.useEffect(()=>{const s=u=>{const o=r.current;o&&!o.contains(u.target)&&a.current(u)};return document.addEventListener("mousedown",s),document.addEventListener("touchstart",s),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}},[]),r}function ne(t,r={}){const{threshold:a=400,onStart:s,onFinish:u,onCancel:o}=r,m=l.useRef(!1),d=l.useRef(!1),h=l.useRef();return l.useMemo(()=>{if(typeof t!="function")return{};const v=i=>{!K(i)&&!C(i)||(s&&s(i),d.current=!0,h.current=setTimeout(()=>{t(i),m.current=!0},a))},p=i=>{!K(i)&&!C(i)||(m.current?u&&u(i):d.current&&o&&o(i),m.current=!1,d.current=!1,h.current&&window.clearTimeout(h.current))};return{...{onMouseDown:v,onMouseUp:p,onMouseLeave:p},...{onTouchStart:v,onTouchEnd:p}}},[t,a,o,u,s])}const B=J.forwardRef(function({value:r,type:a,placeholder:s,size:u=f.md,autoFocus:o=!1,onInput:m,onKeyDown:d,className:h,disabled:v},p){return n.jsx(H,{className:h,size:u,children:({className:g})=>n.jsx(H.Textfield,{ref:p,type:a,className:w(g,"w-full"),autoFocus:o,placeholder:s,value:r,onInput:m,onKeyDown:d,disabled:v})})});function oe({list:t,size:r=f.md,searchBy:a,displayBy:s,descriptionBy:u,onSelect:o,to:m,placeholder:d="Search",autoFocus:h=!1,showIndex:v=!0,isFullWidth:p=!1,isLoading:g=!1,disabled:y=!1,direction:i="bottom",className:U,onInput:T}){const G=Y(),k=l.useRef(null),D=l.useRef(null),O=l.useMemo(()=>t.map(e=>[e,e[a]]),[t,a]),[N,b]=l.useState(R),[x,E]=l.useState(0),V=$(()=>{b(R)}),I=N!==R,L=X(O,N);function A(){var e;E(0),b(R),(e=D.current)==null||e.focus()}function P(){var c;const e=(c=L[x])==null?void 0:c[0];M(e)||(M(m)?o==null||o(e):G(m(e)),A())}return n.jsx("div",{className:w("p-1 relative",y&&"opacity-50 cursor-not-allowed",U),ref:V,onKeyDown:e=>{e.key==="Escape"&&A()},children:n.jsxs(S,{className:"relative flex w-full",children:[n.jsx(S.Button,{ref:D,as:B,className:w("w-full !m-0",y&&"pointer-events-none"),type:"search",size:r,value:N,placeholder:d,onInput:e=>{const c=e.target.value.trim();b(c),T==null||T(c)},onKeyDown:e=>{var c;(e.key==="ArrowDown"||e.key==="ArrowUp")&&((c=k.current)==null||c.focus())},autoFocus:h,disabled:y}),n.jsx(Z,{show:I,as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:n.jsx(S.Panel,{static:!0,className:w("absolute z-50 right-0 transform cursor-pointer rounded-lg bg-theme border-2 border-neutral-200","p-2 bg-theme dark:bg-theme-lighter overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",i==="top"?"top-0":"bottom-10",r===f.sm&&"mt-7 max-h-[30vh]",r===f.md&&"mt-9 max-h-[40vh]",r===f.lg&&"mt-12 max-h-[50vh]",p?"w-full":"w-full max-w-[20rem]"),ref:k,onKeyDown:e=>{e.key==="ArrowUp"&&x>0&&E(x-1),e.key==="ArrowDown"&&x<L.length-1&&E(x+1),e.key==="Enter"&&(e.preventDefault(),P())},onMouseOver:e=>{e.stopPropagation();const c=e.target.closest('[role="menuitem"]');if(M(c))return;const j=Number(c.dataset.index);E(Number(j))},children:q(L)&&I?n.jsx("div",{className:w(r===f.sm&&"p-1",r===f.md&&"p-2",r===f.lg&&"p-3"),children:g?"Loading...":"No Results Found"},"not-found"):L.map(([e,c],j)=>n.jsx("div",{role:"menuitem","data-index":j,className:w("cursor-pointer rounded-lg",x===j&&"bg-neutral-5"),children:n.jsx(z,{item:e,index:c,search:N,displayBy:s,descriptionBy:u,size:r,showIndex:v,onClick:F=>{F.stopPropagation(),F.preventDefault(),P()}})},e[a]))})})]})})}function z({item:t,index:r,search:a,displayBy:s,descriptionBy:u,size:o,showIndex:m=!0,onClick:d}){return n.jsxs("div",{onClick:d,className:w("font-normal w-full overflow-hidden whitespace-nowrap overflow-ellipsis px-2",o===f.sm&&"text-xs py-1",o===f.md&&"text-sm py-2",o===f.lg&&"text-md py-3"),children:[m?n.jsxs(n.Fragment,{children:[n.jsx("span",{title:t[s],className:"font-bold",children:Q(t[s],50,20)}),n.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",dangerouslySetInnerHTML:{__html:_(r,a)}})]}):n.jsx("span",{title:t[s],className:"font-bold",dangerouslySetInnerHTML:{__html:_(t[s],a)}}),W(u)&&n.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",children:t[u]})]})}export{oe as S,ne as u};
