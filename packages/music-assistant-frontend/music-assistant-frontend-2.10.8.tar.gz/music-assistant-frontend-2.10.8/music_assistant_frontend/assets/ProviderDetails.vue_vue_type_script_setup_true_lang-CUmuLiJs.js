import{p as te,g as ie,n as t,x as K,r as U,y as a,D as s,A as i,q as X,Y as j,W as ae,V as ne,j as le,az as oe,ae as se,w as re,c as D,M as N,ao as S,G as r,z as g,K as d,B as _,S as R,J as c,aA as me,F as x,E as P,al as ue,H as z,I as A,a2 as F,aB as de,X as ce,R as pe}from"./index-B55Az6uZ.js";import{_ as J}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-DmwHlomN.js";import{g as H,f as ye,M as E,h as fe,j as ge}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_3a9a25e3_lang-bhWnvEZi.js";import{a as he,l as ve,n as ke,i as be,v as B,w as C,F as we,V as Q,G as W,k as q}from"./VListItem-CTt5-rrr.js";import{V as _e}from"./VMenu-BJOay2FN.js";import{T as Z}from"./Toolbar-CnjrHAL9.js";import{M as I,a as Ce}from"./marquee_text_sync-D_EPQvtP.js";import{V as G,a as $e}from"./VCard-Ba6kturx.js";import{V as Ve}from"./VDialog-B4Ltljs_.js";import{V as Te,a as T,b as Le}from"./VCardText-6y4Yo2hg.js";import{V as Ie}from"./VTooltip-B2xVdDYJ.js";import{a as O,V as ee}from"./VList-BbG08zRJ.js";import{a as xe}from"./VChip-USL2zd6t.js";import{b as Pe,c as ze}from"./layout-CXuYJmUE.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as Re}from"./ListItem-BIOYzg71.js";import{C as Ae}from"./Container-DwLI_eNo.js";const Be=te({...he(),...ve(),...Pe()},"VLayout"),Se=ie()({name:"VLayout",props:Be(),setup($,o){let{slots:y}=o;const{layoutClasses:v,layoutStyles:p,getLayoutItem:k,items:f,layoutRef:w}=ze($),{dimensionStyles:u}=ke($);return be(()=>{var b;return t("div",{ref:w,class:[v.value,$.class],style:[u.value,p.value,$.style]},[(b=y.default)==null?void 0:b.call(y)])}),{getLayoutItem:k,items:f}}}),He=K({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},openMenuOnClick:{type:Boolean,default:!1}},emits:["click"],setup($,{emit:o}){const y=U(!1),v=o;return(p,k)=>(a(),s("div",{style:j(`width: ${p.width}px; height: 30px;`)},[t(_e,{modelValue:y.value,"onUpdate:modelValue":k[0]||(k[0]=f=>y.value=f),"close-on-content-click":!0,"nudge-width":200,"offset-x":"",scrim:"!store.showPlayersMenu","z-index":"100"},{activator:i(({props:f})=>[t(B,X({variant:"tonal"},f,{style:`
            width: ${p.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `}),{default:i(()=>[t(C,{icon:"mdi-menu-down",size:"xx-large",style:j(`width: 20px; margin-left: ${p.width-42}px`)},null,8,["style"])]),_:2},1040,["style"])]),default:i(()=>[ae(p.$slots,"menu")]),_:3},8,["modelValue"]),t(B,{color:"primary",flat:"",disabled:p.disabled,style:j(`width: ${p.width-40}px; justify-content: left;`),text:p.text,onClick:k[1]||(k[1]=f=>p.openMenuOnClick?y.value=!y.value:v("click"))},ne({_:2},[p.icon&&p.text.length<12?{name:"prepend",fn:i(()=>[t(C,{icon:p.icon,size:"x-large"},null,8,["icon"])]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),Fe={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center","flex-shrink":"0"}},Ue={key:0},Ne={key:1},je={style:{"min-width":"0"}},Ee=["src"],qe={style:{"padding-bottom":"10px"}},Ge=["onClick"],Oe={style:{color:"accent"}},Ke={style:{color:"accent"}},Me={style:{color:"primary"}},Ye={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},We=["innerHTML"],Xe={key:3,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Je=K({__name:"InfoHeader",props:{item:{}},setup($){const o=$,y=U(!1),v=U(),{mobile:p}=le(),k=new URL(""+new URL("info_gradient-C5d1dalX.jpg",import.meta.url).href,import.meta.url).href,f=new Ce,w=oe();se(),re(()=>o.item,async e=>{e&&(v.value=H(o.item,S.FANART)||H(o.item,S.LANDSCAPE)||H(o.item,S.THUMB)||k)},{immediate:!0});const u=function(e){w.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},b=function(e){w.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},V=function(){var m;if(z.prevRoute){w.back();return}const e=((m=w.currentRoute.value.name)==null?void 0:m.toString())||"";for(const n of["artist","album","track","playlist","radio"])if(e.includes(n)){w.push({name:`${n}s`});return}w.push({name:"home"})},l=D(()=>o.item?o.item.metadata&&o.item.metadata.description?o.item.metadata.description:o.item.metadata&&o.item.metadata.copyright?o.item.metadata.copyright:("artists"in o.item&&o.item.artists.forEach(function(e){if("metadata"in e&&e.metadata.description)return e.metadata.description}),""):""),L=D(()=>l.value.replace(/(\r\n|\n|\r)/gm,"<br /><br />")),M=D(()=>{const e=p.value?160:300;return l.value.length>e?l.value.replace(/(\r\n|\n|\r)/gm," ").substring(0,e)+"...":l.value.replace(/(\r\n|\n|\r)/gm," ")}),Y=D(()=>{if(o.item&&o.item.media_type==N.ARTIST)return H(o.item,S.LOGO)});return(e,m)=>(a(),s("div",null,[t(G,{variant:"flat",img:r(k),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?d("",!0):(a(),g(we,{key:0,indeterminate:""})),t(Q,{width:"100%",height:"100%",cover:"",class:"background-image",src:v.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),t(Z,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":e.item?r(ye)([e.item],e.item):[],"enforce-overflow-menu":!0,"show-loading":!0,"icon-action":V},null,8,["menu-items"]),e.item?(a(),g(Se,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px",display:"flex",width:"100%"}},{default:i(()=>[e.$vuetify.display.mobile?d("",!0):(a(),s("div",Fe,[e.item.media_type&&e.item.media_type==r(N).ARTIST?(a(),s("div",Ue,[t(W,{size:"210",style:{"margin-bottom":"10%"}},{default:i(()=>[t(E,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(a(),s("div",Ne,[t(E,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),_("div",je,[Y.value?(a(),s("img",{key:0,src:Y.value,width:"auto",height:"80",style:{"padding-left":"10px"}},null,8,Ee)):(a(),g(Te,{key:1},{default:i(()=>[t(I,{sync:r(f)},{default:i(()=>[R(c(e.item.name),1)]),_:1},8,["sync"])]),_:1})),_("div",qe,["version"in e.item&&e.item.version?(a(),g(T,{key:0,class:"caption"},{default:i(()=>[R(c(e.item.version)+" ",1),t(Ie,{location:"bottom"},{activator:i(({props:n})=>[r(me)(e.item.metadata.explicit||!1)?(a(),g(C,X({key:0},n,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):d("",!0)]),default:i(()=>[_("span",null,c(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):d("",!0),"artists"in e.item&&e.item.artists?(a(),g(T,{key:1,class:"title accent--text d-flex"},{default:i(()=>[t(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),t(I,{sync:r(f)},{default:i(()=>[(a(!0),s(x,null,P(e.item.artists,(n,h)=>(a(),s("span",{key:n.item_id},[_("a",{style:{color:"accent"},onClick:it=>b(n)},c(n.name),9,Ge),h+1<e.item.artists.length?(a(),s("span",{key:h,style:{color:"accent"}},c(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"authors"in e.item&&e.item.authors.length>0?(a(),g(T,{key:2,class:"title accent--text d-flex"},{default:i(()=>[t(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-edit"}),t(I,{sync:r(f)},{default:i(()=>[(a(!0),s(x,null,P(e.item.authors,(n,h)=>(a(),s("span",{key:n},[_("span",Oe,c(n),1),h+1<e.item.authors.length?(a(),s("span",{key:h,style:{color:"accent"}},c(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"narrators"in e.item&&e.item.narrators.length>0?(a(),g(T,{key:3,class:"title accent--text d-flex"},{default:i(()=>[t(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-voice"}),t(I,{sync:r(f)},{default:i(()=>[(a(!0),s(x,null,P(e.item.narrators,(n,h)=>(a(),s("span",{key:n},[_("span",Ke,c(n),1),h+1<e.item.narrators.length?(a(),s("span",{key:h,style:{color:"accent"}},c(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"owner"in e.item&&e.item.owner?(a(),g(T,{key:4,class:"title d-flex"},{default:i(()=>[t(C,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),t(I,{sync:r(f)},{default:i(()=>[_("a",Me,c(e.item.owner),1)]),_:1},8,["sync"])]),_:1})):d("",!0),"album"in e.item&&e.item.album?(a(),g(T,{key:5,class:"d-flex"},{default:i(()=>[t(C,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),t(I,{sync:r(f)},{default:i(()=>[_("a",{style:{color:"secondary"},onClick:m[0]||(m[0]=n=>{var h;return u((h=e.item)==null?void 0:h.album)})},c(e.item.album.name),1)]),_:1},8,["sync"])]),_:1})):d("",!0)]),_("div",Ye,[t(He,{width:220,icon:"mdi-play-circle-outline",text:r(ue)(e.$t("play"),14),disabled:!e.item,"open-menu-on-click":!r(z).activePlayer,onClick:m[2]||(m[2]=n=>r(A).playMedia(e.item))},{menu:i(()=>[t(G,{width:"320"},{default:i(()=>[t(O,null,{default:i(()=>[t(q,{title:e.item.name,link:""},{prepend:i(()=>[t(W,null,{default:i(()=>[t(E,{item:e.item,size:"80"},null,8,["item"])]),_:1})]),title:i(()=>{var n;return[t(q,{variant:"text",title:e.$t("play_on"),subtitle:((n=r(z).activePlayer)==null?void 0:n.display_name)||e.$t("no_player"),onClick:m[1]||(m[1]=F(h=>r(z).showPlayersMenu=!0,["stop"]))},null,8,["title","subtitle"])]}),_:1},8,["title"])]),_:1}),t(ee),t(O,{density:"compact",slim:"",tile:"",disabled:!r(z).activePlayer},{default:i(()=>[(a(!0),s(x,null,P(r(fe)([e.item],e.item),n=>(a(),s("div",{key:n.label},[t(q,{title:e.$t(n.label,n.labelArgs||[]),density:"compact",onClick:n.action},{prepend:i(()=>[t(C,{style:{"padding-left":"15px"},icon:n.icon},null,8,["icon"])]),_:2},1032,["title","onClick"])]))),128))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["text","disabled","open-menu-on-click"]),t(B,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[m[3]||(m[3]=n=>r(A).toggleFavorite(e.item)),m[4]||(m[4]=F(()=>{},["prevent"])),m[5]||(m[5]=F(()=>{},["stop"]))]},null,8,["icon","title"]),t(J,{domain:e.item.provider,size:25,style:{"margin-top":"6px"}},null,8,["domain"])]),M.value?(a(),g(T,{key:2,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:m[6]||(m[6]=n=>y.value=!y.value)},{default:i(()=>[_("div",{innerHTML:M.value},null,8,We)]),_:1})):d("",!0),e.item&&e.item.metadata.genres?(a(),s("div",Xe,[(a(!0),s(x,null,P(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),n=>(a(),g(xe,{key:n,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[R(c(n),1)]),_:2},1024))),128))])):d("",!0)])]),_:1})):d("",!0)]),_:1},8,["img"]),t(Ve,{modelValue:y.value,"onUpdate:modelValue":m[8]||(m[8]=n=>y.value=n),"max-width":"975",width:"auto"},{default:i(()=>[t(G,null,{default:i(()=>[t(Le,{innerHTML:L.value},null,8,["innerHTML"]),t($e,null,{default:i(()=>[t(B,{color:"primary",block:"",onClick:m[7]||(m[7]=n=>y.value=!1)},{default:i(()=>[R(c(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),bt=De(Je,[["__scopeId","data-v-32c55e7d"]]),Qe={style:{"margin-bottom":"10px"}},Ze={key:0},et=["title","onClick"],tt=["title"],wt=K({__name:"ProviderDetails",props:{itemDetails:{}},setup($){const o=U(!1),y=function(u){window.open(u,"_blank")},v=de({}),p=function(u){const b=`${u.provider_instance}.${u.item_id}`,V=v[b];if(V)V.load(),delete v[b];else{const l=new Audio(k(u.provider_instance,u.item_id));v[b]=l,l.play()}},k=function(u,b){return`${A.baseUrl}/preview?item_id=${encodeURIComponent(b)}&provider=${u}`},f=function(){o.value=!o.value},w=D(()=>[{label:"tooltip.collapse_expand",icon:o.value?"mdi-chevron-up":"mdi-chevron-down",action:f,overflowAllowed:!1}]);return(u,b)=>(a(),s("section",Qe,[t(Z,{title:u.$t("mapped_providers"),"menu-items":w.value,onTitleClicked:f},null,8,["title","menu-items"]),t(ee),o.value?(a(),g(Ae,{key:0},{default:i(()=>[t(O,null,{default:i(()=>{var V;return[(a(!0),s(x,null,P((V=u.itemDetails)==null?void 0:V.provider_mappings,l=>(a(),g(Re,{key:l.provider_instance,disabled:!l.available||!r(A).getProvider(l.provider_instance)},{prepend:i(()=>[t(J,{domain:l.provider_domain,size:30},null,8,["domain"])]),title:i(()=>{var L;return[R(c((L=r(A).providerManifests[l.provider_domain])==null?void 0:L.name),1)]}),subtitle:i(()=>[u.itemDetails.media_type==r(N).TRACK&&l.audio_format?(a(),s("span",Ze,c(l.audio_format.content_type)+" | "+c(l.audio_format.sample_rate/1e3)+"kHz/"+c(l.audio_format.bit_depth)+" bits | ",1)):d("",!0),l.url&&!l.provider_domain.startsWith("file")?(a(),s("a",{key:1,style:{opacity:"0.4"},title:u.$t("tooltip.open_provider_link"),onClick:F(L=>y(l.url),["prevent"])},c(l.url),9,et)):(a(),s("span",{key:2,style:{opacity:"0.4"},title:l.item_id},c(l.item_id),9,tt))]),append:i(()=>[l.audio_format&&l.audio_format.bit_depth>16?(a(),g(Q,{key:0,src:r(ge),width:"30",class:ce(u.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):d("",!0),r(pe)("bp1")&&u.itemDetails.media_type==r(N).TRACK?(a(),g(B,{key:1,icon:v[`${l.provider_instance}.${l.item_id}`]?"mdi-pause":"mdi-play-circle",title:u.$t("tooltip.play_sample"),onClick:L=>p(l)},null,8,["icon","title","onClick"])):d("",!0)]),_:2},1032,["disabled"]))),128))]}),_:1})]),_:1})):d("",!0)]))}});export{bt as I,wt as _};
