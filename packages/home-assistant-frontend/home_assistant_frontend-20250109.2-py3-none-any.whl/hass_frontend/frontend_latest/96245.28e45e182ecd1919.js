export const ids=["96245"];export const modules={29937:function(t,e,i){i.d(e,{Q:()=>u});var o=i("44249"),a=i("72621"),d=(i("92519"),i("42179"),i("89256"),i("24931"),i("88463"),i("57449"),i("19814"),i("39527"),i("41360"),i("13334"),i("36993"),i("57243")),s=i("15093"),n=i("35359"),l=i("69634"),r=i("36522"),h=i("34593"),c=i("22381");const p=/Mac/i.test(navigator.userAgent);i("23334");const u=3e5;(0,o.Z)([(0,s.Mo)("ha-chart-base")],(function(t,e){class o extends e{constructor(...e){super(...e),t(this)}}return{F:o,d:[{kind:"field",key:"chart",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"chart-type",reflect:!0})],key:"chartType",value:()=>"line"},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"data",value:()=>({datasets:[]})},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"extraData",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"options",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"plugins",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Number})],key:"height",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"paddingYAxis",value:()=>0},{kind:"field",decorators:[(0,s.Cb)({attribute:"external-hidden",type:Boolean})],key:"externalHidden",value:()=>!1},{kind:"field",decorators:[(0,s.SB)()],key:"_legendHeight",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_tooltip",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_hiddenDatasets",value:()=>new Set},{kind:"field",decorators:[(0,s.SB)()],key:"_showZoomHint",value:()=>!1},{kind:"field",decorators:[(0,s.SB)()],key:"_isZoomed",value:()=>!1},{kind:"field",key:"_paddingUpdateCount",value:()=>0},{kind:"field",key:"_paddingUpdateLock",value:()=>!1},{kind:"field",key:"_paddingYAxisInternal",value:()=>0},{kind:"field",key:"_datasetOrder",value:()=>[]},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.Z)(o,"disconnectedCallback",this,3)([]),window.removeEventListener("scroll",this._handleScroll,!0),this._releaseCanvas()}},{kind:"method",key:"connectedCallback",value:function(){(0,a.Z)(o,"connectedCallback",this,3)([]),window.addEventListener("scroll",this._handleScroll,!0),this.hasUpdated&&(this._releaseCanvas(),this._setupChart())}},{kind:"field",key:"updateChart",value(){return t=>{this.chart?.update(t)}}},{kind:"method",key:"firstUpdated",value:function(){this._setupChart(),this.data.datasets.forEach(((t,e)=>{t.hidden&&this._hiddenDatasets.add(e)}))}},{kind:"method",key:"shouldUpdate",value:function(t){return!this._paddingUpdateLock||1!==t.size||!t.has("paddingYAxis")}},{kind:"field",key:"_debouncedClearUpdates",value(){return(0,c.D)((()=>{this._paddingUpdateCount=0}),2e3,!1)}},{kind:"method",key:"willUpdate",value:function(t){if((0,a.Z)(o,"willUpdate",this,3)([t]),this._paddingUpdateLock||(this._paddingYAxisInternal=this.paddingYAxis,1===t.size&&t.has("paddingYAxis")&&(this._paddingUpdateCount++,this._paddingUpdateCount>300?(this._paddingUpdateLock=!0,console.error("Detected excessive chart padding updates, possibly an infinite loop. Disabling axis padding.")):this._debouncedClearUpdates())),t.has("data")&&(this._datasetOrder=this.data.datasets.map(((t,e)=>e)),this.data?.datasets.some((t=>t.order))&&this._datasetOrder.sort(((t,e)=>(this.data.datasets[t].order||0)-(this.data.datasets[e].order||0))),this.externalHidden&&(this._hiddenDatasets=new Set,this.data?.datasets&&this.data.datasets.forEach(((t,e)=>{t.hidden&&this._hiddenDatasets.add(e)})))),this.hasUpdated&&this.chart){if(t.has("plugins")||t.has("chartType"))return this._releaseCanvas(),void this._setupChart();t.has("data")&&(this._hiddenDatasets.size&&!this.externalHidden&&this.data.datasets.forEach(((t,e)=>{t.hidden=this._hiddenDatasets.has(e)})),this.chart.data=this.data),t.has("options")&&!this.chart.isZoomedOrPanned()&&(this.chart.options=this._createOptions()),this.chart.update("none")}}},{kind:"method",key:"updated",value:function(t){(0,a.Z)(o,"updated",this,3)([t]),(t.has("data")||t.has("options"))&&(this.options?.plugins?.legend?.display?this._legendHeight=this.renderRoot.querySelector(".chart-legend")?.clientHeight:this._legendHeight=0)}},{kind:"method",key:"render",value:function(){return d.dy` ${!0===this.options?.plugins?.legend?.display?d.dy`<div class="chart-legend"> <ul> ${this._datasetOrder.map((t=>{const e=this.data.datasets[t];return!1===this.extraData?.[t]?.show_legend?d.Ld:d.dy`<li .datasetIndex="${t}" @click="${this._legendClick}" class="${(0,n.$)({hidden:this._hiddenDatasets.has(t)})}" .title="${this.extraData?.[t]?.legend_label??e.label}"> <div class="bullet" style="${(0,l.V)({backgroundColor:e.backgroundColor,borderColor:e.borderColor})}"></div> <div class="label"> ${this.extraData?.[t]?.legend_label??e.label} </div> </li>`}))} </ul> </div>`:""} <div class="chart-container" style="${(0,l.V)({height:`${this.height??this._getDefaultHeight()}px`,"padding-left":`${this._paddingYAxisInternal}px`,"padding-right":0,"padding-inline-start":`${this._paddingYAxisInternal}px`,"padding-inline-end":0})}" @wheel="${this._handleChartScroll}"> <canvas class="${(0,n.$)({"not-zoomed":!this._isZoomed})}"></canvas> <div class="zoom-hint ${(0,n.$)({visible:this._showZoomHint})}"> <div> ${p?this.hass.localize("ui.components.history_charts.zoom_hint_mac"):this.hass.localize("ui.components.history_charts.zoom_hint")} </div> </div> ${this._isZoomed&&"timeline"!==this.chartType?d.dy`<ha-icon-button class="zoom-reset" .path="${"M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z"}" @click="${this._handleZoomReset}" title="${this.hass.localize("ui.components.history_charts.zoom_reset")}"></ha-icon-button>`:d.Ld} ${this._tooltip?d.dy`<div class="chart-tooltip ${(0,n.$)({[this._tooltip.yAlign]:!0})}" style="${(0,l.V)({top:this._tooltip.top,left:this._tooltip.left})}"> <div class="title">${this._tooltip.title}</div> ${this._tooltip.beforeBody?d.dy`<div class="before-body"> ${this._tooltip.beforeBody} </div>`:""} <div> <ul> ${this._tooltip.body.map(((t,e)=>d.dy`<li> <div class="bullet" style="${(0,l.V)({backgroundColor:this._tooltip.labelColors[e].backgroundColor,borderColor:this._tooltip.labelColors[e].borderColor})}"></div> ${t.lines.join("\n")} </li>`))} </ul> </div> ${this._tooltip.footer.length?d.dy`<div class="footer"> ${this._tooltip.footer.map((t=>d.dy`${t}<br>`))} </div>`:""} </div>`:""} </div> `}},{kind:"field",key:"_loading",value:()=>!1},{kind:"method",key:"_setupChart",value:async function(){if(this._loading)return;const t=this.renderRoot.querySelector("canvas").getContext("2d");this._loading=!0;try{const e=(await Promise.all([i.e("471"),i.e("13164"),i.e("49702")]).then(i.bind(i,63876))).Chart,o=getComputedStyle(this);e.defaults.borderColor=o.getPropertyValue("--divider-color"),e.defaults.color=o.getPropertyValue("--secondary-text-color"),e.defaults.font.family=o.getPropertyValue("--mdc-typography-body1-font-family")||o.getPropertyValue("--mdc-typography-font-family")||"Roboto, Noto, sans-serif",this.chart=new e(t,{type:this.chartType,data:this.data,options:this._createOptions(),plugins:this._createPlugins()})}finally{this._loading=!1}}},{kind:"method",key:"_createOptions",value:function(){const t=p?"meta":"ctrl";return{maintainAspectRatio:!1,animation:{duration:500},...this.options,plugins:{...this.options?.plugins,tooltip:{...this.options?.plugins?.tooltip,enabled:!1,external:t=>this._handleTooltip(t)},legend:{...this.options?.plugins?.legend,display:!1},zoom:{...this.options?.plugins?.zoom,pan:{enabled:!0},zoom:{pinch:{enabled:!0},drag:{enabled:!0,modifierKey:t,threshold:2},wheel:{enabled:!0,modifierKey:t,speed:.05},mode:"timeline"!==this.chartType&&"category"===this.options?.scales?.y?.type?"y":"x",onZoomComplete:()=>{const t=this.chart?.isZoomedOrPanned()??!1;this._isZoomed&&!t&&setTimeout((()=>{this.chart?.resetZoom()})),this._isZoomed=t}},limits:{x:{min:"original",max:this.options?.scales?.x?.max??"original"},y:{min:"original",max:"original"}}}}}}},{kind:"method",key:"_createPlugins",value:function(){return[...this.plugins||[],{id:"resizeHook",resize:t=>{this.height||(this.height=t.height)},legend:{...this.options?.plugins?.legend,display:!1}}]}},{kind:"method",key:"_getDefaultHeight",value:function(){return this.clientWidth/2}},{kind:"method",key:"_handleChartScroll",value:function(t){const e=p?"metaKey":"ctrlKey";this._tooltip=void 0,t[e]||this._showZoomHint||(this._showZoomHint=!0,setTimeout((()=>{this._showZoomHint=!1}),1e3))}},{kind:"method",key:"_legendClick",value:function(t){if(!this.chart)return;const e=t.currentTarget.datasetIndex;this.chart.isDatasetVisible(e)?(this.chart.setDatasetVisibility(e,!1),this._hiddenDatasets.add(e),this.externalHidden&&(0,r.B)(this,"dataset-hidden",{index:e})):(this.chart.setDatasetVisibility(e,!0),this._hiddenDatasets.delete(e),this.externalHidden&&(0,r.B)(this,"dataset-unhidden",{index:e})),this.chart.update("none"),this.requestUpdate("_hiddenDatasets")}},{kind:"method",key:"_handleTooltip",value:function(t){if(0===t.tooltip.opacity)return void(this._tooltip=void 0);const e=this.getBoundingClientRect();this._tooltip={...t.tooltip,top:e.y+(this._legendHeight||0)+t.tooltip.caretY+12+"px",left:(0,h.u)(e.x+t.tooltip.caretX,e.x+100,e.x+e.width-100)-100+"px"}}},{kind:"method",key:"_releaseCanvas",value:function(){this.chart&&this.chart.destroy()}},{kind:"method",key:"_handleZoomReset",value:function(){this.chart?.resetZoom()}},{kind:"field",key:"_handleScroll",value(){return()=>{this._tooltip=void 0}}},{kind:"get",static:!0,key:"styles",value:function(){return d.iv`:host{display:block;position:relative}.chart-container{position:relative}canvas{max-height:var(--chart-max-height,400px)}canvas.not-zoomed{touch-action:pan-y!important}.chart-legend{text-align:center}.chart-legend li{cursor:pointer;display:inline-grid;grid-auto-flow:column;padding:0 8px;box-sizing:border-box;align-items:center;color:var(--secondary-text-color)}.chart-legend .hidden{text-decoration:line-through}.chart-legend .label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .bullet,.chart-tooltip .bullet{border-width:1px;border-style:solid;border-radius:50%;display:inline-block;height:16px;margin-right:6px;width:16px;flex-shrink:0;box-sizing:border-box;margin-inline-end:6px;margin-inline-start:initial;direction:var(--direction)}.chart-tooltip .bullet{align-self:baseline}.chart-tooltip{padding:8px;font-size:90%;position:fixed;background:rgba(80,80,80,.9);color:#fff;border-radius:4px;pointer-events:none;z-index:1;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;width:200px;box-sizing:border-box;direction:var(--direction)}.chart-legend ul,.chart-tooltip ul{display:inline-block;padding:0 0px;margin:8px 0 0 0;width:100%}.chart-tooltip ul{margin:0 4px}.chart-tooltip li{display:flex;white-space:pre-line;word-break:break-word;align-items:center;line-height:16px;padding:4px 0}.chart-tooltip .title{text-align:center;font-weight:500;word-break:break-word;direction:ltr}.chart-tooltip .footer{font-weight:500}.chart-tooltip .before-body{text-align:center;font-weight:300;word-break:break-all}.zoom-hint{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .5s cubic-bezier(.4, 0, .2, 1);pointer-events:none}.zoom-hint.visible{opacity:1}.zoom-hint>div{color:#fff;font-size:1.5em;font-weight:500;padding:8px;border-radius:8px;background:rgba(0,0,0,.3);box-shadow:0 0 32px 32px rgba(0,0,0,.3)}.zoom-reset{position:absolute;top:16px;right:4px;background:var(--card-background-color);border-radius:4px;--mdc-icon-button-size:32px;color:var(--primary-color);border:1px solid var(--divider-color)}`}}]}}),d.oi)}};
//# sourceMappingURL=96245.28e45e182ecd1919.js.map