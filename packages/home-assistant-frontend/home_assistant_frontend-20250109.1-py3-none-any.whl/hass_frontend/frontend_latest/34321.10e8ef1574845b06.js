export const ids=["34321"];export const modules={50875:function(t,e,n){n.d(e,{Eu:function(){return a},hZ:function(){return o}});var s=n(11259);const i=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function a(t){return i[t%i.length]}function o(t,e){const n=e.getPropertyValue(`--graph-color-${t+1}`)||a(t);return(0,s.Rq)(n)}},18520:function(t,e,n){n.d(e,{n:function(){return s}});const s=t=>!(t.native instanceof MouseEvent)||t.native instanceof PointerEvent&&"mouse"!==t.native.pointerType},6736:function(t,e,n){n.d(e,{f:function(){return o}});var s=n(44249),i=n(72621),a=(n(39527),n(36993),n(15093));const o=t=>(0,s.Z)(null,(function(t,e){class n extends e{constructor(...e){super(...e),t(this)}}return{F:n,d:[{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,i.Z)(n,"connectedCallback",this,3)([]),this._checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,i.Z)(n,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,i.Z)(n,"updated",this,3)([t]),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this._checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"_checkSubscribed",value:function(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&!this.hassSubscribeRequiredHostProps?.some((t=>void 0===this[t]))&&(this.__unsubs=this.hassSubscribe())}}]}}),t)},18709:function(t,e,n){n.a(t,(async function(t,s){try{n.r(e),n.d(e,{HuiEnergyDevicesGraphCard:function(){return _}});var i=n(44249),a=(n(92745),n(39527),n(67670),n(41360),n(28451)),o=n(57243),c=n(15093),r=n(35359),u=n(27486),d=n(50875),h=n(36522),f=n(50602),l=(n(29937),n(54977),n(1118)),b=n(17705),v=n(6736),k=n(93331),p=n(18520),g=t([l,f,a]);[l,f,a]=g.then?(await g)():g;let _=(0,i.Z)([(0,c.Mo)("hui-energy-devices-graph-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_chartData",value:()=>({datasets:[]})},{kind:"field",decorators:[(0,c.SB)()],key:"_data",value:void 0},{kind:"field",decorators:[(0,c.IO)("ha-chart-base")],key:"_chart",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){return[(0,l.UB)(this.hass,{key:this._config?.collection_key}).subscribe((t=>{this._data=t,this._getStatistics(t)}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,k.SN)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){return this.hass&&this._config?o.dy` <ha-card> ${this._config.title?o.dy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="content ${(0,r.$)({"has-header":!!this._config.title})}"> <ha-chart-base .hass="${this.hass}" .data="${this._chartData}" .options="${this._createOptions(this.hass.locale)}" .height="${28*(this._chartData?.datasets[0]?.data.length||0)+50}" chart-type="bar"></ha-chart-base> </div> </ha-card> `:o.Ld}},{kind:"field",key:"_createOptions",value(){return(0,u.Z)((t=>({parsing:!1,responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{y:{type:"category",ticks:{autoSkip:!1,callback:t=>{const e=this._chartData.datasets[0].data[t].y;return this._getDeviceName(e)}}},x:{title:{display:!0,text:"kWh"}}},elements:{bar:{borderWidth:1,borderRadius:4}},plugins:{tooltip:{mode:"nearest",callbacks:{title:t=>{const e=t[0].label;return this._getDeviceName(e)},label:e=>`${e.dataset.label}: ${(0,f.uf)(e.parsed.x,t)} kWh`}}},locale:(0,f.Hd)(this.hass.locale),onClick:t=>{if((0,p.n)(t))return;const e=t.chart,n=(0,a.z)(t,e),s=Math.abs(e.scales.y.getValueForPixel(n.y)),i=this._chartData?.datasets[0]?.data[s]?.y;i&&!(0,b.Hs)(i)&&((0,h.B)(this,"hass-more-info",{entityId:i}),e.canvas.dispatchEvent(new Event("mouseout")))}})))}},{kind:"method",key:"_getDeviceName",value:function(t){return this._data?.prefs.device_consumption.find((e=>e.stat_consumption===t))?.name||(0,b.Kd)(this.hass,t,this._data?.statsMetadata[t])}},{kind:"method",key:"_getStatistics",value:async function(t){const e=t.stats,n=t.statsCompare,s=[],i=[],a=[],o=[],c=[],r=[],u=[{label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.energy_usage"),borderColor:a,backgroundColor:c,data:s,barThickness:n?10:20}];n&&u.push({label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.previous_energy_usage"),borderColor:o,backgroundColor:r,data:i,barThickness:10}),t.prefs.device_consumption.forEach(((t,a)=>{const o=t.stat_consumption in e&&(0,b.Kj)(e[t.stat_consumption])||0;if(s.push({y:t.stat_consumption,x:o,idx:a}),n){const e=t.stat_consumption in n&&(0,b.Kj)(n[t.stat_consumption])||0;i.push({y:t.stat_consumption,x:e,idx:a})}})),s.sort(((t,e)=>e.x-t.x)),s.length=this._config?.max_devices||s.length;const h=getComputedStyle(this);s.forEach((t=>{const e=(0,d.hZ)(t.idx,h);a.push(e),c.push(e+"7F")})),i.forEach((t=>{const e=(0,d.hZ)(t.idx,h);o.push(e+"7F"),r.push(e+"32")})),this._chartData={labels:s.map((t=>t.y)),datasets:u},await this.updateComplete,this._chart?.updateChart("none")}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}ha-chart-base{--chart-max-height:none}`}}]}}),(0,v.f)(o.oi));s()}catch(t){s(t)}}))},32424:function(t,e,n){n.d(e,{E:function(){return a}});var s=n(53907),i=n(18112);function a(t,e,n){const a=(0,i.Q)(t,n?.in);return isNaN(e)?(0,s.L)(n?.in||t,NaN):e?(a.setDate(a.getDate()+e),a):a}},38836:function(t,e,n){n.d(e,{T:function(){return a}});var s=n(23711),i=n(76808);function a(t,e,n){return(0,s.n)(t,e*i.vh,n)}},23711:function(t,e,n){n.d(e,{n:function(){return a}});var s=n(53907),i=n(18112);function a(t,e,n){return(0,s.L)(n?.in||t,+(0,i.Q)(t)+e)}},23459:function(t,e,n){n.d(e,{z:function(){return a}});var s=n(53907),i=n(18112);function a(t,e,n){const a=(0,i.Q)(t,n?.in);if(isNaN(e))return(0,s.L)(n?.in||t,NaN);if(!e)return a;const o=a.getDate(),c=(0,s.L)(n?.in||t,a.getTime());c.setMonth(a.getMonth()+e+1,0);return o>=c.getDate()?c:(a.setFullYear(c.getFullYear(),c.getMonth(),o),a)}},2425:function(t,e,n){n.d(e,{U:function(){return i}});var s=n(18112);function i(t,e){const n=+(0,s.Q)(t)-+(0,s.Q)(e);return n<0?-1:n>0?1:n}},14276:function(t,e,n){n.d(e,{_:function(){return i}});var s=n(18112);function i(t,e){return+(0,s.Q)(t)-+(0,s.Q)(e)}},6542:function(t,e,n){n.d(e,{d:()=>c});var s=n("18492"),i=n("2425");function a(t,e,n){const[i,a]=(0,s.d)(n?.in,t,e);return 12*(i.getFullYear()-a.getFullYear())+(i.getMonth()-a.getMonth())}var o=n("3938");function c(t,e,n){const[c,r,u]=(0,s.d)(n?.in,t,t,e),d=(0,i.U)(r,u),h=Math.abs(a(r,u));if(h<1)return 0;1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-d*h);let f=(0,i.U)(r,u)===-d;(0,o.h)(c)&&1===h&&1===(0,i.U)(c,u)&&(f=!1);const l=d*(h-+f);return 0===l?0:l}},96500:function(t,e,n){n.d(e,{i:function(){return i}});var s=n(18112);function i(t,e){const n=(0,s.Q)(t,e?.in);return n.setHours(23,59,59,999),n}},2621:function(t,e,n){n.d(e,{V:function(){return i}});var s=n(18112);function i(t,e){const n=(0,s.Q)(t,e?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}},86319:function(t,e,n){n.d(e,{b:function(){return i}});var s=n(18112);function i(t,e){return 1===(0,s.Q)(t,e?.in).getDate()}},3938:function(t,e,n){n.d(e,{h:function(){return o}});var s=n(96500),i=n(2621),a=n(18112);function o(t,e){const n=(0,a.Q)(t,e?.in);return+(0,s.i)(n,e)==+(0,i.V)(n,e)}}};
//# sourceMappingURL=34321.10e8ef1574845b06.js.map