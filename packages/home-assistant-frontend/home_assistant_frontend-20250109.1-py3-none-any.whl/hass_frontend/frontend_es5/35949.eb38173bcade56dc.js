"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["35949"],{88935:function(e,t,n){n.d(t,{Cu:function(){return g},Ex:function(){return o},R9:function(){return l},_T:function(){return u},fC:function(){return c},gK:function(){return p},lN:function(){return m},nJ:function(){return y},tB:function(){return f},td:function(){return d},uV:function(){return h},xO:function(){return v},xr:function(){return _}});n(71695),n(40251),n(92519),n(42179),n(89256),n(24931),n(88463),n(57449),n(19814),n(39527),n(99790),n(67670),n(13334),n(47021);var a=n(83523),i=n(71857),s=n(72344),r=n(22274);let d=function(e){return e.THREAD="thread",e.WIFI="wifi",e.ETHERNET="ethernet",e.UNKNOWN="unknown",e}({});const o=e=>{var t;return null===(t=e.auth.external)||void 0===t?void 0:t.config.canCommissionMatter},c=async e=>{if((0,s.p)(e,"thread")){const t=(await(0,r.r9)(e)).datasets.find((e=>e.preferred));if(t)return e.auth.external.fireMessage({type:"matter/commission",payload:{active_operational_dataset:(await(0,r.EM)(e,t.dataset_id)).tlv,border_agent_id:t.preferred_border_agent_id,mac_extended_address:t.preferred_extended_address,extended_pan_id:t.extended_pan_id}})}return e.auth.external.fireMessage({type:"matter/commission"})},l=(e,t)=>{let n;const s=(0,i.q4)(e.connection,(e=>{if(!n)return void(n=new Set(Object.values(e).filter((e=>e.identifiers.find((e=>"matter"===e[0])))).map((e=>e.id))));const i=Object.values(e).filter((e=>e.identifiers.find((e=>"matter"===e[0]))&&!n.has(e.id)));i.length&&(s(),n=void 0,null==t||t(),(0,a.c)(`/config/devices/device/${i[0].id}`))}));return()=>{s(),n=void 0}},u=(e,t)=>e.callWS({type:"matter/commission",code:t}),p=(e,t)=>e.callWS({type:"matter/commission_on_network",pin:t}),_=(e,t,n)=>e.callWS({type:"matter/set_wifi_credentials",network_name:t,password:n}),f=(e,t)=>e.callWS({type:"matter/set_thread",thread_operation_dataset:t}),h=(e,t)=>e.callWS({type:"matter/node_diagnostics",device_id:t}),v=(e,t)=>e.callWS({type:"matter/ping_node",device_id:t}),m=(e,t)=>e.callWS({type:"matter/open_commissioning_window",device_id:t}),y=(e,t,n)=>e.callWS({type:"matter/remove_matter_fabric",device_id:t,fabric_index:n}),g=(e,t)=>e.callWS({type:"matter/interview_node",device_id:t})},22274:function(e,t,n){n.d(t,{EM:function(){return r},NO:function(){return l},Xt:function(){return o},h:function(){return i},jK:function(){return d},lR:function(){return c},r9:function(){return s}});class a{constructor(){this.routers=void 0,this.routers={}}processEvent(e){return"router_discovered"===e.type?this.routers[e.key]=e.data:"router_removed"===e.type&&delete this.routers[e.key],Object.values(this.routers)}}const i=(e,t)=>{const n=new a;return e.connection.subscribeMessage((e=>t(n.processEvent(e))),{type:"thread/discover_routers"})},s=e=>e.callWS({type:"thread/list_datasets"}),r=(e,t)=>e.callWS({type:"thread/get_dataset_tlv",dataset_id:t}),d=(e,t,n)=>e.callWS({type:"thread/add_dataset_tlv",source:t,tlv:n}),o=(e,t)=>e.callWS({type:"thread/delete_dataset",dataset_id:t}),c=(e,t)=>e.callWS({type:"thread/set_preferred_dataset",dataset_id:t}),l=(e,t,n,a)=>e.callWS({type:"thread/set_preferred_border_agent",dataset_id:t,border_agent_id:n,extended_address:a})},17547:function(e,t,n){n.r(t),n.d(t,{HaDeviceInfoMatter:function(){return v}});var a=n(61701),i=n(72621),s=(n(71695),n(40251),n(13334),n(47021),n(57243)),r=n(50778),d=(n(41307),n(88935)),o=(n(2060),n(7285),n(6736)),c=n(28008);let l,u,p,_,f,h=e=>e,v=(0,a.Z)([(0,r.Mo)("ha-device-info-matter")],(function(e,t){class n extends t{constructor(...t){super(...t),e(this)}}return{F:n,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"device",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_nodeDiagnostics",value:void 0},{kind:"method",key:"willUpdate",value:function(e){(0,i.Z)(n,"willUpdate",this,3)([e]),e.has("device")&&this._fetchNodeDetails()}},{kind:"method",key:"_fetchNodeDetails",value:async function(){if(this.device&&null===this.device.via_device_id)try{this._nodeDiagnostics=await(0,d.uV)(this.hass,this.device.id)}catch(e){this._nodeDiagnostics=void 0}}},{kind:"method",key:"render",value:function(){return this._nodeDiagnostics?(0,s.dy)(l||(l=h` <ha-expansion-panel .header="${0}"> <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> ${0} ${0} <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> </ha-expansion-panel> `),this.hass.localize("ui.panel.config.matter.device_info.device_info"),this.hass.localize("ui.panel.config.matter.device_info.node_id"),this._nodeDiagnostics.node_id,this.hass.localize("ui.panel.config.matter.device_info.network_type"),this.hass.localize(`ui.panel.config.matter.network_type.${this._nodeDiagnostics.network_type}`),this.hass.localize("ui.panel.config.matter.device_info.node_type"),this.hass.localize(`ui.panel.config.matter.node_type.${this._nodeDiagnostics.node_type}`),this._nodeDiagnostics.network_name?(0,s.dy)(u||(u=h` <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> `),this.hass.localize("ui.panel.config.matter.device_info.network_name"),this._nodeDiagnostics.network_name):s.Ld,this._nodeDiagnostics.mac_address?(0,s.dy)(p||(p=h` <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> `),this.hass.localize("ui.panel.config.matter.device_info.mac_address"),this._nodeDiagnostics.mac_address):s.Ld,this.hass.localize("ui.panel.config.matter.device_info.ip_adresses"),this._nodeDiagnostics.ip_adresses.map((e=>(0,s.dy)(_||(_=h`${0}<br>`),e)))):s.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return[c.Qx,(0,s.iv)(f||(f=h`h4{margin-bottom:4px}div{word-break:break-all;margin-top:2px}.row{display:flex;justify-content:space-between;padding-bottom:4px}.value{text-align:right}ha-expansion-panel{margin:8px -16px 0;--expansion-panel-summary-padding:0 16px;--expansion-panel-content-padding:0 16px;--ha-card-border-radius:0px}`))]}}]}}),(0,o.f)(s.oi))}}]);
//# sourceMappingURL=35949.eb38173bcade56dc.js.map