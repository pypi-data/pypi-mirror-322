"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["19551"],{50875:function(e,t,i){i.d(t,{Eu:function(){return s},hZ:function(){return n}});var a=i(11259);const o=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function s(e){return o[e%o.length]}function n(e,t){const i=t.getPropertyValue(`--graph-color-${e+1}`)||s(e);return(0,a.Rq)(i)}},84892:function(e,t,i){i.a(e,(async function(e,a){try{i.d(t,{O:function(){return _}});var o=i(61701),s=(i(19083),i(71695),i(92745),i(61893),i(40251),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(39527),i(41360),i(13334),i(47021),i(57243)),n=i(50778),d=i(27486),r=i(50875),l=i(72344),c=i(36522),h=i(50602),u=i(17705),v=(i(29937),i(18520)),b=e([h]);h=(b.then?(await b)():b)[0];let f,p,m,y,k,g=e=>e;const _={mean:"mean",min:"min",max:"max",sum:"sum",state:"sum",change:"sum"};(0,o.Z)([(0,n.Mo)("statistics-chart")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"statisticsData",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"metadata",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Array})],key:"statTypes",value(){return["sum","min","mean","max"]}},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"chartType",value(){return"line"}},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Number})],key:"minYAxis",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Number})],key:"maxYAxis",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"fit-y-data",type:Boolean})],key:"fitYData",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({attribute:"hide-legend",type:Boolean})],key:"hideLegend",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({attribute:"logarithmic-scale",type:Boolean})],key:"logarithmicScale",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({attribute:"is-loading-data",type:Boolean})],key:"isLoadingData",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({attribute:"click-for-more-info",type:Boolean})],key:"clickForMoreInfo",value(){return!0}},{kind:"field",decorators:[(0,n.Cb)()],key:"period",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_chartData",value(){return{datasets:[]}}},{kind:"field",decorators:[(0,n.SB)()],key:"_chartDatasetExtra",value(){return[]}},{kind:"field",decorators:[(0,n.SB)()],key:"_statisticIds",value(){return[]}},{kind:"field",decorators:[(0,n.SB)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_hiddenStats",value(){return new Set}},{kind:"field",key:"_computedStyle",value:void 0},{kind:"method",key:"shouldUpdate",value:function(e){return e.size>1||!e.has("hass")}},{kind:"method",key:"willUpdate",value:function(e){e.has("legendMode")&&this._hiddenStats.clear(),(!this.hasUpdated||e.has("unit")||e.has("period")||e.has("chartType")||e.has("minYAxis")||e.has("maxYAxis")||e.has("fitYData")||e.has("logarithmicScale")||e.has("hideLegend"))&&this._createOptions(),(e.has("statisticsData")||e.has("statTypes")||e.has("chartType")||e.has("hideLegend")||e.has("_hiddenStats"))&&this._generateData()}},{kind:"method",key:"firstUpdated",value:function(){this._computedStyle=getComputedStyle(this)}},{kind:"method",key:"render",value:function(){return(0,l.p)(this.hass,"history")?this.isLoadingData&&!this.statisticsData?(0,s.dy)(p||(p=g`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.statistics_charts.loading_statistics")):this.statisticsData&&Object.keys(this.statisticsData).length?(0,s.dy)(y||(y=g` <ha-chart-base external-hidden .hass="${0}" .data="${0}" .extraData="${0}" .options="${0}" .chartType="${0}" @dataset-hidden="${0}" @dataset-unhidden="${0}"></ha-chart-base> `),this.hass,this._chartData,this._chartDatasetExtra,this._chartOptions,this.chartType,this._datasetHidden,this._datasetUnhidden):(0,s.dy)(m||(m=g`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.statistics_charts.no_statistics_found")):(0,s.dy)(f||(f=g`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.history_charts.history_disabled"))}},{kind:"method",key:"_datasetHidden",value:function(e){e.stopPropagation(),this._hiddenStats.add(this._statisticIds[e.detail.index]),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_datasetUnhidden",value:function(e){e.stopPropagation(),this._hiddenStats.delete(this._statisticIds[e.detail.index]),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_createOptions",value:function(e){this._chartOptions={parsing:!1,interaction:{mode:"nearest",axis:"x"},scales:{x:{type:"time",adapters:{date:{locale:this.hass.locale,config:this.hass.config}},ticks:{source:"bar"===this.chartType?"data":void 0,maxRotation:0,sampleSize:5,autoSkipPadding:20,major:{enabled:!0},font:e=>e.tick&&e.tick.major?{weight:"bold"}:{}},time:{tooltipFormat:"datetime",unit:"bar"===this.chartType&&this.period&&["hour","day","week","month"].includes(this.period)?this.period:void 0}},y:{beginAtZero:"bar"===this.chartType,ticks:{maxTicksLimit:7},title:{display:e||this.unit,text:e||this.unit},type:this.logarithmicScale?"logarithmic":"linear",min:this.fitYData?null:this.minYAxis,max:this.fitYData?null:this.maxYAxis}},plugins:{tooltip:{callbacks:{label:e=>`${e.dataset.label}: ${(0,h.uf)(e.parsed.y,this.hass.locale,(0,h.l4)(void 0,this.hass.entities[this._statisticIds[e.datasetIndex]]))} ${e.dataset.unit||""}`}},filler:{propagate:!0},legend:{display:!this.hideLegend,labels:{usePointStyle:!0}}},elements:{line:{tension:.4,cubicInterpolationMode:"monotone",borderWidth:1.5},bar:{borderWidth:1.5,borderRadius:4},point:{hitRadius:50}},locale:(0,h.Hd)(this.hass.locale),onClick:e=>{if(!this.clickForMoreInfo||(0,v.n)(e))return;const t=e.chart,i=t.getElementsAtEventForMode(e,"nearest",{intersect:!0},!0);if(i.length){const e=i[0],a=this._statisticIds[e.datasetIndex];(0,u.Hs)(a)||((0,c.B)(this,"hass-more-info",{entityId:a}),t.canvas.dispatchEvent(new Event("mouseout")))}}}}},{kind:"field",key:"_getStatisticsMetaData",value(){return(0,d.Z)((async e=>{const t=await(0,u.Py)(this.hass,e),i={};return t.forEach((e=>{i[e.statistic_id]=e})),i}))}},{kind:"method",key:"_generateData",value:async function(){if(!this.statisticsData)return;const e=this.metadata||await this._getStatisticsMetaData(Object.keys(this.statisticsData));let t=0;const i=Object.entries(this.statisticsData),a=[],o=[],s=[];let n,d;if(0===i.length)return;n=this.endTime||new Date(Math.max(...i.map((([e,t])=>new Date(t[t.length-1].start).getTime())))),n>new Date&&(n=new Date);const l=this.names||{};i.forEach((([i,n])=>{const c=null==e?void 0:e[i];let h=l[i];void 0===h&&(h=(0,u.Kd)(this.hass,i,c)),this.unit||(void 0===d?d=(0,u.dO)(this.hass,i,c):null!==d&&d!==(0,u.dO)(this.hass,i,c)&&(d=null));let v,b=null;const f=[],p=[],m=(e,t,i)=>{i&&(e>t||(f.forEach(((t,a)=>{"line"===this.chartType&&v&&b&&v.getTime()!==e.getTime()&&(t.data.push({x:v.getTime(),y:b[a]}),t.data.push({x:v.getTime(),y:null})),t.data.push({x:e.getTime(),y:i[a]})})),b=i,v=t))},y=(0,r.hZ)(t,this._computedStyle||getComputedStyle(this));t++;const k=[],g=this.statTypes.includes("mean")&&(0,u.Nw)(n,"mean"),_=g||this.statTypes.includes("min")&&(0,u.Nw)(n,"min")&&this.statTypes.includes("max")&&(0,u.Nw)(n,"max"),x=_?[...this.statTypes].sort(((e,t)=>"min"===e||"max"===t?-1:"max"===e||"min"===t?1:0)):this.statTypes;let C=!1;x.forEach((e=>{if((0,u.Nw)(n,e)){const t=_&&("min"===e||"max"===e);if(!this.hideLegend){const t=g?"mean"===e:!1===C;p.push({legend_label:h,show_legend:t}),C=C||t}k.push(e),f.push({label:h?`${h} (${this.hass.localize(`ui.components.statistics_charts.statistic_types.${e}`)})\n            `:this.hass.localize(`ui.components.statistics_charts.statistic_types.${e}`),fill:!!_&&("min"===e&&g?"+1":"max"===e&&"-1"),borderColor:t&&g?y+(this.hideLegend?"00":"7F"):y,backgroundColor:t?y+"3F":y+"7F",pointRadius:0,hidden:!this.hideLegend&&this._hiddenStats.has(i),data:[],unit:null==c?void 0:c.unit_of_measurement,band:t}),s.push(i)}}));let $=null,O=null;n.forEach((e=>{const t=new Date(e.start);if($===t)return;$=t;const i=[];k.forEach((t=>{var a;let o;"sum"===t?null==O?(o=0,O=e.sum):o=(e.sum||0)-O:o=e[t],i.push(null!==(a=o)&&void 0!==a?a:null)})),m(t,new Date(e.end),i)})),Array.prototype.push.apply(a,f),Array.prototype.push.apply(o,p)})),d&&this._createOptions(d),this._chartData={datasets:a},this._chartDatasetExtra=o,this._statisticIds=s}},{kind:"get",static:!0,key:"styles",value:function(){return(0,s.iv)(k||(k=g`:host{display:block;min-height:60px}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}`))}}]}}),s.oi);a()}catch(f){a(f)}}))},94279:function(e,t,i){i.a(e,(async function(e,t){try{var a=i(61701),o=i(72621),s=(i(71695),i(40251),i(39527),i(41360),i(47021),i(2394)),n=i(28737),d=i(43631),r=i(57243),l=i(50778),c=i(20552),h=i(36522),u=(i(23334),i(7285),i(83166),e([n]));n=(u.then?(await u)():u)[0];let v,b,f,p,m,y,k=e=>e;const g="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",_="M7,10L12,15L17,10H7Z",x="M7,15L12,10L17,15H7Z";(0,d.hC)("vaadin-combo-box-item",(0,r.iv)(v||(v=k`:host{padding:0!important}:host([focused]:not([disabled])){background-color:rgba(var(--rgb-primary-text-color,0,0,0),.12)}:host([selected]:not([disabled])){background-color:transparent;color:var(--mdc-theme-primary);--mdc-ripple-color:var(--mdc-theme-primary);--mdc-theme-text-primary-on-background:var(--mdc-theme-primary)}:host([selected]:not([disabled])):before{background-color:var(--mdc-theme-primary);opacity:.12;content:"";position:absolute;top:0;left:0;width:100%;height:100%}:host([selected][focused]:not([disabled])):before{opacity:.24}:host(:hover:not([disabled])){background-color:transparent}[part=content]{width:100%}[part=checkmark]{display:none}`)));(0,a.Z)([(0,l.Mo)("ha-combo-box")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"validationMessage",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:"error-message"})],key:"errorMessage",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"invalid",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"icon",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"items",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"filteredItems",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"dataProvider",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:"allow-custom-value",type:Boolean})],key:"allowCustomValue",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({attribute:"item-value-path"})],key:"itemValuePath",value(){return"value"}},{kind:"field",decorators:[(0,l.Cb)({attribute:"item-label-path"})],key:"itemLabelPath",value(){return"label"}},{kind:"field",decorators:[(0,l.Cb)({attribute:"item-id-path"})],key:"itemIdPath",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"renderer",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"required",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({type:Boolean,reflect:!0})],key:"opened",value(){return!1}},{kind:"field",decorators:[(0,l.IO)("vaadin-combo-box-light",!0)],key:"_comboBox",value:void 0},{kind:"field",decorators:[(0,l.IO)("ha-textfield",!0)],key:"_inputElement",value:void 0},{kind:"field",key:"_overlayMutationObserver",value:void 0},{kind:"field",key:"_bodyMutationObserver",value:void 0},{kind:"method",key:"open",value:async function(){var e;await this.updateComplete,null===(e=this._comboBox)||void 0===e||e.open()}},{kind:"method",key:"focus",value:async function(){var e,t;await this.updateComplete,await(null===(e=this._inputElement)||void 0===e?void 0:e.updateComplete),null===(t=this._inputElement)||void 0===t||t.focus()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(i,"disconnectedCallback",this,3)([]),this._overlayMutationObserver&&(this._overlayMutationObserver.disconnect(),this._overlayMutationObserver=void 0),this._bodyMutationObserver&&(this._bodyMutationObserver.disconnect(),this._bodyMutationObserver=void 0)}},{kind:"get",key:"selectedItem",value:function(){return this._comboBox.selectedItem}},{kind:"method",key:"setInputValue",value:function(e){this._comboBox.value=e}},{kind:"method",key:"render",value:function(){var e;return(0,r.dy)(b||(b=k` <vaadin-combo-box-light .itemValuePath="${0}" .itemIdPath="${0}" .itemLabelPath="${0}" .items="${0}" .value="${0}" .filteredItems="${0}" .dataProvider="${0}" .allowCustomValue="${0}" .disabled="${0}" .required="${0}" ${0} @opened-changed="${0}" @filter-changed="${0}" @value-changed="${0}" attr-for-value="value"> <ha-textfield label="${0}" placeholder="${0}" ?disabled="${0}" ?required="${0}" validationMessage="${0}" .errorMessage="${0}" class="input" autocapitalize="none" autocomplete="off" autocorrect="off" input-spellcheck="false" .suffix="${0}" .icon="${0}" .invalid="${0}" .helper="${0}" helperPersistent> <slot name="icon" slot="leadingIcon"></slot> </ha-textfield> ${0} <ha-svg-icon role="button" tabindex="-1" aria-label="${0}" aria-expanded="${0}" class="toggle-button" .path="${0}" @click="${0}"></ha-svg-icon> </vaadin-combo-box-light> `),this.itemValuePath,this.itemIdPath,this.itemLabelPath,this.items,this.value||"",this.filteredItems,this.dataProvider,this.allowCustomValue,this.disabled,this.required,(0,s.t)(this.renderer||this._defaultRowRenderer),this._openedChanged,this._filterChanged,this._valueChanged,(0,c.o)(this.label),(0,c.o)(this.placeholder),this.disabled,this.required,(0,c.o)(this.validationMessage),this.errorMessage,(0,r.dy)(f||(f=k`<div style="width:28px" role="none presentation"></div>`)),this.icon,this.invalid,this.helper,this.value?(0,r.dy)(p||(p=k`<ha-svg-icon role="button" tabindex="-1" aria-label="${0}" class="clear-button" .path="${0}" @click="${0}"></ha-svg-icon>`),(0,c.o)(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.clear")),g,this._clearValue):"",(0,c.o)(this.label),this.opened?"true":"false",this.opened?x:_,this._toggleOpen)}},{kind:"field",key:"_defaultRowRenderer",value(){return e=>(0,r.dy)(m||(m=k`<ha-list-item> ${0} </ha-list-item>`),this.itemLabelPath?e[this.itemLabelPath]:e)}},{kind:"method",key:"_clearValue",value:function(e){e.stopPropagation(),(0,h.B)(this,"value-changed",{value:void 0})}},{kind:"method",key:"_toggleOpen",value:function(e){var t,i;this.opened?(null===(t=this._comboBox)||void 0===t||t.close(),e.stopPropagation()):null===(i=this._comboBox)||void 0===i||i.inputElement.focus()}},{kind:"method",key:"_openedChanged",value:function(e){e.stopPropagation();const t=e.detail.value;if(setTimeout((()=>{this.opened=t}),0),(0,h.B)(this,"opened-changed",{value:e.detail.value}),t){const e=document.querySelector("vaadin-combo-box-overlay");e&&this._removeInert(e),this._observeBody()}else{var i;null===(i=this._bodyMutationObserver)||void 0===i||i.disconnect(),this._bodyMutationObserver=void 0}}},{kind:"method",key:"_observeBody",value:function(){"MutationObserver"in window&&!this._bodyMutationObserver&&(this._bodyMutationObserver=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&this._removeInert(e)})),e.removedNodes.forEach((e=>{var t;"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&(null===(t=this._overlayMutationObserver)||void 0===t||t.disconnect(),this._overlayMutationObserver=void 0)}))}))})),this._bodyMutationObserver.observe(document.body,{childList:!0}))}},{kind:"method",key:"_removeInert",value:function(e){var t;if(e.inert)return e.inert=!1,null===(t=this._overlayMutationObserver)||void 0===t||t.disconnect(),void(this._overlayMutationObserver=void 0);"MutationObserver"in window&&!this._overlayMutationObserver&&(this._overlayMutationObserver=new MutationObserver((e=>{e.forEach((e=>{if("inert"===e.attributeName){const i=e.target;var t;if(i.inert)null===(t=this._overlayMutationObserver)||void 0===t||t.disconnect(),this._overlayMutationObserver=void 0,i.inert=!1}}))})),this._overlayMutationObserver.observe(e,{attributes:!0}))}},{kind:"method",key:"_filterChanged",value:function(e){e.stopPropagation(),(0,h.B)(this,"filter-changed",{value:e.detail.value})}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation(),this.allowCustomValue||(this._comboBox._closeOnBlurIsPrevented=!0);const t=e.detail.value;t!==this.value&&(0,h.B)(this,"value-changed",{value:t||void 0})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,r.iv)(y||(y=k`:host{display:block;width:100%}vaadin-combo-box-light{position:relative;--vaadin-combo-box-overlay-max-height:calc(45vh - 56px)}ha-textfield{width:100%}ha-textfield>ha-icon-button{--mdc-icon-button-size:24px;padding:2px;color:var(--secondary-text-color)}ha-svg-icon{color:var(--input-dropdown-icon-color);position:absolute;cursor:pointer}.toggle-button{right:12px;top:-10px;inset-inline-start:initial;inset-inline-end:12px;direction:var(--direction)}:host([opened]) .toggle-button{color:var(--primary-color)}.clear-button{--mdc-icon-size:20px;top:-7px;right:36px;inset-inline-start:initial;inset-inline-end:36px;direction:var(--direction)}`))}}]}}),r.oi);t()}catch(v){t(v)}}))},73192:function(e,t,i){i.d(t,{R:function(){return a}});i(19083),i(61006);const a=(e,t)=>`https://${e.config.version.includes("b")?"rc":e.config.version.includes("dev")?"next":"www"}.home-assistant.io${t}`}}]);
//# sourceMappingURL=19551.b4ec4ff9e0f46b92.js.map