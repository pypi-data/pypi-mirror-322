"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["40662"],{66244:function(e,o,t){t.a(e,(async function(e,o){try{var a=t(61701),i=(t(19083),t(71695),t(40251),t(47021),t(57243)),r=t(50778),s=t(36522),n=(t(97206),t(78951)),l=t(90933),d=t(56785),c=t(76131),u=e([n]);n=(u.then?(await u)():u)[0];let h,p=e=>e;const g="M20,6A2,2 0 0,1 22,8V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H10L12,6H20M10.75,13H14V17H16V13H19.25L15,8.75";(0,a.Z)([(0,r.Mo)("hassio-upload-backup")],(function(e,o){return{F:class extends o{constructor(...o){super(...o),e(this)}},d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"localize",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"value",value(){return null}},{kind:"field",decorators:[(0,r.SB)()],key:"_uploading",value(){return!1}},{kind:"method",key:"render",value:function(){var e,o,t;return(0,i.dy)(h||(h=p` <ha-file-upload .hass="${0}" .uploading="${0}" .icon="${0}" accept="application/x-tar" .label="${0}" .supports="${0}" .secondary="${0}" @file-picked="${0}" @files-cleared="${0}"></ha-file-upload> `),this.hass,this._uploading,g,(null===(e=this.localize)||void 0===e?void 0:e.call(this,"ui.panel.page-onboarding.restore.upload_backup"))||"Upload backup",(null===(o=this.localize)||void 0===o?void 0:o.call(this,"ui.panel.page-onboarding.restore.upload_supports"))||"Supports .TAR files",(null===(t=this.localize)||void 0===t?void 0:t.call(this,"ui.panel.page-onboarding.restore.upload_drop"))||"Or drop your file here",this._uploadFile,this._clear)}},{kind:"method",key:"_clear",value:function(){this.value=null,(0,s.B)(this,"backup-cleared")}},{kind:"method",key:"_uploadFile",value:async function(e){const o=e.detail.files[0];if(["application/x-tar"].includes(o.type)){this._uploading=!0;try{const e=await(0,l.p_)(this.hass,o);(0,s.B)(this,"backup-uploaded",{backup:e.data})}catch(t){(0,c.showAlertDialog)(this,{title:"Upload failed",text:(0,d.js)(t),confirmText:"ok"})}finally{this._uploading=!1}}else(0,c.showAlertDialog)(this,{title:"Unsupported file format",text:"Please choose a Home Assistant backup file (.tar)",confirmText:"ok"})}}]}}),i.oi);o()}catch(h){o(h)}}))},63582:function(e,o,t){t.d(o,{Y:function(){return i}});t(71695),t(40251),t(47021);var a=t(36522);const i=(e,o)=>{(0,a.B)(e,"show-dialog",{dialogTag:"dialog-hassio-backup",dialogImport:()=>Promise.all([t.e("46379"),t.e("66031"),t.e("91552"),t.e("78456"),t.e("72206"),t.e("56898"),t.e("29570"),t.e("7010"),t.e("7442"),t.e("21736"),t.e("21602"),t.e("81258")]).then(t.bind(t,38506)),dialogParams:o})}},45061:function(e,o,t){t.d(o,{K:function(){return a}});const a=e=>{switch(e.language){case"cs":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},69546:function(e,o,t){var a=t(61701),i=t(72621),r=(t(19083),t(71695),t(92745),t(23669),t(19134),t(61006),t(39527),t(41360),t(47021),t(57243)),s=t(50778),n=t(35359);let l,d,c=e=>e;(0,a.Z)([(0,s.Mo)("ha-ansi-to-html")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,s.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,attribute:"wrap-disabled"})],key:"wrapDisabled",value(){return!1}},{kind:"field",decorators:[(0,s.IO)("pre")],key:"_pre",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_filter",value(){return""}},{kind:"method",key:"render",value:function(){return(0,r.dy)(l||(l=c`<pre class="${0}"></pre>`),(0,n.$)({wrap:!this.wrapDisabled}))}},{kind:"method",key:"firstUpdated",value:function(e){(0,i.Z)(t,"firstUpdated",this,3)([e]),this.content&&this.parseTextToColoredPre(this.content)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,r.iv)(d||(d=c`pre{overflow-x:auto;margin:0}pre.wrap{white-space:pre-wrap;overflow-wrap:break-word}.bold{font-weight:700}.italic{font-style:italic}.underline{text-decoration:underline}.strikethrough{text-decoration:line-through}.underline.strikethrough{text-decoration:underline line-through}.fg-red{color:var(--error-color)}.fg-green{color:var(--success-color)}.fg-yellow{color:var(--warning-color)}.fg-blue{color:var(--info-color)}.fg-magenta{color:#762671}.fg-cyan{color:#2cb5e9}.fg-white{color:#ccc}.bg-black{background-color:#000}.bg-red{background-color:var(--error-color)}.bg-green{background-color:var(--success-color)}.bg-yellow{background-color:var(--warning-color)}.bg-blue{background-color:var(--info-color)}.bg-magenta{background-color:#762671}.bg-cyan{background-color:#2cb5e9}.bg-white{background-color:#ccc}::highlight(search-results){background-color:var(--primary-color);color:var(--text-primary-color)}`))}},{kind:"method",key:"parseLinesToColoredPre",value:function(e,o=!1){for(const t of e)this.parseLineToColoredPre(t,o)}},{kind:"method",key:"parseLineToColoredPre",value:function(e,o=!1){const t=document.createElement("div"),a=/\x1b(?:\[(.*?)[@-~]|\].*?(?:\x07|\x1b\\))/g;let i=0;const r={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null},s=e=>{const o=document.createElement("span");r.bold&&o.classList.add("bold"),r.italic&&o.classList.add("italic"),r.underline&&o.classList.add("underline"),r.strikethrough&&o.classList.add("strikethrough"),null!==r.foregroundColor&&o.classList.add(`fg-${r.foregroundColor}`),null!==r.backgroundColor&&o.classList.add(`bg-${r.backgroundColor}`),o.appendChild(document.createTextNode(e)),t.appendChild(o)};let n;for(;null!==(n=a.exec(e));){const o=n.index,t=e.substring(i,o);t&&s(t),i=o+n[0].length,void 0!==n[1]&&n[1].split(";").forEach((e=>{switch(parseInt(e,10)){case 0:r.bold=!1,r.italic=!1,r.underline=!1,r.strikethrough=!1,r.foregroundColor=null,r.backgroundColor=null;break;case 1:r.bold=!0;break;case 3:r.italic=!0;break;case 4:r.underline=!0;break;case 9:r.strikethrough=!0;break;case 22:r.bold=!1;break;case 23:r.italic=!1;break;case 24:r.underline=!1;break;case 29:r.strikethrough=!1;break;case 30:case 39:r.foregroundColor=null;break;case 31:r.foregroundColor="red";break;case 32:r.foregroundColor="green";break;case 33:r.foregroundColor="yellow";break;case 34:r.foregroundColor="blue";break;case 35:r.foregroundColor="magenta";break;case 36:r.foregroundColor="cyan";break;case 37:r.foregroundColor="white";break;case 40:r.backgroundColor="black";break;case 41:r.backgroundColor="red";break;case 42:r.backgroundColor="green";break;case 43:r.backgroundColor="yellow";break;case 44:r.backgroundColor="blue";break;case 45:r.backgroundColor="magenta";break;case 46:r.backgroundColor="cyan";break;case 47:r.backgroundColor="white";break;case 49:r.backgroundColor=null}}))}const l=e.substring(i);var d,c;(l&&s(l),o)?(null===(d=this._pre)||void 0===d||d.prepend(t),t.animate([{opacity:0},{opacity:1}],{duration:500})):null===(c=this._pre)||void 0===c||c.appendChild(t);this._filter&&this.filterLines(this._filter)}},{kind:"method",key:"parseTextToColoredPre",value:function(e){const o=e.split("\n");for(const t of o)this.parseLineToColoredPre(t)}},{kind:"method",key:"filterLines",value:function(e){var o;this._filter=e;const t=(null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelectorAll("div"))||[];let a=0;if(e){const o=[];t.forEach((t=>{var i;if(null!==(i=t.textContent)&&void 0!==i&&i.toLowerCase().includes(e.toLowerCase())){if(t.style.display="",a++,CSS.highlights&&null!==t.firstChild&&t.textContent){t.querySelectorAll("span").forEach((t=>{const a=t.textContent.toLowerCase(),i=[];let r=0;for(;r<a.length;){const o=a.indexOf(e.toLowerCase(),r);if(-1===o)break;i.push(o),r=o+e.length}i.forEach((a=>{const i=new Range;i.setStart(t.firstChild,a),i.setEnd(t.firstChild,a+e.length),o.push(i)}))}))}}else t.style.display="none"})),CSS.highlights&&CSS.highlights.set("search-results",new Highlight(...o))}else t.forEach((e=>{e.style.display=""})),a=t.length,CSS.highlights&&CSS.highlights.delete("search-results");return!!a}},{kind:"method",key:"clear",value:function(){this._pre&&(this._pre.innerHTML="")}}]}}),r.oi)},97206:function(e,o,t){var a=t(61701),i=t(72621),r=(t(71695),t(47021),t(58795)),s=t(57243),n=t(50778);let l,d=e=>e;(0,a.Z)([(0,n.Mo)("ha-circular-progress")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:"aria-label",type:String})],key:"ariaLabel",value(){return"Loading"}},{kind:"field",decorators:[(0,n.Cb)()],key:"size",value:void 0},{kind:"method",key:"updated",value:function(e){if((0,i.Z)(t,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"field",static:!0,key:"styles",value(){return[...(0,i.Z)(t,"styles",this),(0,s.iv)(l||(l=d`:host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}`))]}}]}}),r.B)},78951:function(e,o,t){t.a(e,(async function(e,o){try{var a=t(61701),i=t(72621),r=(t(71695),t(13334),t(47021),t(87515)),s=t(57243),n=t(50778),l=t(35359),d=t(36522),c=(t(59826),t(23334),t(45061)),u=t(95262),h=t(90698),p=e([r]);r=(p.then?(await p)():p)[0];let g,k,f,b,v,y,m,$,_=e=>e;const w="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",C="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z";(0,a.Z)([(0,n.Mo)("ha-file-upload")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"accept",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"secondary",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"supports",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Object})],key:"value",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"multiple",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,reflect:!0})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"uploading",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"progress",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"auto-open-file-dialog"})],key:"autoOpenFileDialog",value(){return!1}},{kind:"field",decorators:[(0,n.SB)()],key:"_drag",value(){return!1}},{kind:"field",decorators:[(0,n.IO)("#input")],key:"_input",value:void 0},{kind:"method",key:"firstUpdated",value:function(e){(0,i.Z)(t,"firstUpdated",this,3)([e]),this.autoOpenFileDialog&&this._openFilePicker()}},{kind:"get",key:"_name",value:function(){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return(this.value instanceof FileList?Array.from(this.value):(0,u.r)(this.value)).map((e=>e.name)).join(", ")}},{kind:"method",key:"render",value:function(){var e,o,t,a,i;return(0,s.dy)(g||(g=_` ${0} `),this.uploading?(0,s.dy)(k||(k=_`<div class="container"> <div class="row"> <span class="header">${0}</span> ${0} </div> <mwc-linear-progress .indeterminate="${0}" .progress="${0}"></mwc-linear-progress> </div>`),this.value?null===(e=this.hass)||void 0===e?void 0:e.localize("ui.components.file-upload.uploading_name",{name:this._name}):null===(o=this.hass)||void 0===o?void 0:o.localize("ui.components.file-upload.uploading"),this.progress?(0,s.dy)(f||(f=_`<span class="progress">${0}${0}%</span>`),this.progress,(0,c.K)(this.hass.locale)):"",!this.progress,this.progress?this.progress/100:void 0):(0,s.dy)(b||(b=_`<label for="${0}" class="container ${0}" @drop="${0}" @dragenter="${0}" @dragover="${0}" @dragleave="${0}" @dragend="${0}">${0} <input id="input" type="file" class="file" .accept="${0}" .multiple="${0}" @change="${0}"></label>`),this.value?"":"input",(0,l.$)({dragged:this._drag,multiple:this.multiple,value:Boolean(this.value)}),this._handleDrop,this._handleDragStart,this._handleDragStart,this._handleDragEnd,this._handleDragEnd,this.value?"string"==typeof this.value?(0,s.dy)(y||(y=_`<div class="row"> <div class="value" @click="${0}"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </div> <ha-icon-button @click="${0}" .label="${0}" .path="${0}"></ha-icon-button> </div>`),this._openFilePicker,this.icon||C,this.value,this._clearValue,(null===(i=this.hass)||void 0===i?void 0:i.localize("ui.common.delete"))||"Delete",w):(this.value instanceof FileList?Array.from(this.value):(0,u.r)(this.value)).map((e=>{var o;return(0,s.dy)(m||(m=_`<div class="row"> <div class="value" @click="${0}"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} - ${0} </div> <ha-icon-button @click="${0}" .label="${0}" .path="${0}"></ha-icon-button> </div>`),this._openFilePicker,this.icon||C,e.name,(0,h.d)(e.size),this._clearValue,(null===(o=this.hass)||void 0===o?void 0:o.localize("ui.common.delete"))||"Delete",w)})):(0,s.dy)(v||(v=_`<ha-svg-icon class="big-icon" .path="${0}"></ha-svg-icon> <ha-button unelevated @click="${0}"> ${0} </ha-button> <span class="secondary">${0}</span> <span class="supports">${0}</span>`),this.icon||C,this._openFilePicker,this.label||(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.components.file-upload.label")),this.secondary||(null===(a=this.hass)||void 0===a?void 0:a.localize("ui.components.file-upload.secondary")),this.supports),this.accept,this.multiple,this._handleFilePicked))}},{kind:"method",key:"_openFilePicker",value:function(){var e;null===(e=this._input)||void 0===e||e.click()}},{kind:"method",key:"_handleDrop",value:function(e){var o;e.preventDefault(),e.stopPropagation(),null!==(o=e.dataTransfer)&&void 0!==o&&o.files&&(0,d.B)(this,"file-picked",{files:this.multiple||1===e.dataTransfer.files.length?Array.from(e.dataTransfer.files):[e.dataTransfer.files[0]]}),this._drag=!1}},{kind:"method",key:"_handleDragStart",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!0}},{kind:"method",key:"_handleDragEnd",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!1}},{kind:"method",key:"_handleFilePicked",value:function(e){0!==e.target.files.length&&(this.value=e.target.files,(0,d.B)(this,"file-picked",{files:e.target.files}))}},{kind:"method",key:"_clearValue",value:function(e){e.preventDefault(),this._input.value="",this.value=void 0,(0,d.B)(this,"change"),(0,d.B)(this,"files-cleared")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,s.iv)($||($=_`:host{display:block;height:240px}:host([disabled]){pointer-events:none;color:var(--disabled-text-color)}.container{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border:solid 1px var(--mdc-text-field-idle-line-color,rgba(0,0,0,.42));border-radius:var(--mdc-shape-small,4px);height:100%}label.container{border:dashed 1px var(--mdc-text-field-idle-line-color,rgba(0,0,0,.42));cursor:pointer}:host([disabled]) .container{border-color:var(--disabled-color)}label.dragged{border-color:var(--primary-color)}.dragged:before{position:absolute;top:0;right:0;bottom:0;left:0;background-color:var(--primary-color);content:"";opacity:var(--dark-divider-opacity);pointer-events:none;border-radius:var(--mdc-shape-small,4px)}label.value{cursor:default}label.value.multiple{justify-content:unset;overflow:auto}.highlight{color:var(--primary-color)}.row{display:flex;width:100%;align-items:center;justify-content:space-between;padding:0 16px;box-sizing:border-box}ha-button{margin-bottom:4px}.supports{color:var(--secondary-text-color);font-size:12px}:host([disabled]) .secondary{color:var(--disabled-text-color)}input.file{display:none}.value{cursor:pointer}.value ha-svg-icon{margin-right:8px;margin-inline-end:8px;margin-inline-start:initial}.big-icon{--mdc-icon-size:48px;margin-bottom:8px}ha-button{--mdc-button-outline-color:var(--primary-color);--mdc-icon-button-size:24px}mwc-linear-progress{width:100%;padding:16px;box-sizing:border-box}.header{font-weight:500}.progress{color:var(--secondary-text-color)}button.link{background:0 0;border:none;padding:0;font-size:14px;color:var(--primary-color);text-decoration:underline;cursor:pointer}`))}}]}}),s.oi);o()}catch(g){o(g)}}))},90933:function(e,o,t){t.d(o,{FZ:function(){return n},_P:function(){return s},p_:function(){return l},pi:function(){return d}});t(52247),t(77439),t(40251);var a=t(17803),i=t(11257),r=t(56785);const s=async(e,o)=>e?(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:`/${(0,a.I)(e.config.version,2021,9)?"backups":"snapshots"}/${o}/info`,method:"get"}):(0,r.rY)(await e.callApi("GET",`hassio/${(0,a.I)(e.config.version,2021,9)?"backups":"snapshots"}/${o}/info`)):(0,r.rY)(await(0,i.h9)(fetch(`/api/hassio/backups/${o}/info`,{method:"GET"}))),n=async(e,o)=>{(0,a.I)(e.config.version,2021,2,4)?await e.callWS({type:"supervisor/api",endpoint:"/"+((0,a.I)(e.config.version,2021,9)?`backups/${o}`:`snapshots/${o}/remove`),method:(0,a.I)(e.config.version,2021,9)?"delete":"post"}):await e.callApi("POST",`hassio/${(0,a.I)(e.config.version,2021,9)?"backups":"snapshots"}/${o}/remove`)},l=async(e,o)=>{const t=new FormData;let i;if(t.append("file",o),i=e?await e.fetchWithAuth(`/api/hassio/${(0,a.I)(e.config.version,2021,9)?"backups":"snapshots"}/new/upload`,{method:"POST",body:t}):await fetch("/api/hassio/backups/new/upload",{method:"POST",body:t}),413===i.status)throw new Error("Uploaded backup is too large");if(200!==i.status)throw new Error(`${i.status} ${i.statusText}`);return i.json()},d=async(e,o,t,a,r)=>{e?await e.callApi("POST",`hassio/${r?"snapshots":"backups"}/${t}/restore/${o}`,a):await(0,i.h9)(fetch(`/api/hassio/backups/${t}/restore/${o}`,{method:"POST",body:JSON.stringify(a)}))}},56785:function(e,o,t){t.d(o,{js:function(){return i},rY:function(){return a}});t(19083),t(71695),t(40251),t(92519),t(42179),t(89256),t(24931),t(88463),t(57449),t(19814),t(61006),t(47021),t(17803);const a=e=>e.data,i=e=>"object"==typeof e?"object"==typeof e.body?e.body.message||"Unknown error, see supervisor logs":e.body||e.message||"Unknown error, see supervisor logs":e;new Set([502,503,504])},28728:function(e,o,t){t.a(e,(async function(e,a){try{t.r(o);var i=t(61701),r=t(72621),s=(t(71695),t(40251),t(19134),t(97003),t(47021),t(57243)),n=t(50778),l=t(63582),d=t(66244),c=(t(69546),t(54977),t(99426),t(59826),t(37013)),u=(t(21596),t(17409)),h=t(58776),p=t(83523),g=e([d]);d=(g.then?(await g)():g)[0];let k,f,b,v,y,m=e=>e;(0,i.Z)([(0,n.Mo)("onboarding-restore-backup")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"localize",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"language",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_restoring",value(){return!1}},{kind:"field",decorators:[(0,n.SB)()],key:"_backupSlug",value:void 0},{kind:"method",key:"render",value:function(){return(0,s.dy)(k||(k=m` ${0} <div class="footer"> <ha-button @click="${0}" .disabled="${0}"> ${0} </ha-button> ${0} </div> `),this._restoring?(0,s.dy)(f||(f=m`<h1> ${0} </h1> <ha-alert alert-type="info"> ${0} </ha-alert> <onboarding-loading></onboarding-loading>`),this.localize("ui.panel.page-onboarding.restore.in_progress"),this.localize("ui.panel.page-onboarding.restore.in_progress")):(0,s.dy)(b||(b=m` <h1> ${0} </h1> <hassio-upload-backup @backup-uploaded="${0}" @backup-cleared="${0}" .hass="${0}" .localize="${0}"></hassio-upload-backup>`),this.localize("ui.panel.page-onboarding.restore.header"),this._backupUploaded,this._backupCleared,this.hass,this.localize),this._back,this._restoring,this.localize("ui.panel.page-onboarding.back"),this._backupSlug?(0,s.dy)(v||(v=m`<ha-button @click="${0}" .disabled="${0}"> ${0} </ha-button>`),this._showBackupDialog,this._restoring,this.localize("ui.panel.page-onboarding.restore.restore")):s.Ld)}},{kind:"method",key:"_back",value:function(){(0,p.c)(`${location.pathname}?${(0,h.pc)("page")}`)}},{kind:"method",key:"_backupUploaded",value:function(e){const o=e.detail.backup;this._backupSlug=o.slug,this._showBackupDialog()}},{kind:"method",key:"_backupCleared",value:function(){this._backupSlug=void 0}},{kind:"method",key:"firstUpdated",value:function(e){(0,r.Z)(t,"firstUpdated",this,3)([e])}},{kind:"method",key:"_checkRestoreStatus",value:async function(){if(this._restoring)try{await(0,c.Dq)()}catch(e){"unauthorized"!==e.message&&"not_found"!==e.message||window.location.replace("/")}}},{kind:"method",key:"_scheduleCheckRestoreStatus",value:function(){setTimeout((()=>this._checkRestoreStatus()),1e3)}},{kind:"method",key:"_showBackupDialog",value:function(){(0,l.Y)(this,{slug:this._backupSlug,onboarding:!0,localize:this.localize,onRestoring:()=>{this._restoring=!0,this._scheduleCheckRestoreStatus()}})}},{kind:"get",static:!0,key:"styles",value:function(){return[u.I,(0,s.iv)(y||(y=m`:host{display:flex;flex-direction:column;align-items:center}hassio-upload-backup{width:100%}.footer{display:flex;justify-content:space-between;width:100%}`))]}}]}}),s.oi);a()}catch(k){a(k)}}))},90698:function(e,o,t){t.d(o,{d:function(){return a}});t(49278),t(95078);const a=(e=0,o=2)=>{if(0===e)return"0 Bytes";o=o<0?0:o;const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/1024**t).toFixed(o))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`}}}]);
//# sourceMappingURL=40662.08e39252e076e323.js.map