"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["62807"],{99426:function(e,i,a){a.r(i);var t=a(61701),n=(a(71695),a(47021),a(57243)),s=a(50778),o=a(35359),c=a(36522);a(23334),a(37583);let l,d,r,h,u=e=>e;const p={info:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",warning:"M12,2L1,21H23M12,6L19.53,19H4.47M11,10V14H13V10M11,16V18H13V16",error:"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z",success:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2,4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"};(0,t.Z)([(0,s.Mo)("ha-alert")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)()],key:"title",value(){return""}},{kind:"field",decorators:[(0,s.Cb)({attribute:"alert-type"})],key:"alertType",value(){return"info"}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"dismissable",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"method",key:"render",value:function(){return(0,n.dy)(l||(l=u` <div class="issue-type ${0}" role="alert"> <div class="icon ${0}"> <slot name="icon"> <ha-svg-icon .path="${0}"></ha-svg-icon> </slot> </div> <div class="${0}"> <div class="main-content"> ${0} <slot></slot> </div> <div class="action"> <slot name="action"> ${0} </slot> </div> </div> </div> `),(0,o.$)({[this.alertType]:!0}),this.title?"":"no-title",p[this.alertType],(0,o.$)({content:!0,narrow:this.narrow}),this.title?(0,n.dy)(d||(d=u`<div class="title">${0}</div>`),this.title):n.Ld,this.dismissable?(0,n.dy)(r||(r=u`<ha-icon-button @click="${0}" label="Dismiss alert" .path="${0}"></ha-icon-button>`),this._dismissClicked,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"):n.Ld)}},{kind:"method",key:"_dismissClicked",value:function(){(0,c.B)(this,"alert-dismissed-clicked")}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(h||(h=u`.issue-type{position:relative;padding:8px;display:flex}.issue-type::after{position:absolute;top:0;right:0;bottom:0;left:0;opacity:.12;pointer-events:none;content:"";border-radius:4px}.icon{z-index:1}.icon.no-title{align-self:center}.content{display:flex;justify-content:space-between;align-items:center;width:100%;text-align:var(--float-start)}.content.narrow{flex-direction:column;align-items:flex-end}.action{z-index:1;width:min-content;--mdc-theme-primary:var(--primary-text-color)}.main-content{overflow-wrap:anywhere;word-break:break-word;margin-left:8px;margin-right:0;margin-inline-start:8px;margin-inline-end:0}.title{margin-top:2px;font-weight:700}.action ha-icon-button,.action mwc-button{--mdc-theme-primary:var(--primary-text-color);--mdc-icon-button-size:36px}.issue-type.info>.icon{color:var(--info-color)}.issue-type.info::after{background-color:var(--info-color)}.issue-type.warning>.icon{color:var(--warning-color)}.issue-type.warning::after{background-color:var(--warning-color)}.issue-type.error>.icon{color:var(--error-color)}.issue-type.error::after{background-color:var(--error-color)}.issue-type.success>.icon{color:var(--success-color)}.issue-type.success::after{background-color:var(--success-color)}:host ::slotted(ul){margin:0;padding-inline-start:20px}`))}}]}}),n.oi)},4322:function(e,i,a){a.a(e,(async function(e,i){try{var t=a(61701),n=(a(71695),a(47021),a(57243)),s=a(50778),o=a(36522),c=(a(19993),a(74633),a(42603)),l=a(7111),d=a(26779),r=a(93913),h=e([d]);d=(h.then?(await h)():h)[0];let u,p,g,_=e=>e;const k="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,t.Z)([(0,s.Mo)("ha-backup-config-encryption-key")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"value",value:void 0},{kind:"get",key:"_value",value:function(){var e;return null!==(e=this.value)&&void 0!==e?e:""}},{kind:"method",key:"render",value:function(){return this._value?(0,n.dy)(u||(u=_` <ha-md-list> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> <ha-button slot="end" @click="${0}"> <ha-svg-icon .path="${0}" slot="icon"></ha-svg-icon> ${0} </ha-button> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> <ha-button slot="end" @click="${0}"> ${0} </ha-button> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> <ha-button class="danger" slot="end" @click="${0}"> ${0} </ha-button> </ha-md-list-item> </ha-md-list> `),this.hass.localize("ui.panel.config.backup.encryption_key.download_emergency_kit"),this.hass.localize("ui.panel.config.backup.encryption_key.download_emergency_kit_description"),this._download,k,this.hass.localize("ui.panel.config.backup.encryption_key.download_emergency_kit_action"),this.hass.localize("ui.panel.config.backup.encryption_key.show_encryption_key"),this.hass.localize("ui.panel.config.backup.encryption_key.show_encryption_key_description"),this._show,this.hass.localize("ui.panel.config.backup.encryption_key.show_encryption_key_action"),this.hass.localize("ui.panel.config.backup.encryption_key.change_encryption_key"),this.hass.localize("ui.panel.config.backup.encryption_key.change_encryption_key_description"),this._change,this.hass.localize("ui.panel.config.backup.encryption_key.change_encryption_key_action")):(0,n.dy)(p||(p=_` <ha-md-list> <ha-md-list-item> <span slot="headline"> ${0}</span> <span slot="supporting-text"> ${0} </span> <ha-button slot="end" @click="${0}"> ${0}</ha-button> </ha-md-list-item> </ha-md-list> `),this.hass.localize("ui.panel.config.backup.encryption_key.set_encryption_key"),this.hass.localize("ui.panel.config.backup.encryption_key.set_encryption_key_description"),this._set,this.hass.localize("ui.panel.config.backup.encryption_key.set_encryption_key_action"))}},{kind:"method",key:"_download",value:function(){this._value&&(0,d.VY)(this.hass,this._value)}},{kind:"method",key:"_show",value:function(){(0,r.i)(this,{currentKey:this._value})}},{kind:"method",key:"_change",value:function(){(0,c.k)(this,{currentKey:this._value,saveKey:e=>{(0,o.B)(this,"value-changed",{value:e})}})}},{kind:"method",key:"_set",value:function(){(0,l.S)(this,{saveKey:e=>{(0,o.B)(this,"value-changed",{value:e})}})}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(g||(g=_`ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}ha-md-list-item{--md-item-overflow:visible}.danger{--mdc-theme-primary:var(--error-color)}`))}}]}}),n.oi);i()}catch(u){i(u)}}))},42603:function(e,i,a){a.d(i,{k:function(){return s}});a(71695),a(19423),a(40251),a(47021);var t=a(36522);const n=()=>Promise.all([a.e("7442"),a.e("50437")]).then(a.bind(a,36943)),s=(e,i)=>new Promise((a=>{const s=null==i?void 0:i.cancel,o=null==i?void 0:i.submit;(0,t.B)(e,"show-dialog",{dialogTag:"ha-dialog-change-backup-encryption-key",dialogImport:n,dialogParams:Object.assign(Object.assign({},i),{},{cancel:()=>{a(!1),s&&s()},submit:e=>{a(e),o&&o(e)}})})}))},84941:function(e,i,a){a.d(i,{s:function(){return n}});a(71695),a(40251),a(47021);var t=a(36522);const n=(e,i)=>{(0,t.B)(e,"show-dialog",{dialogTag:"dialog-local-backup-location",dialogImport:()=>Promise.all([a.e("63055"),a.e("35155")]).then(a.bind(a,74136)),dialogParams:i})}},7111:function(e,i,a){a.d(i,{S:function(){return s}});a(71695),a(19423),a(40251),a(47021);var t=a(36522);const n=()=>Promise.all([a.e("7442"),a.e("28501")]).then(a.bind(a,82023)),s=(e,i)=>new Promise((a=>{const s=null==i?void 0:i.cancel,o=null==i?void 0:i.submit;(0,t.B)(e,"show-dialog",{dialogTag:"ha-dialog-set-backup-encryption-key",dialogImport:n,dialogParams:Object.assign(Object.assign({},i),{},{cancel:()=>{a(!1),s&&s()},submit:e=>{a(e),o&&o(e)}})})}))},93913:function(e,i,a){a.d(i,{i:function(){return s}});a(71695),a(40251),a(47021);var t=a(36522);const n=()=>Promise.all([a.e("7442"),a.e("99091")]).then(a.bind(a,70697)),s=(e,i)=>(0,t.B)(e,"show-dialog",{dialogTag:"ha-dialog-show-backup-encryption-key",dialogImport:n,dialogParams:i})},13310:function(e,i,a){a.a(e,(async function(e,t){try{a.r(i);var n=a(61701),s=a(72621),o=(a(71695),a(19423),a(40251),a(47021),a(57243)),c=a(50778),l=a(72344),d=a(36522),r=a(87707),h=a(22381),u=a(76320),p=(a(59826),a(34273),a(54977),a(23334),a(13928),a(7285),a(99426),a(34326),a(37583),a(26779)),g=(a(87979),a(68545)),_=(a(5131),a(4322)),k=a(6384),f=a(84941),y=e([g,_,k,p]);[g,_,k,p]=y.then?(await y)():y;let v,b,m,w,$=e=>e;const A="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",C="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L17.17,18.08L12.95,12.77L12.09,13.27Z";(0,n.Z)([(0,c.Mo)("ha-config-backup-settings")],(function(e,i){class a extends i{constructor(...i){super(...i),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"cloudStatus",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_config",value:void 0},{kind:"method",key:"willUpdate",value:function(e){(0,s.Z)(a,"willUpdate",this,3)([e]),e.has("config")&&!this._config&&(this._config=this.config)}},{kind:"method",key:"firstUpdated",value:function(e){(0,s.Z)(a,"firstUpdated",this,3)([e]),this._scrollToSection()}},{kind:"method",key:"_scrollToSection",value:async function(){var e,i;if("locations"===window.location.hash.substring(1)&&(0,l.p)(this.hass,"hassio")&&(null===(e=this._config)||void 0===e||!e.create_backup.include_all_addons)&&null!==(i=this._config)&&void 0!==i&&null!==(i=i.create_backup.include_addons)&&void 0!==i&&i.length)return this.addEventListener("backup-addons-fetched",(async()=>{await(0,u.y)(),this._scrolltoHash()})),void setTimeout((()=>{this._clearHash()}),500);await(0,u.y)(),this._scrolltoHash()}},{kind:"method",key:"_scrolltoHash",value:function(){const e=window.location.hash.substring(1);if(e){const i=this.shadowRoot.getElementById(e);null==i||i.scrollIntoView(),this._clearHash()}}},{kind:"method",key:"_clearHash",value:function(){history.replaceState(null,"",window.location.pathname)}},{kind:"method",key:"render",value:function(){return this._config?(0,o.dy)(v||(v=$` <hass-subpage back-path="/config/backup" .hass="${0}" .narrow="${0}" .header="${0}"> ${0} <div class="content"> <ha-card id="schedule"> <div class="card-header"> ${0} </div> <div class="card-content"> <p> ${0} </p> <ha-backup-config-schedule .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-schedule> </div> </ha-card> <ha-card id="data"> <div class="card-header"> ${0} </div> <div class="card-content"> <ha-backup-config-data .hass="${0}" .value="${0}" @value-changed="${0}" force-home-assistant hide-addon-version></ha-backup-config-data> </div> </ha-card> <ha-card class="agents" id="locations"> <div class="card-header"> ${0} </div> <div class="card-content"> <p> ${0} </p> <ha-backup-config-agents .hass="${0}" .value="${0}" .cloudStatus="${0}" @value-changed="${0}"></ha-backup-config-agents> ${0} </div> </ha-card> <ha-card> <div class="card-header"> ${0} </div> <div class="card-content"> <p> ${0} </p> <ha-backup-config-encryption-key .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-encryption-key> </div> </ha-card> </div> </hass-subpage> `),this.hass,this.narrow,this.hass.localize("ui.panel.config.backup.settings.header"),(0,l.p)(this.hass,"hassio")?(0,o.dy)(b||(b=$` <ha-button-menu slot="toolbar-icon"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-list-item graphic="icon" @request-selected="${0}"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} </ha-list-item> </ha-button-menu> `),this.hass.localize("ui.common.menu"),A,this._changeLocalLocation,C,this.hass.localize("ui.panel.config.backup.settings.menu.change_default_location")):o.Ld,this.hass.localize("ui.panel.config.backup.settings.schedule.title"),this.hass.localize("ui.panel.config.backup.settings.schedule.description"),this.hass,this._config,this._scheduleConfigChanged,this.hass.localize("ui.panel.config.backup.settings.data.title"),this.hass,this._dataConfig,this._dataConfigChanged,this.hass.localize("ui.panel.config.backup.settings.locations.title"),this.hass.localize("ui.panel.config.backup.settings.locations.description"),this.hass,this._config.create_backup.agent_ids,this.cloudStatus,this._agentsConfigChanged,this._config.create_backup.agent_ids.length?o.Ld:(0,o.dy)(m||(m=$` <ha-alert alert-type="warning" .title="${0}"> ${0} </ha-alert> <br> `),this.hass.localize("ui.panel.config.backup.settings.locations.no_location"),this.hass.localize("ui.panel.config.backup.settings.locations.no_location_description")),this.hass.localize("ui.panel.config.backup.settings.encryption_key.title"),this.hass.localize("ui.panel.config.backup.settings.encryption_key.description"),this.hass,this._config.create_backup.password,this._encryptionKeyChanged):o.Ld}},{kind:"method",key:"_changeLocalLocation",value:async function(e){(0,r.Q)(e)&&(0,f.s)(this,{})}},{kind:"method",key:"_scheduleConfigChanged",value:function(e){const i=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{schedule:i.schedule,retention:i.retention}),this._debounceSave()}},{kind:"get",key:"_dataConfig",value:function(){const{include_addons:e,include_all_addons:i,include_database:a,include_folders:t}=this._config.create_backup;return{include_homeassistant:!0,include_database:a,include_folders:t||void 0,include_all_addons:i,include_addons:e||void 0}}},{kind:"method",key:"_dataConfigChanged",value:function(e){const i=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this.config.create_backup),{},{include_database:i.include_database,include_folders:i.include_folders||null,include_all_addons:i.include_all_addons,include_addons:i.include_addons||null})}),this._debounceSave()}},{kind:"method",key:"_agentsConfigChanged",value:function(e){const i=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{agent_ids:i})}),this._debounceSave()}},{kind:"method",key:"_encryptionKeyChanged",value:function(e){const i=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{password:i})}),this._debounceSave()}},{kind:"field",key:"_debounceSave",value(){return(0,h.D)((()=>this._save()),500)}},{kind:"method",key:"_save",value:async function(){var e,i;await(0,p._r)(this.hass,{create_backup:{agent_ids:this._config.create_backup.agent_ids,include_folders:null!==(e=this._config.create_backup.include_folders)&&void 0!==e?e:[],include_database:this._config.create_backup.include_database,include_addons:null!==(i=this._config.create_backup.include_addons)&&void 0!==i?i:[],include_all_addons:this._config.create_backup.include_all_addons,password:this._config.create_backup.password},retention:this._config.retention,schedule:this._config.schedule.state}),(0,d.B)(this,"ha-refresh-backup-config")}},{kind:"field",static:!0,key:"styles",value(){return(0,o.iv)(w||(w=$`ha-card{scroll-margin-top:16px}.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:24px;display:flex;flex-direction:column;margin-bottom:24px}.alert{--mdc-theme-primary:var(--error-color)}.card-header{padding-bottom:8px}.card-content{padding-bottom:0}`))}}]}}),o.oi);t()}catch(v){t(v)}}))}}]);
//# sourceMappingURL=62807.e2718afbf67eedb6.js.map